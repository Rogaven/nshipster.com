<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>NSRange - NSHipster</title>
    <meta name="description" content="NSRange is one of the essential types of Foundation. Passed around and returned in methods throughout the framework, being well-versed in this struct has a range of benefits."/>
    <link rel="canonical" href="http://nshipster.com/nsrange/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="NSRange"/>
    <meta name="twitter:description" content="NSRange is one of the essential types of Foundation. Passed around and returned in methods throughout the framework, being well-versed in this struct has a range of benefits."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="NSRange"/>
    <meta property="og:url" content="http://nshipster.com/nsrange/"/>
    <meta property="og:description" content="NSRange is one of the essential types of Foundation. Passed around and returned in methods throughout the framework, being well-versed in this struct has a range of benefits."/>
    <meta property="article:published_time" content="2014-01-13T00:00:00-08:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:06:40-08:00"/>
    <meta property="article:tag" content="cocoa"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="NSRange"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/nsrange/">NSRange</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2014-01-13T00:00:00-08:00" itemprop="datePublished">January 13<sup>th</sup>, 2014</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p><code>NSRange</code> is one of the essential types of Foundation. Passed around and returned in methods throughout the framework, being well-versed in this struct has a range of benefits, which this week&rsquo;s article will help you locate.</p>

<hr>

<p>Ranges are data types used to describe a contiguous interval of integers. They are most commonly used with strings, arrays, and similarly-ordered collections.</p>

<p>For Objective-C programs, the Foundation type <code>NSRange</code> is used. In other languages, ranges are often encoded as a two-element array, containing the start and end indexes. In Foundation, <code>NSRange</code> instead encodes a range as struct containing the location and length. By command-clicking (<code>⌘-ʘ</code>) on the <code>NSRange</code> symbol in Xcode, we can jump directly to its declaration in <code>Foundation/NSRange.h</code>:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">typedef</span> <span class="k">struct</span> <span class="bp">_NSRange</span> <span class="p">{</span>
    <span class="bp">NSUInteger</span> <span class="n">location</span><span class="p">;</span>
    <span class="bp">NSUInteger</span> <span class="n">length</span><span class="p">;</span>
<span class="p">}</span> <span class="n">NSRange</span><span class="p">;</span>
</code></pre></div>
<p>In practice, this approach helps mitigate common off-by-one errors when working with ranges. For example, compare the equivalent Javascript and Objective-C code for creating a range of characters for a given string:</p>

<h4 id="range.js">range.js</h4>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">string</span> <span class="o">=</span> <span class="s2">&quot;hello, world&quot;</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">range</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="nx">string</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">];</span>
</code></pre></div>
<p>Forgetting to subtract <code>1</code> for the end index in Javascript would result in an out-of-bounds error later.</p>

<h4 id="range.m">range.m</h4>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="s">@&quot;hello, world&quot;</span><span class="p">;</span>
<span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">string</span> <span class="n">length</span><span class="p">]);</span>
</code></pre></div>
<p><code>NSRange</code>&rsquo;s approach is clearer and less prone to error—especially when it comes to more complex arithmetic operations on ranges.</p>

<h2 id="usage">Usage</h2>

<h3 id="strings">Strings</h3>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="s">@&quot;lorem ipsum dolor sit amet&quot;</span><span class="p">;</span>
<span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="p">[</span><span class="n">string</span> <span class="nl">rangeOfString</span><span class="p">:</span><span class="s">@&quot;ipsum&quot;</span><span class="p">];</span>
<span class="c1">// {.location=6, .length=5}</span>

<span class="bp">NSString</span> <span class="o">*</span><span class="n">substring</span> <span class="o">=</span> <span class="p">[</span><span class="n">string</span> <span class="nl">substringWithRange</span><span class="p">:</span><span class="n">range</span><span class="p">];</span>
<span class="c1">// @&quot;ipsum&quot;</span>
</code></pre></div>
<p><code>NSString</code> does not have a method like <code>containsString:</code>. Instead, <code>rangeOfString:</code> can be used to check for an <code>NSNotFound</code> location value:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">input</span> <span class="o">=</span> <span class="p">...;</span>
<span class="k">if</span> <span class="p">([</span><span class="n">input</span> <span class="nl">rangeOfString</span><span class="p">:</span><span class="s">@&quot;keyword&quot;</span><span class="p">].</span><span class="n">location</span> <span class="o">!=</span> <span class="n">NSNotFound</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="arrays">Arrays</h3>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSArray</span> <span class="o">*</span><span class="n">array</span> <span class="o">=</span> <span class="l">@[</span><span class="s">@&quot;a&quot;</span><span class="p">,</span> <span class="s">@&quot;b&quot;</span><span class="p">,</span> <span class="s">@&quot;c&quot;</span><span class="p">,</span> <span class="s">@&quot;d&quot;</span><span class="l">]</span><span class="p">;</span>
<span class="bp">NSArray</span> <span class="o">*</span><span class="n">subarray</span> <span class="o">=</span> <span class="p">[</span><span class="n">array</span> <span class="nl">subarrayWithRange</span><span class="p">:</span><span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)];</span>
<span class="c1">// @[@&quot;b&quot;, @&quot;c&quot;]</span>
</code></pre></div>
<h3 id="index-sets">Index Sets</h3>

<p><a href="http://nshipster.com/nsindexset/">NSIndexSet</a> is a Foundation collection class that is similar to <code>NSRange</code>, with the notable exception of being able to support non-contiguous series. An <code>NSIndexSet</code> can be created from a range using the <code>indexSetWithIndexesInRange:</code> class constructor:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="bp">NSIndexSet</span> <span class="o">*</span><span class="n">indexSet</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSIndexSet</span> <span class="nl">indexSetWithIndexesInRange</span><span class="p">:</span><span class="n">range</span><span class="p">];</span>
</code></pre></div>
<h2 id="functions">Functions</h2>

<p>Because <code>NSRange</code> is not a class, creating and using instances is done through function calls, rather than, say, instance methods.</p>

<blockquote>
<p>Many of the NSRange functions are named counter to the modern conventions of Foundation and CoreFoundation wherein the relevant type of the function immediately follows the two-letter namespace. For example, <code>NSMakeRange</code> should instead be named <code>NSRangeMake</code>, following the example of <code>CGRectMake</code> and <code>CGSizeMake</code>,  et al. Similarly,  a better name for <code>NSEqualRanges</code> would be <code>NSRangeEqualToRange</code>, just like <code>CGPointEqualToPoint</code>.</p>

<p>Although consistency in itself is likely not sufficient reason to go through the trouble of replacing existing usage, <a href="https://gist.github.com/mattt/8402537">this gist</a> shows how one could make their own code base a little more OCD-friendly.</p>
</blockquote>

<h3 id="creating-an-nsrange">Creating an NSRange</h3>

<blockquote>
<ul>
<li><code>NSMakeRange</code>:  Creates a new NSRange from the specified values.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSArray</span> <span class="o">*</span><span class="n">array</span> <span class="o">=</span> <span class="l">@[</span><span class="mi">@1</span><span class="p">,</span> <span class="mi">@2</span><span class="p">,</span> <span class="mi">@3</span><span class="l">]</span><span class="p">;</span>
<span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">array</span> <span class="n">count</span><span class="p">]);</span>
<span class="c1">// {.location=0, .length=3}</span>
</code></pre></div>
<h3 id="querying-information">Querying Information</h3>

<blockquote>
<ul>
<li><code>NSEqualRanges</code>: Returns a Boolean value that indicates whether two given ranges are equal.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NSRange</span> <span class="n">range1</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
<span class="n">NSRange</span> <span class="n">range2</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="kt">BOOL</span> <span class="n">equal</span> <span class="o">=</span> <span class="n">NSEqualRanges</span><span class="p">(</span><span class="n">range1</span><span class="p">,</span> <span class="n">range2</span><span class="p">);</span> <span class="c1">// NO</span>
</code></pre></div>
<blockquote>
<ul>
<li><code>NSLocationInRange</code>:  Returns a Boolean value that indicates whether a specified position is in a given range.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="kt">BOOL</span> <span class="n">contained</span> <span class="o">=</span> <span class="n">NSLocationInRange</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="n">range</span><span class="p">);</span> <span class="c1">// YES</span>
</code></pre></div>
<blockquote>
<ul>
<li><code>NSMaxRange</code>: Returns the sum of the location and length of the range.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="bp">NSUInteger</span> <span class="n">max</span> <span class="o">=</span> <span class="n">NSMaxRange</span><span class="p">(</span><span class="n">range</span><span class="p">);</span> <span class="c1">// 7</span>
</code></pre></div>
<h3 id="set-operations">Set Operations</h3>

<blockquote>
<ul>
<li><code>NSIntersectionRange</code>: Returns the intersection of the specified ranges. If the returned range’s length field is <code>0</code>, then the two ranges don’t intersect, and the value of the location field is undefined.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NSRange</span> <span class="n">range1</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
<span class="n">NSRange</span> <span class="n">range2</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="n">NSRange</span> <span class="n">intersectionRange</span> <span class="o">=</span> <span class="n">NSIntersectionRange</span><span class="p">(</span><span class="n">range1</span><span class="p">,</span> <span class="n">range2</span><span class="p">);</span>
<span class="c1">// {.location=2, .length=4}</span>
</code></pre></div>
<blockquote>
<ul>
<li><code>NSUnionRange</code>: Returns the union of the specified ranges. A range covering all indices in and between range1 and range2. If one range is completely contained in the other, the returned range is equal to the larger range.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NSRange</span> <span class="n">range1</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">);</span>
<span class="n">NSRange</span> <span class="n">range2</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="n">NSRange</span> <span class="n">unionRange</span> <span class="o">=</span> <span class="n">NSUnionRange</span><span class="p">(</span><span class="n">range1</span><span class="p">,</span> <span class="n">range2</span><span class="p">);</span>
<span class="c1">// {.location=0, .length=9}</span>
</code></pre></div>
<h3 id="converting-between-nsstring-*-&amp;-nsrange">Converting Between NSString * &amp; NSRange</h3>

<blockquote>
<ul>
<li><code>NSStringFromRange</code>: Returns a string representation of a range.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="n">NSStringFromRange</span><span class="p">(</span><span class="n">range</span><span class="p">);</span> <span class="c1">// @&quot;{3,4}&quot;</span>
</code></pre></div>
<blockquote>
<ul>
<li><code>NSRangeFromString</code>: Returns a range from a textual representation.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="s">@&quot;{1,5}&quot;</span><span class="p">;</span>
<span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="n">NSRangeFromString</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
<span class="c1">// {.location=1, .length=5}</span>
</code></pre></div>
<p>If the string passed into <code>NSRangeFromString</code> does not represent a valid range, it will return a range with its location and length set to <code>0</code>.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="s">@&quot;invalid&quot;</span><span class="p">;</span>
<span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="n">NSRangeFromString</span><span class="p">(</span><span class="n">string</span><span class="p">);</span>
<span class="c1">// {.location=0, .length=0}</span>
</code></pre></div>
<p>While one might be tempted to use <code>NSStringFromRange</code> to box <code>NSRange</code> for inclusion within an <code>NSArray</code>, <code>NSValue +valueWithRange:</code> is the way to go:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NSRange</span> <span class="n">range</span> <span class="o">=</span> <span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
<span class="bp">NSValue</span> <span class="o">*</span><span class="n">value</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSValue</span> <span class="nl">valueWithRange</span><span class="p">:</span><span class="n">range</span><span class="p">];</span>
</code></pre></div>
<hr>

<p><code>NSRange</code> is one of the few cases where some of the underlying implementation of its functions are actually exposed and inlined in the public headers:</p>

<h4 id="foundation/nsrange.h">Foundation/NSRange.h</h4>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NS_INLINE</span> <span class="n">NSRange</span> <span class="nf">NSMakeRange</span><span class="p">(</span><span class="bp">NSUInteger</span> <span class="n">loc</span><span class="p">,</span> <span class="bp">NSUInteger</span> <span class="n">len</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">NSRange</span> <span class="n">r</span><span class="p">;</span>
    <span class="n">r</span><span class="p">.</span><span class="n">location</span> <span class="o">=</span> <span class="n">loc</span><span class="p">;</span>
    <span class="n">r</span><span class="p">.</span><span class="n">length</span> <span class="o">=</span> <span class="n">len</span><span class="p">;</span>
    <span class="k">return</span> <span class="n">r</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">NS_INLINE</span> <span class="bp">NSUInteger</span> <span class="nf">NSMaxRange</span><span class="p">(</span><span class="n">NSRange</span> <span class="n">range</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">range</span><span class="p">.</span><span class="n">location</span> <span class="o">+</span> <span class="n">range</span><span class="p">.</span><span class="n">length</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">NS_INLINE</span> <span class="kt">BOOL</span> <span class="nf">NSLocationInRange</span><span class="p">(</span><span class="bp">NSUInteger</span> <span class="n">loc</span><span class="p">,</span> <span class="n">NSRange</span> <span class="n">range</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="n">loc</span> <span class="o">&lt;</span> <span class="n">range</span><span class="p">.</span><span class="n">location</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">loc</span> <span class="o">-</span> <span class="n">range</span><span class="p">.</span><span class="n">location</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">range</span><span class="p">.</span><span class="n">length</span><span class="p">)</span> <span class="o">?</span> <span class="nb">YES</span> <span class="o">:</span> <span class="nb">NO</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">NS_INLINE</span> <span class="kt">BOOL</span> <span class="nf">NSEqualRanges</span><span class="p">(</span><span class="n">NSRange</span> <span class="n">range1</span><span class="p">,</span> <span class="n">NSRange</span> <span class="n">range2</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">range1</span><span class="p">.</span><span class="n">location</span> <span class="o">==</span> <span class="n">range2</span><span class="p">.</span><span class="n">location</span> <span class="o">&amp;&amp;</span> <span class="n">range1</span><span class="p">.</span><span class="n">length</span> <span class="o">==</span> <span class="n">range2</span><span class="p">.</span><span class="n">length</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="nsrangepointer">NSRangePointer</h2>

<p>One oddity worth mentioning with <code>NSRange</code> is the existence of <code>NSRangePointer</code>. &ldquo;What the what?&rdquo;, you might exclaim in panicked confusion. Jumping to the source confirms our darkest fears:</p>

<h4 id="foundation/nsrange.h">Foundation/NSRange.h</h4>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">typedef</span> <span class="n">NSRange</span> <span class="o">*</span><span class="n">NSRangePointer</span><span class="p">;</span>
</code></pre></div>
<p>So. Without a definitive origin story, one would have to assume that this type was created by a well-meaning framework engineer who noted the confusion around <code>NSRange</code> being a struct and not a class. <code>NSRange *</code> is equivalent to <code>NSRangePointer</code>, though the latter can be found in out parameters for various methods throughout Foundation. <code>NSAttributedString</code>, for instance, has an <code>NSRangePointer</code> parameter for returning the effective range of an attribute at a particular index (since the attribute likely starts and ends before outside of the specified index):</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSMutableAttributedString</span> <span class="o">*</span><span class="n">mutableAttributedString</span> <span class="o">=</span> <span class="p">...;</span>
<span class="n">NSRange</span> <span class="n">range</span><span class="p">;</span>
<span class="k">if</span> <span class="p">([</span><span class="n">mutableAttributedString</span> <span class="nl">attribute</span><span class="p">:</span><span class="n">NSUnderlineStyleAttributeName</span>
                               <span class="nl">atIndex</span><span class="p">:</span><span class="mi">0</span>
                        <span class="nl">effectiveRange</span><span class="p">:</span><span class="o">&amp;</span><span class="n">range</span><span class="p">])</span>
<span class="p">{</span>
    <span class="c1">// Make underlined text blue as well</span>
    <span class="p">[</span><span class="n">mutableAttributedString</span> <span class="nl">addAttribute</span><span class="p">:</span><span class="n">NSForegroundColorAttributeName</span>
                                    <span class="nl">value</span><span class="p">:[</span><span class="bp">UIColor</span> <span class="n">blueColor</span><span class="p">]</span>
                                    <span class="nl">range</span><span class="p">:</span><span class="n">range</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="cfrange">CFRange</h2>

<p>One final caveat: Core Foundation also defines a <code>CFRange</code> type, which differs from <code>NSRange</code> in using <code>CFIndex</code> types for its members, and having only the function <code>CFRangeMake</code>:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">typedef</span> <span class="k">struct</span> <span class="p">{</span>
    <span class="n">CFIndex</span> <span class="n">location</span><span class="p">;</span>
    <span class="n">CFIndex</span> <span class="n">length</span><span class="p">;</span>
<span class="p">}</span> <span class="n">CFRange</span><span class="p">;</span>
</code></pre></div>
<p>Anyone working with CoreText or another low-level C API is likely to encounter <code>CFRange</code> in place of <code>NSRange</code>.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2014-01-13-nsrange.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
            
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/extended-file-attributes/" title="Extended File Attributes" rel="next">Extended File Attributes</a>
            </h1>

            <p>Amidst revelations of widespread spying by the NSA, the concept of metadata has taken an unexpected role in the national conversation about government surveillance. What is it? And how much does it reveal about us and our daily habits? These are questions that the American people are asking, and they deserve an answer.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
          
          
            <li>
              <a href="/uialertcontroller/" title="UIAlertController">UIAlertController</a>
            </li>
            
          
          
            <li>
              <a href="/nscalendar-additions/" title="NSCalendar Additions">NSCalendar Additions</a>
            </li>
            
          
          
            <li>
              <a href="/uiaccessibility/" title="UIAccessibility">UIAccessibility</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
