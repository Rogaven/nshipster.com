<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>WKWebView - NSHipster</title>
    <meta name="description" content="iOS has a complicated relationship with the web. And it goes back to the very inception of the platform nearly a decade ago."/>
    <link rel="canonical" href="http://nshipster.com/wkwebkit/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="WKWebView"/>
    <meta name="twitter:description" content="iOS has a complicated relationship with the web. And it goes back to the very inception of the platform nearly a decade ago."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="WKWebView"/>
    <meta property="og:url" content="http://nshipster.com/wkwebkit/"/>
    <meta property="og:description" content="iOS has a complicated relationship with the web. And it goes back to the very inception of the platform nearly a decade ago."/>
    <meta property="article:published_time" content="2014-08-24T00:00:00-07:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:06:40-08:00"/>
    <meta property="article:tag" content="cocoa"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="WKWebView"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/wkwebkit/">WKWeb​View</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2014-08-24T00:00:00-07:00" itemprop="datePublished">August 24<sup>th</sup>, 2014</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>iOS has a complicated relationship with the web. And it goes back to the very inception of the platform nearly a decade ago.</p>

<p>It&rsquo;s difficult to appreciate just how differently the first iPhone could have turned out. The iconic touchscreen device we know and love today was just one option on the table. Early prototypes explored the use of a physical keyboard and a touch screen + stylus combo, with screen dimensions going up to 5&quot; x 7&quot;. Even the iPod click wheel was a serious contender for a time.</p>

<p>But perhaps the most significant early decision to be made involved software, not hardware.</p>

<p>How should the iPhone run software? Apps, like on OSX, or as web pages, using Safari? That choice to fork OS X and build iPhoneOS had widespread implications, and remains a contentious decision to this day.</p>

<p>Consider this infamous line from Steve Jobs&#39; WWDC 2007 keynote:</p>

<blockquote>
<p>The full Safari engine is inside of iPhone. And so, you can write amazing Web 2.0 and Ajax apps that look exactly and behave exactly like apps on the iPhone. And these apps can integrate perfectly with iPhone services. They can make a call, they can send an email, they can look up a location on Google Maps.</p>
</blockquote>

<p>The web has always been a second-class citizen on iOS <em>(which is ironic, since the iPhone is largely responsible for the mobile web existing as it does today)</em>. <code>UIWebView</code> is massive and clunky and leaks memory. It lags behind Mobile Safari, which has the benefit of the Nitro JavaScript engine.</p>

<p>However, all of this has changed with the introduction of <code>WKWebView</code> and the rest of the <code>WebKit</code> framework.</p>

<hr>

<p><code>WKWebView</code> is the centerpiece of the modern WebKit API introduced in iOS 8 &amp; OS X Yosemite. It replaces <code>UIWebView</code> in UIKit and <code>WebView</code> in AppKit, offering a consistent API across the two platforms.</p>

<p>Boasting responsive 60fps scrolling, built-in gestures, streamlined communication between app and webpage, and the same JavaScript engine as Safari, <code>WKWebView</code> is one of the most significant announcements to come out of WWDC 2014.</p>

<p>What was a single class and protocol with <code>UIWebView</code> &amp; <code>UIWebViewDelegate</code> has been factored out into 14 classes and 3 protocols in WKWebKit. Don&rsquo;t be alarmed by the huge jump in complexity, though—this new architecture allows for a ton of new features:</p>

<h2 id="wkwebkit-framework">WKWebKit Framework</h2>

<h3 id="classes">Classes</h3>

<blockquote>
<ul>
<li><code>WKBackForwardList</code>: A list of webpages previously visited in a web view that can be reached by going back or forward.

<ul>
<li><code>WKBackForwardListItem</code>: Represents a webpage in the back-forward list of a web view.</li>
</ul></li>
<li><code>WKFrameInfo</code>: Contains information about a frame on a webpage.</li>
<li><code>WKNavigation</code>: Contains information for tracking the loading progress of a webpage.

<ul>
<li><code>WKNavigationAction</code>: Contains information about an action that may cause a navigation, used for making policy decisions.</li>
<li><code>WKNavigationResponse</code>: Contains information about a navigation response, used for making policy decisions.</li>
</ul></li>
<li><code>WKPreferences</code>: Encapsulates the preference settings for a web view.</li>
<li><code>WKProcessPool</code>: Represents a pool of Web Content processes.</li>
<li><code>WKUserContentController</code>: Provides a way for JavaScript to post messages and inject user scripts to a web view.

<ul>
<li><code>WKScriptMessage</code>: Contains information about a message sent from a webpage.</li>
<li><code>WKUserScript</code>: Represents a script that can be injected into a webpage.</li>
</ul></li>
<li><code>WKWebViewConfiguration</code>: A collection of properties with which to initialize a web view.</li>
<li><code>WKWindowFeatures</code>: Specifies optional attributes for the containing window when a new web view is requested.</li>
</ul>
</blockquote>

<h3 id="protocols">Protocols</h3>

<blockquote>
<ul>
<li><code>WKNavigationDelegate</code>: Provides methods for tracking the progress of main frame navigations and for deciding load policy for main frame and subframe navigations.</li>
<li><code>WKScriptMessageHandler</code>: Provides a method for receiving messages from JavaScript running in a webpage.</li>
<li><code>WKUIDelegate</code>: Provides methods for presenting native user interface elements on behalf of a webpage.</li>
</ul>
</blockquote>

<h2 id="api-diff-between-uiwebview-&amp;-wkwebview">API Diff Between <code>UIWebView</code> &amp; <code>WKWebView</code></h2>

<p><code>WKWebView</code> inherits much of the same programming interface as <code>UIWebView</code>, making it convenient for apps to migrate to WKWebKit (and conditionally compile as necessary while iOS 8 gains widespread adoption).</p>

<p>For anyone interested in the specifics, here&rsquo;s a comparison of the APIs of each class:</p>

<table><thead>
<tr>
<th>UIWebView</th>
<th>WKWebView</th>
</tr>
</thead><tbody>
<tr>
<td><code>var scrollView: UIScrollView { get }</code></td>
<td><code>var scrollView: UIScrollView { get }</code></td>
</tr>
<tr>
<td></td>
<td><code>var configuration: WKWebViewConfiguration { get }</code></td>
</tr>
<tr>
<td><code>var delegate: UIWebViewDelegate?</code></td>
<td><code>var UIDelegate: WKUIDelegate?</code></td>
</tr>
<tr>
<td></td>
<td><code>var navigationDelegate: WKNavigationDelegate?</code></td>
</tr>
<tr>
<td></td>
<td><code>var backForwardList: WKBackForwardList { get }</code></td>
</tr>
</tbody></table>

<h3 id="loading">Loading</h3>

<table><thead>
<tr>
<th>UIWebView</th>
<th>WKWebView</th>
</tr>
</thead><tbody>
<tr>
<td><code>func loadRequest(request: NSURLRequest)</code></td>
<td><code>func loadRequest(request: NSURLRequest) -&gt; WKNavigation?</code></td>
</tr>
<tr>
<td><code>func loadHTMLString(string: String, baseURL: NSURL?)</code></td>
<td><code>func loadHTMLString(string: String, baseURL: NSURL) -&gt; WKNavigation?</code></td>
</tr>
<tr>
<td><code>func loadData(data: NSData, MIMEType: String, textEncodingName: String, baseURL: NSURL)</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>var estimatedProgress: Double { get }</code></td>
</tr>
<tr>
<td></td>
<td><code>var hasOnlySecureContent: Bool { get }</code></td>
</tr>
<tr>
<td><code>func reload()</code></td>
<td><code>func reload() -&gt; WKNavigation?</code></td>
</tr>
<tr>
<td></td>
<td><code>func reloadFromOrigin() -&gt; WKNavigation?</code></td>
</tr>
<tr>
<td><code>func stopLoading()</code></td>
<td><code>func stopLoading()</code></td>
</tr>
<tr>
<td><code>var request: NSURLRequest? { get }</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>var URL: NSURL? { get }</code></td>
</tr>
<tr>
<td></td>
<td><code>var title: String? { get }</code></td>
</tr>
</tbody></table>

<h3 id="history">History</h3>

<table><thead>
<tr>
<th>UIWebView</th>
<th>WKWebView</th>
</tr>
</thead><tbody>
<tr>
<td></td>
<td><code>func goToBackForwardListItem(item: WKBackForwardListItem) -&gt; WKNavigation?</code></td>
</tr>
<tr>
<td><code>func goBack()</code></td>
<td><code>func goBack() -&gt; WKNavigation?</code></td>
</tr>
<tr>
<td><code>func goForward()</code></td>
<td><code>func goForward() -&gt; WKNavigation?</code></td>
</tr>
<tr>
<td><code>var canGoBack: Bool { get }</code></td>
<td><code>var canGoBack: Bool { get }</code></td>
</tr>
<tr>
<td><code>var canGoForward: Bool { get }</code></td>
<td><code>var canGoForward: Bool { get }</code></td>
</tr>
<tr>
<td><code>var loading: Bool { get }</code></td>
<td><code>var loading: Bool { get }</code></td>
</tr>
</tbody></table>

<h3 id="javascript-evaluation">Javascript Evaluation</h3>

<table><thead>
<tr>
<th>UIWebView</th>
<th>WKWebView</th>
</tr>
</thead><tbody>
<tr>
<td><code>func stringByEvaluatingJavaScriptFromString(script: String) -&gt; String</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>func evaluateJavaScript(javaScriptString: String, completionHandler: ((AnyObject?, NSError?) -&gt; Void)?)</code></td>
</tr>
</tbody></table>

<h3 id="miscellaneous">Miscellaneous</h3>

<table><thead>
<tr>
<th>UIWebView</th>
<th>WKWebView</th>
</tr>
</thead><tbody>
<tr>
<td><code>var keyboardDisplayRequiresUserAction: Bool</code></td>
<td></td>
</tr>
<tr>
<td><code>var scalesPageToFit: Bool</code></td>
<td></td>
</tr>
<tr>
<td></td>
<td><code>var allowsBackForwardNavigationGestures: Bool</code></td>
</tr>
</tbody></table>

<h3 id="pagination">Pagination</h3>

<p><code>WKWebView</code> currently lacks equivalent APIs for paginating content.</p>

<ul>
<li><code>var paginationMode: UIWebPaginationMode</code></li>
<li><code>var paginationBreakingMode: UIWebPaginationBreakingMode</code></li>
<li><code>var pageLength: CGFloat</code></li>
<li><code>var gapBetweenPages: CGFloat</code></li>
<li><code>var pageCount: Int { get }</code></li>
</ul>

<h3 id="refactored-into-wkwebviewconfiguration">Refactored into <code>WKWebViewConfiguration</code></h3>

<p>The following properties on <code>UIWebView</code> have been factored into a separate configuration object, which is passed into the initializer for <code>WKWebView</code>:</p>

<ul>
<li><code>var allowsInlineMediaPlayback: Bool</code></li>
<li><code>var mediaPlaybackRequiresUserAction: Bool</code></li>
<li><code>var mediaPlaybackAllowsAirPlay: Bool</code></li>
<li><code>var suppressesIncrementalRendering: Bool</code></li>
</ul>

<hr>

<h2 id="javascript-↔︎-swift-communication">JavaScript ↔︎ Swift Communication</h2>

<p>One of the major improvements over <code>UIWebView</code> is how interaction and data can be passed back and forth between an app and its web content.</p>

<h3 id="injecting-behavior-with-user-scripts">Injecting Behavior with User Scripts</h3>

<p><code>WKUserScript</code> allows JavaScript behavior to be injected at the start or end of document load. This powerful feature allows for web content to be manipulated in a safe and consistent way across page requests.</p>

<p>As a simple example, here&rsquo;s how a user script can be injected to change the background color of a web page:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="n">source</span> <span class="o">=</span> <span class="s">&quot;document.body.style.background = </span><span class="se">\&quot;</span><span class="s">#777</span><span class="se">\&quot;</span><span class="s">;&quot;</span>
<span class="k">let</span> <span class="n">userScript</span> <span class="o">=</span> <span class="n">WKUserScript</span><span class="p">(</span><span class="nl">source</span><span class="p">:</span> <span class="n">source</span><span class="p">,</span> <span class="nl">injectionTime</span><span class="p">:</span> <span class="p">.</span><span class="n">AtDocumentEnd</span><span class="p">,</span> <span class="nl">forMainFrameOnly</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span>

<span class="k">let</span> <span class="n">userContentController</span> <span class="o">=</span> <span class="n">WKUserContentController</span><span class="p">()</span>
<span class="n">userContentController</span><span class="p">.</span><span class="n">addUserScript</span><span class="p">(</span><span class="n">userScript</span><span class="p">)</span>

<span class="k">let</span> <span class="n">configuration</span> <span class="o">=</span> <span class="n">WKWebViewConfiguration</span><span class="p">()</span>
<span class="n">configuration</span><span class="p">.</span><span class="n">userContentController</span> <span class="o">=</span> <span class="n">userContentController</span>
<span class="nb">self</span><span class="p">.</span><span class="n">webView</span> <span class="o">=</span> <span class="n">WKWebView</span><span class="p">(</span><span class="nl">frame</span><span class="p">:</span> <span class="nb">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">bounds</span><span class="p">,</span> <span class="nl">configuration</span><span class="p">:</span> <span class="n">configuration</span><span class="p">)</span>
</code></pre></div>
<p><code>WKUserScript</code> objects are initialized with JavaScript source, as well as whether it should be injected at the start or end of loading the page, and whether this behavior should be used for all frames, or just the main frame. The user script is then added to a <code>WKUserContentController</code>, which is set on the <code>WKWebViewConfiguration</code> object passed into the initializer for <code>WKWebView</code>.</p>

<p>This example could easily be extended to perform more significant modifications to the page, such as removing advertisements, hiding comments, or maybe <a href="https://github.com/panicsteve/cloud-to-butt">changing all occurrences of the phrase &ldquo;the cloud&rdquo; to &ldquo;my butt&rdquo;</a>.</p>

<h3 id="message-handlers">Message Handlers</h3>

<p>Communication from web to app has improved significantly as well, with message handlers.</p>

<p>Just like <code>console.log</code> prints out information to the <a href="https://developer.apple.com/library/safari/documentation/AppleApplications/Conceptual/Safari_Developer_Guide/Introduction/Introduction.html">Safari Web Inspector</a> debug console, information from a web page can be passed back to the app by invoking:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">webkit</span><span class="p">.</span><span class="nx">messageHandlers</span><span class="p">.{</span><span class="nx">NAME</span><span class="p">}.</span><span class="nx">postMessage</span><span class="p">()</span>
</code></pre></div>
<blockquote>
<p>What&rsquo;s really great about this API is that JavaScript objects are <em>automatically serialized</em> into native Objective-C or Swift objects.</p>
</blockquote>

<p>The name of the handler is configured in <code>addScriptMessageHandler()</code>, which registers a handler conforming to the <code>WKScriptMessageHandler</code> protocol:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">class</span> <span class="nl">NotificationScriptMessageHandler</span><span class="p">:</span> <span class="bp">NSObject</span><span class="p">,</span> <span class="n">WKScriptMessageHandler</span> <span class="p">{</span>
    <span class="k">func</span> <span class="n">userContentController</span><span class="p">(</span><span class="nl">userContentController</span><span class="p">:</span> <span class="n">WKUserContentController</span><span class="p">,</span> <span class="n">didReceiveScriptMessage</span> <span class="nl">message</span><span class="p">:</span> <span class="n">WKScriptMessage</span><span class="o">!</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">print</span><span class="p">(</span><span class="n">message</span><span class="p">.</span><span class="n">body</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">let</span> <span class="n">userContentController</span> <span class="o">=</span> <span class="n">WKUserContentController</span><span class="p">()</span>
<span class="k">let</span> <span class="n">handler</span> <span class="o">=</span> <span class="n">NotificationScriptMessageHandler</span><span class="p">()</span>
<span class="n">userContentController</span><span class="p">.</span><span class="n">addScriptMessageHandler</span><span class="p">(</span><span class="n">handler</span><span class="p">,</span> <span class="nl">name</span><span class="p">:</span> <span class="s">&quot;notification&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Now, when a notification comes into the app, such as to notify the creation of a new object on the page, that information can be passed with:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nb">window</span><span class="p">.</span><span class="nx">webkit</span><span class="p">.</span><span class="nx">messageHandlers</span><span class="p">.</span><span class="nx">notification</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span><span class="nx">body</span><span class="o">:</span> <span class="s2">&quot;...&quot;</span><span class="p">});</span>
</code></pre></div>
<blockquote>
<p>Add User Scripts to create hooks for webpage events that use Message Handlers to communicate status back to the app.</p>
</blockquote>

<p>The same approach can be used to scrape information from the page for display or analysis within the app.</p>

<p>For example, if someone were to build a browser specifically for NSHipster.com, it could have a button that listed related articles in a popover:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// document.location.href == &quot;http://nshipster.com/webkit&quot;</span>
<span class="kd">function</span> <span class="nx">getRelatedArticles</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">related</span> <span class="o">=</span> <span class="p">[];</span>
    <span class="kd">var</span> <span class="nx">elements</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s2">&quot;related&quot;</span><span class="p">).</span><span class="nx">getElementsByTagName</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">elements</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">a</span> <span class="o">=</span> <span class="nx">elements</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="nx">related</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span><span class="nx">href</span><span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">href</span><span class="p">,</span> <span class="nx">title</span><span class="o">:</span> <span class="nx">a</span><span class="p">.</span><span class="nx">title</span><span class="p">});</span>
    <span class="p">}</span>

    <span class="nb">window</span><span class="p">.</span><span class="nx">webkit</span><span class="p">.</span><span class="nx">messageHandlers</span><span class="p">.</span><span class="nx">related</span><span class="p">.</span><span class="nx">postMessage</span><span class="p">({</span><span class="nx">articles</span><span class="o">:</span> <span class="nx">related</span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="n">js</span> <span class="o">=</span> <span class="s">&quot;getRelatedArticles();&quot;</span>
<span class="nb">self</span><span class="p">.</span><span class="n">webView</span><span class="o">?</span><span class="p">.</span><span class="n">evaluateJavaScript</span><span class="p">(</span><span class="n">js</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">error</span><span class="p">)</span> <span class="k">in</span>
    <span class="n">print</span><span class="p">(</span><span class="n">error</span><span class="p">)</span>
<span class="p">}</span>

<span class="c1">// Get results in previously-registered message handler</span>
</code></pre></div>
<hr>

<p>If your app is little more than a thin container around web content, <code>WKWebView</code> is a game-changer. All of that performance and compatibility that you&rsquo;ve longed for is finally available. It&rsquo;s everything you might have hoped for.</p>

<p>If you&rsquo;re more of a native controls purist, you may be surprised at the power and flexibility afforded by the new technologies in iOS 8. It&rsquo;s a dirty secret that some stock apps like Messages use WebKit to render tricky content. The fact that you probably haven&rsquo;t noticed should be an indicator that web views actually have a place in app development best practices.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2014-08-24-wkwebkit.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
        
            <em>This article uses Swift version 2.0 and was last reviewed on September 8, 2015.</em>
        
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/swift-default-protocol-implementations/" title="Swift Default Protocol Implementations" rel="next">Swift Default Protocol Implementations</a>
            </h1>

            <p>Protocols are the foundation of generics in Swift, but suffer from the lack of a built-in way to provide default implementations for methods. However, there is an interesting workaround in Swift that you probably haven&rsquo;t noticed.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/nshashtable-and-nsmaptable/" title="NSHashTable & NSMapTable">NSHashTable & NSMapTable</a>
            </li>
            
          
          
            <li>
              <a href="/uilocalizedindexedcollation/" title="UILocalizedIndexedCollation">UILocalizedIndexedCollation</a>
            </li>
            
          
          
            <li>
              <a href="/nserror/" title="NSError">NSError</a>
            </li>
            
          
          
            <li>
              <a href="/javascriptcore/" title="JavaScriptCore">JavaScriptCore</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
