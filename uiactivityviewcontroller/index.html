<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>UIActivityViewController - NSHipster</title>
    <meta name="description" content="The relationship between code and data has long been a curious one."/>
    <link rel="canonical" href="http://nshipster.com/uiactivityviewcontroller/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="UIActivityViewController"/>
    <meta name="twitter:description" content="The relationship between code and data has long been a curious one."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="UIActivityViewController"/>
    <meta property="og:url" content="http://nshipster.com/uiactivityviewcontroller/"/>
    <meta property="og:description" content="The relationship between code and data has long been a curious one."/>
    <meta property="article:published_time" content="2014-04-21T00:00:00-07:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:34:50-08:00"/>
    <meta property="article:tag" content="cocoa"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="UIActivityViewController"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/uiactivityviewcontroller/">UIActivity​View​Controller</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2014-04-21T00:00:00-07:00" itemprop="datePublished">April 21<sup>st</sup>, 2014</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>The relationship between code and data has long been a curious one.</p>

<p>Certain programming languages, such as <a href="http://en.wikipedia.org/wiki/Lisp_programming_language">Lisp</a>, <a href="http://en.wikipedia.org/wiki/Io_%28programming_language%29">Io</a>, and <a href="http://en.wikipedia.org/wiki/Mathematica">Mathematica</a> are  <a href="http://en.wikipedia.org/wiki/Homoiconicity">homoiconic</a>, meaning that their code is represented as a data primitive, which itself can be manipulated in code. Most other languages, including Objective-C, however, create a strict boundary between the two, shying away from <code>eval()</code> and other potentially dangerous methods of dynamic instructing loading.</p>

<p>This tension between code and data is brought to a whole new level when the data in question is too large or unwieldy to represent as anything but a byte stream. The question of how to encode, decode, and interpret the binary representation of images, documents, and media has been ongoing since the very first operating systems.</p>

<p>The Core Services framework on OS X and Mobile Core Services framework on iOS provide functions that identify and categorize data types by file extension and <a href="http://en.wikipedia.org/wiki/Internet_media_type">MIME type</a>, according to <a href="http://en.wikipedia.org/wiki/Uniform_Type_Identifier">Universal Type Identifiers</a>. UTIs provide an extensible, hierarchical categorization system, which affords the developer great flexibility in handling even the most exotic file types. For example, a Ruby source file (<code>.rb</code>) is categorized as Ruby Source Code &gt; Source Code &gt; Text &gt; Content &gt; Data; a QuickTime Movie file (<code>.mov</code>) is categorized as Video &gt; Movie &gt; Audiovisual Content &gt; Content &gt; Data.</p>

<p>UTIs have worked reasonably well within the filesystem abstraction of the desktop. However, in a mobile paradigm, where files and directories are hidden from the user, this breaks down quickly. And, what&rsquo;s more, the rise of cloud services and social media has placed greater importance on remote entities over local files. Thus, a tension between UTIs and URLs.</p>

<p>It&rsquo;s clear that we need something else. Could <code>UIActivityViewController</code> be the solution we so desperately seek?</p>

<hr>

<p><code>UIActivityViewController</code>, introduced in iOS 6, provides a unified services interface for sharing and performing actions on data within an application.</p>

<p>Given a collection of actionable data, a <code>UIActivityViewController</code> instance is created as follows:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nl">string</span><span class="p">:</span> <span class="n">String</span> <span class="o">=</span> <span class="p">...</span>
<span class="k">let</span> <span class="nl">URL</span><span class="p">:</span> <span class="bp">NSURL</span> <span class="o">=</span> <span class="p">...</span>

<span class="k">let</span> <span class="n">activityViewController</span> <span class="o">=</span> <span class="bp">UIActivityViewController</span><span class="p">(</span><span class="nl">activityItems</span><span class="p">:</span> <span class="p">[</span><span class="n">string</span><span class="p">,</span> <span class="n">URL</span><span class="p">],</span> <span class="nl">applicationActivities</span><span class="p">:</span> <span class="nb">nil</span><span class="p">)</span>
<span class="n">navigationController</span><span class="o">?</span><span class="p">.</span><span class="n">presentViewController</span><span class="p">(</span><span class="n">activityViewController</span><span class="p">,</span> <span class="nl">animated</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="p">...;</span>
<span class="bp">NSURL</span> <span class="o">*</span><span class="n">URL</span> <span class="o">=</span> <span class="p">...;</span>

<span class="bp">UIActivityViewController</span> <span class="o">*</span><span class="n">activityViewController</span> <span class="o">=</span>
  <span class="p">[[</span><span class="bp">UIActivityViewController</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithActivityItems</span><span class="p">:</span><span class="l">@[</span><span class="n">string</span><span class="p">,</span> <span class="n">URL</span><span class="l">]</span>
                                    <span class="nl">applicationActivities</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
<span class="p">[</span><span class="n">navigationController</span> <span class="nl">presentViewController</span><span class="p">:</span><span class="n">activityViewController</span>
                                      <span class="nl">animated</span><span class="p">:</span><span class="nb">YES</span>
                                    <span class="nl">completion</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
  <span class="c1">// ...</span>
<span class="p">}];</span>
</code></pre></div>
<p>This would present the following at the bottom of the screen:</p>

<p><img src="http://nshipster.s3.amazonaws.com/uiactivityviewcontroller.png" alt="UIActivityViewController"></p>

<p>By default, <code>UIActivityViewController</code> will show all available services supporting the provided items, but certain activity types can be excluded:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">activityViewController</span><span class="p">.</span><span class="n">excludedActivityTypes</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIActivityTypePostToFacebook</span><span class="p">]</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">activityViewController</span><span class="p">.</span><span class="n">excludedActivityTypes</span> <span class="o">=</span> <span class="l">@[</span><span class="n">UIActivityTypePostToFacebook</span><span class="l">]</span><span class="p">;</span>
</code></pre></div>
<p>Activity types are divided up into &ldquo;action&rdquo; and &ldquo;share&rdquo; types:</p>

<h3 id="uiactivitycategoryaction">UIActivityCategoryAction</h3>

<ul>
<li><code>UIActivityTypePrint</code></li>
<li><code>UIActivityTypeCopyToPasteboard</code></li>
<li><code>UIActivityTypeAssignToContact</code></li>
<li><code>UIActivityTypeSaveToCameraRoll</code></li>
<li><code>UIActivityTypeAddToReadingList</code></li>
<li><code>UIActivityTypeAirDrop</code></li>
</ul>

<h3 id="uiactivitycategoryshare">UIActivityCategoryShare</h3>

<ul>
<li><code>UIActivityTypeMessage</code></li>
<li><code>UIActivityTypeMail</code></li>
<li><code>UIActivityTypePostToFacebook</code></li>
<li><code>UIActivityTypePostToTwitter</code></li>
<li><code>UIActivityTypePostToFlickr</code></li>
<li><code>UIActivityTypePostToVimeo</code></li>
<li><code>UIActivityTypePostToTencentWeibo</code></li>
<li><code>UIActivityTypePostToWeibo</code></li>
</ul>

<p>Each activity type supports a number of different data types. For example, a Tweet might be composed of an <code>NSString</code>, along with an attached image and/or URL.</p>

<h3 id="supported-data-types-by-activity-type">Supported Data Types by Activity Type</h3>

<table>
    <thead>
        <tr>
            <th>Activity Type</th>
            <th>String</th>
            <th>Attributed String</th>
            <th>URL</th>
            <th>Data</th>
            <th>Image</th>
            <th>Asset</th>
            <th>Other</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>Post To Facebook</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Twitter</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Weibo</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
        </tr>
        <tr>
            <td>Message</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓*</td>
            <td>✓*</td>
            <td></td>
            <td>✓*</td>
            <td><tt>sms://</tt> <tt>NSURL</tt></td>
        </tr>
        <tr>
            <td>Mail</td>
            <td>✓+</td>
            <td>✓+</td>
            <td>✓+</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Print</td>
            <td></td>
            <td></td>
            <td></td>
            <td>✓+</td>
            <td>✓+</td>
            <td></td>
            <td><tt>UIPrintPageRenderer</tt>, <tt>UIPrintFormatter</tt>, &amp; <tt>UIPrintInfo</tt></td>
        </tr>
        <tr>
            <td>Copy To Pasteboard</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td><tt>UIColor</tt>, <tt>NSDictionary</tt></td>
        </tr>
        <tr>
            <td>Assign To Contact</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Save To Camera Roll</td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Add To Reading List</td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Flickr</td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Vimeo</td>
            <td></td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td></td>
        </tr>
        <tr>
            <td>Post To Tencent Weibo</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
        </tr>
        <tr>
            <td>AirDrop</td>
            <td>✓</td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
            <td>✓</td>
            <td>✓</td>
            <td></td>
        </tr>
    </tbody>
</table>

<h2 id="&lt;uiactivityitemsource&gt;-&amp;-uiactivityitemprovider"><code>&lt;UIActivityItemSource&gt;</code> &amp; <code>UIActivityItemProvider</code></h2>

<p>Similar to how a <a href="https://developer.apple.com/library/mac/documentation/cocoa/reference/NSPasteboardItem_Class/Reference/Reference.html">pasteboard item</a> can be used to provide data only when necessary, in order to avoid excessive memory allocation or processing time, activity items can be of a custom type.</p>

<p>Any object conforming to <code>&lt;UIActivityItemSource&gt;</code>, including the built-in <code>UIActivityItemProvider</code> class, can be used to dynamically provide different kinds of data depending on the activity type.</p>

<h3 id="&lt;uiactivityitemsource&gt;"><code>&lt;UIActivityItemSource&gt;</code></h3>

<h4 id="getting-the-data-items">Getting the Data Items</h4>

<ul>
<li><code>activityViewControllerPlaceholderItem:</code></li>
<li><code>activityViewController:itemForActivityType:</code></li>
</ul>

<h4 id="providing-information-about-the-data-items">Providing Information About the Data Items</h4>

<ul>
<li><code>activityViewController:subjectForActivityType:</code></li>
<li><code>activityViewController:dataTypeIdentifierForActivityType:</code></li>
<li><code>activityViewController:thumbnailImageForActivityType:suggestedSize:</code></li>
</ul>

<p>One example of how this could be used is to customize a message, depending on whether it&rsquo;s to be shared on Facebook or Twitter.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="n">activityViewController</span><span class="p">(</span><span class="nl">activityViewController</span><span class="p">:</span> <span class="bp">UIActivityViewController</span><span class="p">,</span> <span class="n">itemForActivityType</span> <span class="nl">activityType</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">AnyObject</span><span class="o">?</span> <span class="p">{</span>
    <span class="k">if</span> <span class="n">activityType</span> <span class="o">==</span> <span class="n">UIActivityTypePostToFacebook</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&quot;Like this!&quot;</span><span class="p">,</span> <span class="nl">comment</span><span class="p">:</span> <span class="s">&quot;comment&quot;</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">activityType</span> <span class="o">==</span> <span class="n">UIActivityTypePostToTwitter</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&quot;Retweet this!&quot;</span><span class="p">,</span> <span class="nl">comment</span><span class="p">:</span> <span class="s">&quot;comment&quot;</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">nil</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">activityViewController:</span><span class="p">(</span><span class="bp">UIActivityViewController</span> <span class="o">*</span><span class="p">)</span><span class="nv">activityViewController</span>
         <span class="nf">itemForActivityType:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">activityType</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">([</span><span class="n">activityType</span> <span class="nl">isEqualToString</span><span class="p">:</span><span class="n">UIActivityTypePostToFacebook</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;Like this!&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">([</span><span class="n">activityType</span> <span class="nl">isEqualToString</span><span class="p">:</span><span class="n">UIActivityTypePostToTwitter</span><span class="p">])</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;Retweet this!&quot;</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="creating-a-custom-uiactivity">Creating a Custom UIActivity</h2>

<p>In addition to the aforementioned system-provided activities, its possible to create your own activity.</p>

<p>As an example, let&rsquo;s create a custom activity type that takes an image URL and applies a mustache to it using <a href="http://mustache.me">mustache.me</a>.</p>

<table>
    <tr>
        <td><img alt="Jony Ive Before" src="http://nshipster.s3.amazonaws.com/jony-ive-unstache.png"/></td>
        <td><img alt="Jony Ive After" src="http://nshipster.s3.amazonaws.com/jony-ive-mustache.png"/></td>
    </tr>
    <tr>
        <td>Before</td>
        <td>After</td>
    </tr>
</table>

<p>First, we define a <a href="http://en.wikipedia.org/wiki/Reverse_domain_name_notation">reverse-DNS identifier</a> for the activity type: </p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="n">HIPMustachifyActivityType</span> <span class="o">=</span> <span class="s">&quot;com.nshipster.activity.Mustachify&quot;</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">static</span> <span class="bp">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">HIPMustachifyActivityType</span> <span class="o">=</span> <span class="s">@&quot;com.nshipster.activity.Mustachify&quot;</span><span class="p">;</span>
</code></pre></div>
<p>Then specify the category as <code>UIActivityCategoryAction</code> and provide a localized title &amp; iOS version appropriate image:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// MARK: - UIActivity</span>

<span class="kr">override</span> <span class="k">class</span> <span class="k">func</span> <span class="nf">activityCategory</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">UIActivityCategory</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">.</span><span class="n">Action</span>
<span class="p">}</span>

<span class="kr">override</span> <span class="k">func</span> <span class="n">activityType</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">String</span><span class="o">?</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">HIPMustachifyActivityType</span>
<span class="p">}</span>

<span class="kr">override</span> <span class="k">func</span> <span class="n">activityTitle</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">String</span><span class="o">?</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">&quot;Mustachify&quot;</span><span class="p">,</span> <span class="nl">comment</span><span class="p">:</span> <span class="s">&quot;comment&quot;</span><span class="p">)</span>
<span class="p">}</span>

<span class="kr">override</span> <span class="k">func</span> <span class="n">activityImage</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">UIImage</span><span class="o">?</span> <span class="p">{</span>
    <span class="k">if</span> <span class="err">#</span><span class="n">available</span><span class="p">(</span><span class="n">iOS</span> <span class="mf">7.0</span><span class="p">,</span> <span class="o">*</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="bp">UIImage</span><span class="p">(</span><span class="nl">named</span><span class="p">:</span> <span class="s">&quot;MustachifyUIActivity7&quot;</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="bp">UIImage</span><span class="p">(</span><span class="nl">named</span><span class="p">:</span> <span class="s">&quot;MustachifyUIActivity&quot;</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="cp">#pragma mark - UIActivity</span>

<span class="p">+</span> <span class="p">(</span><span class="n">UIActivityCategory</span><span class="p">)</span><span class="nf">activityCategory</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">UIActivityCategoryAction</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">activityType</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">HIPMustachifyActivityType</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">activityTitle</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;Mustachify&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="bp">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nf">activityImage</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">NSFoundationVersionNumber</span> <span class="o">&gt;</span> <span class="n">NSFoundationVersionNumber_iOS_6_1</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">UIImage</span> <span class="nl">imageNamed</span><span class="p">:</span><span class="s">@&quot;MustachifyUIActivity7&quot;</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="p">[</span><span class="bp">UIImage</span> <span class="nl">imageNamed</span><span class="p">:</span><span class="s">@&quot;MustachifyUIActivity&quot;</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Next, we create a helper function, <code>HIPMatchingURLsInActivityItems</code>, which returns an array of any image URLs of the supported type.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="n">HIPMatchingURLsInActivityItems</span><span class="p">(</span><span class="nl">activityItems</span><span class="p">:</span> <span class="p">[</span><span class="n">AnyObject</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="p">[</span><span class="n">AnyObject</span><span class="p">]</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">activityItems</span><span class="p">.</span><span class="n">filter</span> <span class="p">{</span>
        <span class="k">if</span> <span class="k">let</span> <span class="n">url</span> <span class="o">=</span> <span class="err">$</span><span class="mi">0</span> <span class="kt">as</span><span class="o">?</span> <span class="bp">NSURL</span> <span class="k">where</span> <span class="o">!</span><span class="n">url</span><span class="p">.</span><span class="n">fileURL</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">url</span><span class="p">.</span><span class="n">pathExtension</span><span class="o">?</span><span class="p">.</span><span class="n">caseInsensitiveCompare</span><span class="p">(</span><span class="s">&quot;jpg&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">.</span><span class="n">OrderedSame</span>
                <span class="o">||</span> <span class="n">url</span><span class="p">.</span><span class="n">pathExtension</span><span class="o">?</span><span class="p">.</span><span class="n">caseInsensitiveCompare</span><span class="p">(</span><span class="s">&quot;png&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="p">.</span><span class="n">OrderedSame</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nb">false</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">static</span> <span class="bp">NSArray</span> <span class="o">*</span> <span class="nf">HIPMatchingURLsInActivityItems</span><span class="p">(</span><span class="bp">NSArray</span> <span class="o">*</span><span class="n">activityItems</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">activityItems</span> <span class="nl">filteredArrayUsingPredicate</span><span class="p">:[</span><span class="bp">NSPredicate</span> <span class="nl">predicateWithBlock</span><span class="p">:</span>
    <span class="o">^</span><span class="kt">BOOL</span><span class="p">(</span><span class="kt">id</span> <span class="n">item</span><span class="p">,</span> <span class="n">__unused</span> <span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">bindings</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">([</span><span class="n">item</span> <span class="nl">isKindOfClass</span><span class="p">:[</span><span class="bp">NSURL</span> <span class="k">class</span><span class="p">]]</span> <span class="o">&amp;&amp;</span>
            <span class="o">!</span><span class="p">[(</span><span class="bp">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="n">item</span> <span class="n">isFileURL</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">return</span> <span class="p">[[(</span><span class="bp">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="n">item</span> <span class="n">pathExtension</span><span class="p">]</span> <span class="nl">caseInsensitiveCompare</span><span class="p">:</span><span class="s">@&quot;jpg&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">NSOrderedSame</span> <span class="o">||</span>
            <span class="p">[[(</span><span class="bp">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="n">item</span> <span class="n">pathExtension</span><span class="p">]</span> <span class="nl">caseInsensitiveCompare</span><span class="p">:</span><span class="s">@&quot;png&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="n">NSOrderedSame</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="nb">NO</span><span class="p">;</span>
    <span class="p">}]];</span>
<span class="p">}</span>
</code></pre></div>
<p>This function is then used in <code>-canPerformWithActivityItems:</code> and <code>prepareWithActivityItems:</code> to get the mustachio&rsquo;d image URL of the first PNG or JPEG, if any.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="kr">override</span> <span class="k">func</span> <span class="nf">canPerformWithActivityItems</span><span class="p">(</span><span class="nl">activityItems</span><span class="p">:</span> <span class="p">[</span><span class="n">AnyObject</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">HIPMatchingURLsInActivityItems</span><span class="p">(</span><span class="n">activityItems</span><span class="p">).</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span>
<span class="p">}</span>

<span class="kr">override</span> <span class="k">func</span> <span class="n">prepareWithActivityItems</span><span class="p">(</span><span class="nl">activityItems</span><span class="p">:</span> <span class="p">[</span><span class="n">AnyObject</span><span class="p">])</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">HIPMustachifyMeURLFormatString</span> <span class="o">=</span> <span class="s">&quot;http://mustachify.me/%d?src=%@&quot;</span>

    <span class="k">if</span> <span class="k">let</span> <span class="n">firstMatch</span> <span class="o">=</span> <span class="n">HIPMatchingURLsInActivityItems</span><span class="p">(</span><span class="n">activityItems</span><span class="p">).</span><span class="n">first</span><span class="p">,</span> <span class="n">mustacheType</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">mustacheType</span> <span class="p">{</span>
        <span class="n">imageURL</span> <span class="o">=</span> <span class="bp">NSURL</span><span class="p">(</span><span class="nl">string</span><span class="p">:</span> <span class="n">String</span><span class="p">(</span><span class="nl">format</span><span class="p">:</span> <span class="n">HIPMustachifyMeURLFormatString</span><span class="p">,</span> <span class="p">[</span><span class="n">mustacheType</span><span class="p">,</span> <span class="n">firstMatch</span><span class="p">]))</span>
    <span class="p">}</span>

    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">canPerformWithActivityItems:</span><span class="p">(</span><span class="bp">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="nv">activityItems</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">HIPMatchingURLsInActivityItems</span><span class="p">(</span><span class="n">activityItems</span><span class="p">)</span> <span class="n">count</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">prepareWithActivityItems:</span><span class="p">(</span><span class="bp">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="nv">activityItems</span> <span class="p">{</span>
    <span class="k">static</span> <span class="bp">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">HIPMustachifyMeURLFormatString</span> <span class="o">=</span> <span class="s">@&quot;http://mustachify.me/%d?src=%@&quot;</span><span class="p">;</span>

    <span class="nb">self</span><span class="p">.</span><span class="n">imageURL</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="n">HIPMustachifyMeURLFormatString</span><span class="p">,</span> <span class="nb">self</span><span class="p">.</span><span class="n">mustacheType</span><span class="p">,</span> <span class="p">[</span><span class="n">HIPMatchingURLsInActivityItems</span><span class="p">(</span><span class="n">activityItems</span><span class="p">)</span> <span class="n">firstObject</span><span class="p">]]];</span>
<span class="p">}</span>
</code></pre></div>
<p>Our webservice provides a variety of mustache options, which are defined in an enumeration:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">enum</span> <span class="nl">HIPMustacheType</span><span class="p">:</span> <span class="n">Int</span> <span class="p">{</span>
    <span class="k">case</span> <span class="n">English</span><span class="p">,</span> <span class="n">Horseshoe</span><span class="p">,</span> <span class="n">Imperial</span><span class="p">,</span> <span class="n">Chevron</span><span class="p">,</span> <span class="n">Natural</span><span class="p">,</span> <span class="n">Handlebar</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">typedef</span> <span class="nf">NS_ENUM</span><span class="p">(</span><span class="bp">NSInteger</span><span class="p">,</span> <span class="n">HIPMustacheType</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">HIPMustacheTypeEnglish</span><span class="p">,</span>
    <span class="n">HIPMustacheTypeHorseshoe</span><span class="p">,</span>
    <span class="n">HIPMustacheTypeImperial</span><span class="p">,</span>
    <span class="n">HIPMustacheTypeChevron</span><span class="p">,</span>
    <span class="n">HIPMustacheTypeNatural</span><span class="p">,</span>
    <span class="n">HIPMustacheTypeHandlebar</span><span class="p">,</span>
<span class="p">};</span>
</code></pre></div>
<p>Finally, we provide a <code>UIViewController</code> to display the image. For this example, a simple <code>UIWebView</code> controller suffices.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">class</span> <span class="nl">HIPMustachifyWebViewController</span><span class="p">:</span> <span class="bp">UIViewController</span><span class="p">,</span> <span class="bp">UIWebViewDelegate</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nl">webView</span><span class="p">:</span> <span class="bp">UIWebView</span> <span class="p">{</span> <span class="kr">get</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">@interface</span> <span class="nc">HIPMustachifyWebViewController</span> : <span class="bp">UIViewController</span> <span class="o">&lt;</span><span class="bp">UIWebViewDelegate</span><span class="o">&gt;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">readonly</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="bp">UIWebView</span> <span class="o">*</span><span class="n">webView</span><span class="p">;</span>
<span class="k">@end</span>
</code></pre></div><div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="n">activityViewController</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="bp">UIViewController</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">webViewController</span> <span class="o">=</span> <span class="n">HIPMustachifyWebViewController</span><span class="p">()</span>

    <span class="k">let</span> <span class="n">request</span> <span class="o">=</span> <span class="bp">NSURLRequest</span><span class="p">(</span><span class="nl">URL</span><span class="p">:</span> <span class="n">imageURL</span><span class="p">)</span>
    <span class="n">webViewController</span><span class="p">.</span><span class="n">webView</span><span class="p">.</span><span class="n">loadRequest</span><span class="p">(</span><span class="n">request</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">webViewController</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">-</span> <span class="p">(</span><span class="bp">UIViewController</span> <span class="o">*</span><span class="p">)</span><span class="nf">activityViewController</span> <span class="p">{</span>
    <span class="n">HIPMustachifyWebViewController</span> <span class="o">*</span><span class="n">webViewController</span> <span class="o">=</span> <span class="p">[[</span><span class="n">HIPMustachifyWebViewController</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>

    <span class="bp">NSURLRequest</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURLRequest</span> <span class="nl">requestWithURL</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">imageURL</span><span class="p">];</span>
    <span class="p">[</span><span class="n">webViewController</span><span class="p">.</span><span class="n">webView</span> <span class="nl">loadRequest</span><span class="p">:</span><span class="n">request</span><span class="p">];</span>

    <span class="k">return</span> <span class="n">webViewController</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>To use our brand new mustache activity, we simply pass it in the <code>UIActivityViewController initializer</code>:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="n">mustacheActivity</span> <span class="o">=</span> <span class="n">HIPMustachifyActivity</span><span class="p">()</span>
<span class="k">let</span> <span class="n">activityViewController</span> <span class="o">=</span> <span class="bp">UIActivityViewController</span><span class="p">(</span><span class="nl">activityItems</span><span class="p">:</span> <span class="p">[</span><span class="n">imageURL</span><span class="p">],</span> <span class="nl">applicationActivities</span><span class="p">:</span> <span class="p">[</span><span class="n">mustacheActivity</span><span class="p">])</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">HIPMustachifyActivity</span> <span class="o">*</span><span class="n">mustacheActivity</span> <span class="o">=</span> <span class="p">[[</span><span class="n">HIPMustachifyActivity</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="bp">UIActivityViewController</span> <span class="o">*</span><span class="n">activityViewController</span> <span class="o">=</span>
  <span class="p">[[</span><span class="bp">UIActivityViewController</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithActivityItems</span><span class="p">:</span><span class="l">@[</span><span class="n">imageURL</span><span class="l">]</span>
                                    <span class="nl">applicationActivities</span><span class="p">:</span><span class="l">@[</span><span class="n">mustacheActivity</span><span class="l">]</span><span class="p">];</span>
</code></pre></div>
<h2 id="invoking-actions-manually">Invoking Actions Manually</h2>

<p>Now is a good time to be reminded that while <code>UIActivityViewController</code> allows users to perform actions of their choosing, sharing can still be invoked manually, when the occasion arises.</p>

<p>So for completeness, here&rsquo;s how one might go about performing some of these actions manually:</p>

<h3 id="open-url">Open URL</h3>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">if</span> <span class="k">let</span> <span class="n">URL</span> <span class="o">=</span> <span class="bp">NSURL</span><span class="p">(</span><span class="nl">string</span><span class="p">:</span> <span class="s">&quot;http://nshipster.com&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">UIApplication</span><span class="p">.</span><span class="n">sharedApplication</span><span class="p">().</span><span class="n">openURL</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSURL</span> <span class="o">*</span><span class="n">URL</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:</span><span class="s">@&quot;http://nshipster.com&quot;</span><span class="p">];</span>
<span class="p">[[</span><span class="bp">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="nl">openURL</span><span class="p">:</span><span class="n">URL</span><span class="p">];</span>
</code></pre></div>
<p>System-supported URL schemes include: <code>mailto:</code>, <code>tel:</code>, <code>sms:</code>, and <code>maps:</code>.</p>

<h3 id="add-to-safari-reading-list">Add to Safari Reading List</h3>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">import</span> <span class="n">SafariServices</span>

<span class="k">if</span> <span class="k">let</span> <span class="n">URL</span> <span class="o">=</span> <span class="bp">NSURL</span><span class="p">(</span><span class="nl">string</span><span class="p">:</span> <span class="s">&quot;http://nshipster.com/uiactivityviewcontroller&quot;</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">_</span> <span class="o">=</span> <span class="n">try</span><span class="o">?</span> <span class="bp">SSReadingList</span><span class="p">.</span><span class="n">defaultReadingList</span><span class="p">()</span><span class="o">?</span><span class="p">.</span><span class="n">addReadingListItemWithURL</span><span class="p">(</span><span class="n">URL</span><span class="p">,</span>
        <span class="nl">title</span><span class="p">:</span> <span class="s">&quot;NSHipster&quot;</span><span class="p">,</span>
        <span class="nl">previewText</span><span class="p">:</span> <span class="s">&quot;...&quot;</span>
    <span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">@</span><span class="n">import</span> <span class="n">SafariServices</span><span class="p">;</span>

<span class="bp">NSURL</span> <span class="o">*</span><span class="n">URL</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:</span><span class="s">@&quot;http://nshipster.com/uiactivityviewcontroller&quot;</span><span class="p">];</span>
<span class="p">[[</span><span class="bp">SSReadingList</span> <span class="n">defaultReadingList</span><span class="p">]</span> <span class="nl">addReadingListItemWithURL</span><span class="p">:</span><span class="n">URL</span>
                                                        <span class="nl">title</span><span class="p">:</span><span class="s">@&quot;NSHipster&quot;</span>
                                                  <span class="nl">previewText</span><span class="p">:</span><span class="s">@&quot;...&quot;</span>
                                                        <span class="nl">error</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
</code></pre></div>
<h3 id="add-to-saved-photos">Add to Saved Photos</h3>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nl">image</span><span class="p">:</span> <span class="bp">UIImage</span> <span class="o">=</span> <span class="p">...</span>
<span class="k">let</span> <span class="nl">completionTarget</span><span class="p">:</span> <span class="n">AnyObject</span> <span class="o">=</span> <span class="nb">self</span>
<span class="k">let</span> <span class="nl">completionSelector</span><span class="p">:</span> <span class="n">Selector</span> <span class="o">=</span> <span class="s">&quot;didWriteToSavedPhotosAlbum&quot;</span>
<span class="k">let</span> <span class="nl">contextInfo</span><span class="p">:</span> <span class="n">UnsafeMutablePointer</span><span class="o">&lt;</span><span class="n">Void</span><span class="o">&gt;</span> <span class="o">=</span> <span class="nb">nil</span>

<span class="n">UIImageWriteToSavedPhotosAlbum</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">completionTarget</span><span class="p">,</span> <span class="n">completionSelector</span><span class="p">,</span> <span class="n">contextInfo</span><span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">UIImage</span> <span class="o">*</span><span class="n">image</span> <span class="o">=</span> <span class="p">...;</span>
<span class="kt">id</span> <span class="n">completionTarget</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
<span class="kt">SEL</span> <span class="n">completionSelector</span> <span class="o">=</span> <span class="k">@selector</span><span class="p">(</span><span class="n">didWriteToSavedPhotosAlbum</span><span class="p">);</span>
<span class="kt">void</span> <span class="o">*</span><span class="n">contextInfo</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="n">UIImageWriteToSavedPhotosAlbum</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">completionTarget</span><span class="p">,</span> <span class="n">completionSelector</span><span class="p">,</span> <span class="n">contextInfo</span><span class="p">);</span>
</code></pre></div>
<h3 id="send-sms">Send SMS</h3>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">import</span> <span class="n">MessageUI</span>

<span class="k">let</span> <span class="n">messageComposeViewController</span> <span class="o">=</span> <span class="bp">MFMessageComposeViewController</span><span class="p">()</span>
<span class="n">messageComposeViewController</span><span class="p">.</span><span class="n">messageComposeDelegate</span> <span class="o">=</span> <span class="nb">self</span>
<span class="n">messageComposeViewController</span><span class="p">.</span><span class="n">recipients</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;mattt@nshipster•com&quot;</span><span class="p">]</span>
<span class="n">messageComposeViewController</span><span class="p">.</span><span class="n">body</span> <span class="o">=</span> <span class="s">&quot;Lorem ipsum dolor sit amet&quot;</span>
<span class="n">navigationController</span><span class="o">?</span><span class="p">.</span><span class="n">presentViewController</span><span class="p">(</span><span class="n">messageComposeViewController</span><span class="p">,</span> <span class="nl">animated</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">@</span><span class="n">import</span> <span class="n">MessageUI</span><span class="p">;</span>

<span class="bp">MFMessageComposeViewController</span> <span class="o">*</span><span class="n">messageComposeViewController</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">MFMessageComposeViewController</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="n">messageComposeViewController</span><span class="p">.</span><span class="n">messageComposeDelegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
<span class="n">messageComposeViewController</span><span class="p">.</span><span class="n">recipients</span> <span class="o">=</span> <span class="l">@[</span><span class="s">@&quot;mattt@nshipster•com&quot;</span><span class="l">]</span><span class="p">;</span>
<span class="n">messageComposeViewController</span><span class="p">.</span><span class="n">body</span> <span class="o">=</span> <span class="s">@&quot;Lorem ipsum dolor sit amet&quot;</span><span class="p">;</span>
<span class="p">[</span><span class="n">navigationController</span> <span class="nl">presentViewController</span><span class="p">:</span><span class="n">messageComposeViewController</span> <span class="nl">animated</span><span class="p">:</span><span class="nb">YES</span> <span class="nl">completion</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}];</span>
</code></pre></div>
<h3 id="send-email">Send Email</h3>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">import</span> <span class="n">MessageUI</span>

<span class="k">let</span> <span class="n">mailComposeViewController</span> <span class="o">=</span> <span class="bp">MFMailComposeViewController</span><span class="p">()</span>
<span class="n">mailComposeViewController</span><span class="p">.</span><span class="n">mailComposeDelegate</span> <span class="o">=</span> <span class="nb">self</span>
<span class="n">mailComposeViewController</span><span class="p">.</span><span class="n">setToRecipients</span><span class="p">([</span><span class="s">&quot;mattt@nshipster•com&quot;</span><span class="p">])</span>
<span class="n">mailComposeViewController</span><span class="p">.</span><span class="n">setSubject</span><span class="p">(</span><span class="s">&quot;Hello&quot;</span><span class="p">)</span>
<span class="n">mailComposeViewController</span><span class="p">.</span><span class="n">setMessageBody</span><span class="p">(</span><span class="s">&quot;Lorem ipsum dolor sit amet&quot;</span><span class="p">,</span> <span class="nl">isHTML</span><span class="p">:</span> <span class="nb">false</span><span class="p">)</span>
<span class="n">navigationController</span><span class="o">?</span><span class="p">.</span><span class="n">presentViewController</span><span class="p">(</span><span class="n">mailComposeViewController</span><span class="p">,</span> <span class="nl">animated</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">@</span><span class="n">import</span> <span class="n">MessageUI</span><span class="p">;</span>

<span class="bp">MFMailComposeViewController</span> <span class="o">*</span><span class="n">mailComposeViewController</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">MFMailComposeViewController</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="n">mailComposeViewController</span><span class="p">.</span><span class="n">mailComposeDelegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
<span class="p">[</span><span class="n">mailComposeViewController</span> <span class="nl">setToRecipients</span><span class="p">:</span><span class="l">@[</span><span class="s">@&quot;mattt@nshipster•com&quot;</span><span class="l">]</span><span class="p">];</span>
<span class="p">[</span><span class="n">mailComposeViewController</span> <span class="nl">setSubject</span><span class="p">:</span><span class="s">@&quot;Hello&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="n">mailComposeViewController</span> <span class="nl">setMessageBody</span><span class="p">:</span><span class="s">@&quot;Lorem ipsum dolor sit amet&quot;</span>
                                   <span class="nl">isHTML</span><span class="p">:</span><span class="nb">NO</span><span class="p">];</span>
<span class="p">[</span><span class="n">navigationController</span> <span class="nl">presentViewController</span><span class="p">:</span><span class="n">mailComposeViewController</span> <span class="nl">animated</span><span class="p">:</span><span class="nb">YES</span> <span class="nl">completion</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}];</span>
</code></pre></div>
<h3 id="post-tweet">Post Tweet</h3>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">import</span> <span class="n">Social</span>

<span class="k">let</span> <span class="n">tweetComposeViewController</span> <span class="o">=</span> <span class="bp">SLComposeViewController</span><span class="p">(</span><span class="nl">forServiceType</span><span class="p">:</span> <span class="n">SLServiceTypeTwitter</span><span class="p">)</span>
<span class="n">tweetComposeViewController</span><span class="p">.</span><span class="n">setInitialText</span><span class="p">(</span><span class="s">&quot;Lorem ipsum dolor sit amet.&quot;</span><span class="p">)</span>
<span class="n">navigationController</span><span class="o">?</span><span class="p">.</span><span class="n">presentViewController</span><span class="p">(</span><span class="n">tweetComposeViewController</span><span class="p">,</span> <span class="nl">animated</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">@</span><span class="n">import</span> <span class="n">Social</span><span class="p">;</span>

<span class="bp">SLComposeViewController</span> <span class="o">*</span><span class="n">tweetComposeViewController</span> <span class="o">=</span> <span class="p">[</span><span class="bp">SLComposeViewController</span> <span class="nl">composeViewControllerForServiceType</span><span class="p">:</span><span class="n">SLServiceTypeTwitter</span><span class="p">];</span>
<span class="p">[</span><span class="n">tweetComposeViewController</span> <span class="nl">setInitialText</span><span class="p">:</span><span class="s">@&quot;Lorem ipsum dolor sit amet.&quot;</span><span class="p">];</span>
<span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">navigationController</span> <span class="nl">presentViewController</span><span class="p">:</span><span class="n">tweetComposeViewController</span>
                                        <span class="nl">animated</span><span class="p">:</span><span class="nb">YES</span>
                                      <span class="nl">completion</span><span class="p">:</span><span class="o">^</span><span class="p">{</span>
                                          <span class="c1">// ...</span>
                                      <span class="p">}];</span>
</code></pre></div>
<h2 id="intentkit">IntentKit</h2>

<p>While all of this is impressive and useful, there is a particular lacking in the activities paradigm in iOS, when compared to the rich <a href="http://developer.android.com/guide/components/intents-filters.html">Intents Model</a> found on Android.</p>

<p>On Android, apps can register for different intents, to indicate that they can be used for Maps, or as a Browser, and be selected as the default app for related activities, like getting directions, or bookmarking a URL.</p>

<p>While iOS lacks the extensible infrastructure to support this, a 3rd-party library called <a href="https://github.com/intentkit/IntentKit">IntentKit</a>, by <a href="https://github.com/lazerwalker">@lazerwalker</a> (of <a href="http://goshdarnblocksyntax.com">f*ingblocksyntax.com</a> fame), is an interesting example of how we might narrow the gap ourselves.</p>

<p><img src="https://raw.github.com/intentkit/IntentKit/master/example.gif" alt="IntentKit"></p>

<p>Normally, a developer would have to do a lot of work to first, determine whether a particular app is installed, and how to construct a URL to support a particular activity.</p>

<p>IntentKit consolidates the logic of connecting to the most popular Web, Maps, Mail, Twitter, Facebook, and Google+ clients, in a UI similar to <code>UIActivityViewController</code>.</p>

<p>Anyone looking to take their sharing experience to the next level should definitely give this a look.</p>

<hr>

<p>There is a strong argument to be made that the longterm viability of iOS as a platform depends on sharing mechanisms like <code>UIActivityViewController</code>. As the saying goes, &ldquo;Information wants to be free&rdquo;. And anything that stands in the way of federation will ultimately lose to something that does not.</p>

<p>The future prospects of public <a href="http://oleb.net/blog/2012/10/remote-view-controllers-in-ios-6/">remote view controller</a> APIs gives me hope for the future of sharing on iOS. For now, though, we could certainly do much worse than <code>UIActivityViewController</code>.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2014-04-21-uiactivityviewcontroller.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
        
            <em>This article uses Swift version 2.0 and was last reviewed on September 7, 2015.</em>
        
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/mkgeodesicpolyline/" title="MKGeodesicPolyline" rel="next">MKGeodesic​Polyline</a>
            </h1>

            <p>We knew that the Earth was not flat long before 1492. Early navigators observed the way ships would dip out of view over the horizon many centuries before the Age of Discovery. For many iOS developers, though, a flat MKMapView was a necessary conceit until recently.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/mkgeodesicpolyline/" title="MKGeodesicPolyline">MKGeodesicPolyline</a>
            </li>
            
          
          
            <li>
              <a href="/launch-options/" title="UIApplicationDelegate launchOptions">UIApplicationDelegate launchOptions</a>
            </li>
            
          
          
            <li>
              <a href="/uialertcontroller/" title="UIAlertController">UIAlertController</a>
            </li>
            
          
          
            <li>
              <a href="/nscoding/" title="NSCoding / NSKeyedArchiver">NSCoding / NSKeyedArchiver</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
