<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>Swift Comparison Protocols - NSHipster</title>
    <meta name="description" content="Objective-C required us to wax philosophic about the nature of equality and identity. To the relief of any developer less inclined towards handwavy treatises, this is not as much the case for Swift."/>
    <link rel="canonical" href="http://nshipster.com/swift-comparison-protocols/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="Swift Comparison Protocols"/>
    <meta name="twitter:description" content="Objective-C required us to wax philosophic about the nature of equality and identity. To the relief of any developer less inclined towards handwavy treatises, this is not as much the case for Swift."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Swift Comparison Protocols"/>
    <meta property="og:url" content="http://nshipster.com/swift-comparison-protocols/"/>
    <meta property="og:description" content="Objective-C required us to wax philosophic about the nature of equality and identity. To the relief of any developer less inclined towards handwavy treatises, this is not as much the case for Swift."/>
    <meta property="article:published_time" content="2014-09-22T00:00:00-07:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:34:50-08:00"/>
    <meta property="article:tag" content="swift"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="Swift Comparison Protocols"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/swift-comparison-protocols/">Swift Comparison Protocols</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2014-09-22T00:00:00-07:00" itemprop="datePublished">September 22<sup>nd</sup>, 2014</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>Objective-C required us to <a href="http://nshipster.com/equality/">wax philosophic</a> about the nature of equality and identity. To the relief of any developer less inclined towards handwavy treatises, this is not as much the case for Swift.</p>

<p>In Swift, <code>Equatable</code> is a fundamental type, from which <code>Comparable</code> and <code>Hashable</code> are both derived. Together, these protocols form the central point of comparison throughout the language.</p>

<hr>

<h2 id="equatable">Equatable</h2>

<p>Values of the <code>Equatable</code> type can be evaluated for equality and inequality. Declaring a type as equatable bestows several useful abilities, notably the ability values of that type to be found in a containing <code>Array</code>.</p>

<p>For a type to be <code>Equatable</code>, there must exist an implementation of the <code>==</code> operator function, which accepts a matching type:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="o">==</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="kt">Self</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="kt">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span>
</code></pre></div>
<p>For value types, equality is determined by evaluating the equality of each component property. As an example, consider a <code>Complex</code> type, which takes a generic type <code>T</code>, which conforms to <code>SignedNumberType</code>:</p>

<blockquote>
<p><code>SignedNumberType</code> is a convenient choice for a generic number type, as it inherits from both <code>Comparable</code> (and thus <code>Equatable</code>, as described in the section) and <code>IntegerLiteralConvertible</code>, which <code>Int</code>, <code>Double</code>, and <code>Float</code> all conform to.</p>
</blockquote>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">struct</span> <span class="n">Complex</span><span class="o">&lt;</span><span class="nl">T</span><span class="p">:</span> <span class="n">SignedNumberType</span><span class="o">&gt;</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nl">real</span><span class="p">:</span> <span class="n">T</span>
    <span class="k">let</span> <span class="nl">imaginary</span><span class="p">:</span> <span class="n">T</span>
<span class="p">}</span>
</code></pre></div>
<p>Since a <a href="http://en.wikipedia.org/wiki/Complex_number">complex number</a> is comprised of a real and imaginary component, two complex numbers are equal if and only if their respective real and imaginary components are equal:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">extension</span> <span class="nl">Complex</span><span class="p">:</span> <span class="n">Equatable</span> <span class="p">{}</span>

<span class="c1">// MARK: Equatable</span>

<span class="k">func</span> <span class="o">==&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="n">Complex</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="n">Complex</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="n">real</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="n">real</span> <span class="o">&amp;&amp;</span> <span class="n">lhs</span><span class="p">.</span><span class="n">imaginary</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="n">imaginary</span>
<span class="p">}</span>
</code></pre></div>
<p>The result:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="n">a</span> <span class="o">=</span> <span class="n">Complex</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span><span class="p">(</span><span class="nl">real</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="nl">imaginary</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">)</span>
<span class="k">let</span> <span class="n">b</span> <span class="o">=</span> <span class="n">Complex</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span><span class="p">(</span><span class="nl">real</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="nl">imaginary</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">)</span>

<span class="n">a</span> <span class="o">==</span> <span class="n">b</span> <span class="c1">// true</span>
<span class="n">a</span> <span class="o">!=</span> <span class="n">b</span> <span class="c1">// false</span>
</code></pre></div>
<blockquote>
<p>As described in <a href="http://nshipster.com/swift-default-protocol-implementations/">the article about Swift Default Protocol Implementations</a>, an implementation of <code>!=</code> is automatically derived from the provided <code>==</code> operator by the standard library.</p>
</blockquote>

<p>For reference types, the equality becomes conflated with identity. It makes sense that two <code>Name</code> structs with the same values would be equal, but two <code>Person</code> objects can have the same name, but be different people.</p>

<p>For Objective-C-compatible object types, the <code>==</code> operator is already provided from the <code>isEqual:</code> method:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">class</span> <span class="nl">ObjCObject</span><span class="p">:</span> <span class="bp">NSObject</span> <span class="p">{}</span>

<span class="n">ObjCObject</span><span class="p">()</span> <span class="o">==</span> <span class="n">ObjCObject</span><span class="p">()</span> <span class="c1">// false</span>
</code></pre></div>
<p>For Swift reference types, equality can be evaluated as an identity check on an <code>ObjectIdentifier</code> constructed with an instance of that type:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">class</span> <span class="nl">Object</span><span class="p">:</span> <span class="n">Equatable</span> <span class="p">{}</span>

<span class="c1">// MARK: Equatable</span>

<span class="k">func</span> <span class="o">==</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="n">Object</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="n">Object</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">ObjectIdentifier</span><span class="p">(</span><span class="n">lhs</span><span class="p">)</span> <span class="o">==</span> <span class="n">ObjectIdentifier</span><span class="p">(</span><span class="n">rhs</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">Object</span><span class="p">()</span> <span class="o">==</span> <span class="n">Object</span><span class="p">()</span> <span class="c1">// false</span>
</code></pre></div>
<h2 id="comparable">Comparable</h2>

<p>Building on <code>Equatable</code>, the <code>Comparable</code> protocol allows for more specific inequality, distinguishing cases where the left hand value is greater than or less than the right hand value.</p>

<p>Types conforming to the <code>Comparable</code> protocol provide the following operators:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="o">&lt;=</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="kt">Self</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="kt">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span>
<span class="k">func</span> <span class="o">&gt;</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="kt">Self</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="kt">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span>
<span class="k">func</span> <span class="o">&gt;=</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="kt">Self</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="kt">Self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span>
</code></pre></div>
<p>What&rsquo;s interesting about this list, however, is not so much what is <em>included</em>, but rather what&rsquo;s <em>missing</em>.</p>

<p>The first and perhaps most noticeable omission is <code>==</code>, since <code>&gt;=</code> is a logical disjunction of <code>&gt;</code> and <code>==</code> comparisons. As a way of reconciling this, <code>Comparable</code> inherits from <code>Equatable</code>, which provides <code>==</code>.</p>

<p>The second omission is a bit more subtle, and is actually the key to understanding what&rsquo;s going on here: <code>&lt;</code>. What happened to the &ldquo;less than&rdquo; operator? It&rsquo;s defined by the <code>_Comparable</code> protocol. Why is this significant? As described in <a href="http://nshipster.com/swift-default-protocol-implementations/">the article about Swift Default Protocol Implementations</a>, the Swift Standard Library provides a default implementation of the <code>Comparable</code> protocol based entirely on the existential type <code>_Comparable</code>. This is actually <em>really</em> clever. Since the implementations of all of the comparison functions can be derived from just <code>&lt;</code> and <code>==</code>, all of that functionality is made available automatically through type inference.</p>

<blockquote>
<p>Contrast this with, for example, how Ruby derives equality and comparison operators from a single operator, <code>&lt;=&gt;</code> (a.k.a the &ldquo;UFO operator&rdquo;). <a href="https://gist.github.com/mattt/7e4db72ce1b6c8a18bb4">Here&rsquo;s how this could be implemented in Swift</a>.</p>
</blockquote>

<p>As a more complex example, consider a <code>CSSSelector</code> struct, which implements <a href="http://www.w3.org/TR/CSS2/cascade.html#cascading-order">cascade ordering</a> of selectors:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">import</span> <span class="n">Foundation</span>

<span class="k">struct</span> <span class="n">CSSSelector</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nl">selector</span><span class="p">:</span> <span class="n">String</span>

    <span class="k">struct</span> <span class="n">Specificity</span> <span class="p">{</span>
        <span class="k">let</span> <span class="kt">id</span><span class="o">:</span> <span class="n">Int</span>
        <span class="k">let</span> <span class="err">`</span><span class="k">class</span><span class="err">`</span><span class="o">:</span> <span class="n">Int</span>
        <span class="k">let</span> <span class="nl">element</span><span class="p">:</span> <span class="n">Int</span>

        <span class="k">init</span><span class="p">(</span><span class="n">_</span> <span class="nl">components</span><span class="p">:</span> <span class="p">[</span><span class="n">String</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">var</span> <span class="p">(</span><span class="kt">id</span><span class="p">,</span> <span class="err">`</span><span class="k">class</span><span class="err">`</span><span class="p">,</span> <span class="n">element</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">token</span> <span class="k">in</span> <span class="n">components</span> <span class="p">{</span>
                <span class="k">if</span> <span class="n">token</span><span class="p">.</span><span class="n">hasPrefix</span><span class="p">(</span><span class="s">&quot;#&quot;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="kt">id</span><span class="o">++</span>
                <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="n">token</span><span class="p">.</span><span class="n">hasPrefix</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">)</span> <span class="p">{</span>
                    <span class="err">`</span><span class="k">class</span><span class="err">`</span><span class="o">++</span>
                <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                    <span class="n">element</span><span class="o">++</span>
                <span class="p">}</span>
            <span class="p">}</span>

            <span class="nb">self</span><span class="p">.</span><span class="kt">id</span> <span class="o">=</span> <span class="kt">id</span>
            <span class="nb">self</span><span class="p">.</span><span class="err">`</span><span class="k">class</span><span class="err">`</span> <span class="o">=</span> <span class="err">`</span><span class="k">class</span><span class="err">`</span>
            <span class="nb">self</span><span class="p">.</span><span class="n">element</span> <span class="o">=</span> <span class="n">element</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nl">specificity</span><span class="p">:</span> <span class="n">Specificity</span>

    <span class="k">init</span><span class="p">(</span><span class="n">_</span> <span class="nl">string</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="nb">self</span><span class="p">.</span><span class="n">selector</span> <span class="o">=</span> <span class="n">string</span>

        <span class="c1">// Naïve tokenization, ignoring operators, pseudo-selectors, and `style=`.</span>
        <span class="k">let</span> <span class="nl">components</span><span class="p">:</span> <span class="p">[</span><span class="n">String</span><span class="p">]</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">selector</span><span class="p">.</span><span class="n">componentsSeparatedByCharactersInSet</span><span class="p">(</span><span class="bp">NSCharacterSet</span><span class="p">.</span><span class="n">whitespaceCharacterSet</span><span class="p">())</span>
        <span class="nb">self</span><span class="p">.</span><span class="n">specificity</span> <span class="o">=</span> <span class="n">Specificity</span><span class="p">(</span><span class="n">components</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Where as CSS selectors are evaluated by specificity rank and order, two selectors are only really equal if they resolve to the same elements:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">extension</span> <span class="nl">CSSSelector</span><span class="p">:</span> <span class="n">Equatable</span> <span class="p">{}</span>

<span class="c1">// MARK: Equatable</span>

<span class="k">func</span> <span class="o">==</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="n">CSSSelector</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="n">CSSSelector</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="c1">// Naïve equality that uses string comparison rather than resolving equivalent selectors</span>
    <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="n">selector</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="n">selector</span>
<span class="p">}</span>
</code></pre></div>
<p>Instead, selectors are actually compared in terms of their specificity:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">extension</span> <span class="n">CSSSelector</span><span class="p">.</span><span class="nl">Specificity</span><span class="p">:</span> <span class="n">Comparable</span> <span class="p">{}</span>

<span class="c1">// MARK: Comparable</span>

<span class="k">func</span> <span class="o">&lt;</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="n">CSSSelector</span><span class="p">.</span><span class="n">Specificity</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="n">CSSSelector</span><span class="p">.</span><span class="n">Specificity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="kt">id</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="p">.</span><span class="kt">id</span> <span class="o">||</span>
        <span class="n">lhs</span><span class="p">.</span><span class="err">`</span><span class="k">class</span><span class="err">`</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="p">.</span><span class="err">`</span><span class="k">class</span><span class="err">`</span> <span class="o">||</span>
        <span class="n">lhs</span><span class="p">.</span><span class="n">element</span> <span class="o">&lt;</span> <span class="n">rhs</span><span class="p">.</span><span class="n">element</span>
<span class="p">}</span>

<span class="c1">// MARK: Equatable</span>

<span class="k">func</span> <span class="o">==</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="n">CSSSelector</span><span class="p">.</span><span class="n">Specificity</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="n">CSSSelector</span><span class="p">.</span><span class="n">Specificity</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="kt">id</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="kt">id</span> <span class="o">&amp;&amp;</span>
           <span class="n">lhs</span><span class="p">.</span><span class="err">`</span><span class="k">class</span><span class="err">`</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="err">`</span><span class="k">class</span><span class="err">`</span> <span class="o">&amp;&amp;</span>
           <span class="n">lhs</span><span class="p">.</span><span class="n">element</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="n">element</span>
<span class="p">}</span>
</code></pre></div>
<p>Bringing everything together:</p>

<blockquote>
<p>For clarity, assume <code>CSSSelector</code> <a href="http://nshipster.com/swift-literal-convertible/">conforms to <code>StringLiteralConvertible</code></a>.</p>
</blockquote>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nl">a</span><span class="p">:</span> <span class="n">CSSSelector</span> <span class="o">=</span> <span class="s">&quot;#logo&quot;</span>
<span class="k">let</span> <span class="nl">b</span><span class="p">:</span> <span class="n">CSSSelector</span> <span class="o">=</span> <span class="s">&quot;html body #logo&quot;</span>
<span class="k">let</span> <span class="nl">c</span><span class="p">:</span> <span class="n">CSSSelector</span> <span class="o">=</span> <span class="s">&quot;body div #logo&quot;</span>
<span class="k">let</span> <span class="nl">d</span><span class="p">:</span> <span class="n">CSSSelector</span> <span class="o">=</span> <span class="s">&quot;.container #logo&quot;</span>

<span class="n">b</span> <span class="o">==</span> <span class="n">c</span> <span class="c1">// false</span>
<span class="n">b</span><span class="p">.</span><span class="n">specificity</span> <span class="o">==</span> <span class="n">c</span><span class="p">.</span><span class="n">specificity</span> <span class="c1">// true</span>
<span class="n">c</span><span class="p">.</span><span class="n">specificity</span> <span class="o">&lt;</span> <span class="n">a</span><span class="p">.</span><span class="n">specificity</span> <span class="c1">// false</span>
<span class="n">d</span><span class="p">.</span><span class="n">specificity</span> <span class="o">&gt;</span> <span class="n">c</span><span class="p">.</span><span class="n">specificity</span> <span class="c1">// true</span>
</code></pre></div>
<h2 id="hashable">Hashable</h2>

<p>Another important protocol derived from <code>Equatable</code> is <code>Hashable</code>.</p>

<p>Only <code>Hashable</code> types can be stored as the key of a Swift <code>Dictionary</code>:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">struct</span> <span class="n">Dictionary</span><span class="o">&lt;</span><span class="nl">Key</span> <span class="p">:</span> <span class="n">Hashable</span><span class="p">,</span> <span class="n">Value</span><span class="o">&gt;</span> <span class="o">:</span> <span class="n">CollectionType</span><span class="p">,</span> <span class="n">DictionaryLiteralConvertible</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</code></pre></div>
<p>For a type to conform to <code>Hashable</code>, it must provide a getter for the <code>hashValue</code> property.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">protocol</span> <span class="nl">Hashable</span> <span class="p">:</span> <span class="n">Equatable</span> <span class="p">{</span>
    <span class="c1">/// Returns the hash value.  The hash value is not guaranteed to be stable</span>
    <span class="c1">/// across different invocations of the same program.  Do not persist the hash</span>
    <span class="c1">/// value across program runs.</span>
    <span class="c1">///</span>
    <span class="c1">/// The value of `hashValue` property must be consistent with the equality</span>
    <span class="c1">/// comparison: if two values compare equal, they must have equal hash</span>
    <span class="c1">/// values.</span>
    <span class="k">var</span> <span class="nl">hashValue</span><span class="p">:</span> <span class="n">Int</span> <span class="p">{</span> <span class="kr">get</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Determining the <a href="http://en.wikipedia.org/wiki/Perfect_hash_function">optimal hashing value</a> is way outside the scope of this article. Fortunately, most values can derive an adequate hash value from an <code>XOR</code> of the hash values of its component properties.</p>

<p>The following built-in Swift types implement <code>hashValue</code>:</p>

<ul>
<li><code>Double</code></li>
<li><code>Float</code>, <code>Float80</code></li>
<li><code>Int</code>, <code>Int8</code>, <code>Int16</code>, <code>Int32</code>, <code>Int64</code></li>
<li><code>UInt</code>, <code>UInt8</code>, <code>UInt16</code>, <code>UInt32</code>, <code>UInt64</code></li>
<li><code>String</code></li>
<li><code>UnicodeScalar</code></li>
<li><code>ObjectIdentifier</code></li>
</ul>

<p>Based on this, here&rsquo;s how a struct representing <a href="http://en.wikipedia.org/wiki/Binomial_nomenclature">Binomial Nomenclature in Biological Taxonomy</a>:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">struct</span> <span class="n">Binomen</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nl">genus</span><span class="p">:</span> <span class="n">String</span>
    <span class="k">let</span> <span class="nl">species</span><span class="p">:</span> <span class="n">String</span>
<span class="p">}</span>

<span class="c1">// MARK: Hashable</span>

<span class="k">extension</span> <span class="nl">Binomen</span><span class="p">:</span> <span class="n">Hashable</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nl">hashValue</span><span class="p">:</span> <span class="n">Int</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">genus</span><span class="p">.</span><span class="n">hashValue</span> <span class="o">^</span> <span class="n">species</span><span class="p">.</span><span class="n">hashValue</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// MARK: Equatable</span>

<span class="k">func</span> <span class="o">==</span><span class="p">(</span><span class="nl">lhs</span><span class="p">:</span> <span class="n">Binomen</span><span class="p">,</span> <span class="nl">rhs</span><span class="p">:</span> <span class="n">Binomen</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">lhs</span><span class="p">.</span><span class="n">genus</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="n">genus</span> <span class="o">&amp;&amp;</span> <span class="n">lhs</span><span class="p">.</span><span class="n">species</span> <span class="o">==</span> <span class="n">rhs</span><span class="p">.</span><span class="n">species</span>
<span class="p">}</span>
</code></pre></div>
<p>Being able to hash this type makes it possible to key common name to the &ldquo;Latin name&rdquo;:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">var</span> <span class="nl">commonNames</span><span class="p">:</span> <span class="p">[</span><span class="nl">Binomen</span><span class="p">:</span> <span class="n">String</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="o">:</span><span class="p">]</span>
<span class="n">commonNames</span><span class="p">[</span><span class="n">Binomen</span><span class="p">(</span><span class="nl">genus</span><span class="p">:</span> <span class="s">&quot;Canis&quot;</span><span class="p">,</span> <span class="nl">species</span><span class="p">:</span> <span class="s">&quot;lupis&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="s">&quot;Grey Wolf&quot;</span>
<span class="n">commonNames</span><span class="p">[</span><span class="n">Binomen</span><span class="p">(</span><span class="nl">genus</span><span class="p">:</span> <span class="s">&quot;Canis&quot;</span><span class="p">,</span> <span class="nl">species</span><span class="p">:</span> <span class="s">&quot;rufus&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="s">&quot;Red Wolf&quot;</span>
<span class="n">commonNames</span><span class="p">[</span><span class="n">Binomen</span><span class="p">(</span><span class="nl">genus</span><span class="p">:</span> <span class="s">&quot;Canis&quot;</span><span class="p">,</span> <span class="nl">species</span><span class="p">:</span> <span class="s">&quot;latrans&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="s">&quot;Coyote&quot;</span>
<span class="n">commonNames</span><span class="p">[</span><span class="n">Binomen</span><span class="p">(</span><span class="nl">genus</span><span class="p">:</span> <span class="s">&quot;Canis&quot;</span><span class="p">,</span> <span class="nl">species</span><span class="p">:</span> <span class="s">&quot;aureus&quot;</span><span class="p">)]</span> <span class="o">=</span> <span class="s">&quot;Golden Jackal&quot;</span>
</code></pre></div>
  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2014-09-22-swift-comparison-protocols.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
        
            <em>This article uses Swift version 1.2.</em>
        
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    
        

  <section id="promotion">
    
    <small>Recommended Reading</small>
    
    
    

<div id="" class="book" itemscope itemtype="http://schema.org/Product">
  <div itemscope itemtype="http://schema.org/Book">
    <link itemprop="bookFormat" href="http://schema.org/EBook"/>
    <a href="https://gum.co/nshipster-swift/" title="NSHipster: Obscure Topics in Cocoa & Swift" target="_blank">
      <img src="//cdn.nshipster.com/images/nshipster-swift-cover@2x.png" class="cover" alt="NSHipster: Obscure Topics in Cocoa & Swift" itemprop="image"/>
    </a>
    <span itemprop="name" style="display:none;" hidden>NSHipster: Obscure Topics in Cocoa & Swift</span>
    <span itemprop="author" style="display:none;" hidden>Mattt Thompson & Nate Cook</span>
    <div itemprop="offers" itemscope itemtype="http://schema.org/Offer" style="display:none;">
      <link itemprop="availability" href="http://schema.org/InStock"/>
      <meta itemprop="priceCurrency" content="USD"/>
      <span itemprop="price">29</span>
    </div>
  </div>
</div>

    <h3>NSHipster, Second Edition</h3>
    <h4>Obscure Topics in Cocoa & Swift</h4>
    <p>Revised and extended to focus on using Swift in iOS and OS X development, NSHipster: Obscure Topics in Cocoa &amp; Swift is an essential updated guide.</p>

    
    <a class="buy" href="https://gum.co/nshipster-swift/" target="_blank">Buy Now on Gumroad</a>
    
  </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/uialertcontroller/" title="UIAlertController" rel="next">UIAlert​Controller</a>
            </h1>

            <p>Did you know that <code>UIAlertView</code> and <code>UIActionSheet</code> (as well as their respective delegate protocols) are deprecated in iOS 8? It&rsquo;s true.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/unmanaged/" title="Unmanaged">Unmanaged</a>
            </li>
            
          
          
            <li>
              <a href="/swift-operators/" title="Swift Operators">Swift Operators</a>
            </li>
            
          
          
            <li>
              <a href="/swift-1.2/" title="Swift 1.2">Swift 1.2</a>
            </li>
            
          
          
            <li>
              <a href="/guard-and-defer/" title="guard & defer">guard & defer</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
