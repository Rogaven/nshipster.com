<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>Unit Testing - NSHipster</title>
    <meta name="description" content="Unit Testing is an emotional topic for developers. It inspires a sense of superiority to its most zealous adherents, and evokes a feeling of inadequacy to non-practitioners. Cargo Cults like TDD stake their reputation on unit testing to the point of co-opting and conflating utility with morality."/>
    <link rel="canonical" href="http://nshipster.com/unit-testing/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="Unit Testing"/>
    <meta name="twitter:description" content="Unit Testing is an emotional topic for developers. It inspires a sense of superiority to its most zealous adherents, and evokes a feeling of inadequacy to non-practitioners. Cargo Cults like TDD stake their reputation on unit testing to the point of co-opting and conflating utility with morality."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Unit Testing"/>
    <meta property="og:url" content="http://nshipster.com/unit-testing/"/>
    <meta property="og:description" content="Unit Testing is an emotional topic for developers. It inspires a sense of superiority to its most zealous adherents, and evokes a feeling of inadequacy to non-practitioners. Cargo Cults like TDD stake their reputation on unit testing to the point of co-opting and conflating utility with morality."/>
    <meta property="article:published_time" content="2013-05-27T00:00:00-07:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:34:50-08:00"/>
    <meta property="article:tag" content="objective-c"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="Unit Testing"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/unit-testing/">Unit Testing</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2013-05-27T00:00:00-07:00" itemprop="datePublished">May 27<sup>th</sup>, 2013</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>Unit Testing is an emotional topic for developers. It inspires a sense of superiority to its most zealous adherents, and evokes a feeling of inadequacy to non-practitioners. <a href="http://ntoll.org/article/tdd-cargo-cult">Cargo Cults like TDD</a> stake their reputation on unit testing to the point of co-opting and conflating utility with morality.</p>

<p>It&rsquo;s as close to a religious matter as programmers get, aside from the tabs-versus-spaces debate.</p>

<p>Objective-C developers have, for the most part, remained relatively apathetic to Unit Testing (<em>&ldquo;There&rsquo;s that SenTest thing, but who uses that, really?&rdquo;</em>). Between static typing, typically manageable project sizes, and a compiler advanced enough to <a href="http://clang.llvm.org/doxygen/Rewriter_8h_source.html">rewrite code for you</a>, unit testing isn&rsquo;t as much of a necessity as it is for more dynamic languages like Ruby (at least in practice).</p>

<p>But that&rsquo;s not to say that Objective-C developers wouldn&rsquo;t benefit from unit testing. In fact, as Objective-C continues to become more collaborative, with growing participation in the open source community, automated testing will become a necessity.</p>

<p>This week NSHipster will explore the world of unit testing frameworks, and how to set up an automated build system with Travis CI.</p>

<hr>

<p><a href="https://en.wikipedia.org/wiki/Unit_testing">Unit Testing</a> is a tool, just like any other tool. Its purpose is to make us better at our jobs, which is to produce robust, maintainable software.</p>

<p>It&rsquo;s a simple enough premise: write code to construct environments that exercise the particular behavior of a given method, function, class, or feature. Variables are isolated in a scientific manner, so as to test assumptions with logical atomicity.</p>

<h2 id="ocunit">OCUnit</h2>

<p><a href="http://www.sente.ch/software/ocunit/">OCUnit</a>, a.k.a. SenTestingKit, was integrated into Xcode 2.1 circa WWDC 2005, <a href="http://www.friday.com/bbum/2005/09/24/unit-testing">as a result of its use in the development of Core Data 1.0</a>. Developed by <a href="http://www.sente.ch">Sen:te</a>, OCUnit is actually one of the first unit testing libraries written for any language.</p>

<p>Unit Tests were added into a separate testing target in the Xcode Project. Each test file defines an <code>SenTestCase</code> subclass, which implements a series of methods beginning with the word <code>test</code>. C <code>assert</code>-style macros are used to fail tests if the specified condition is not met. Each test is run in sequence, independently of one another, with the results logged afterwards:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="cp">#import &lt;SenTestingKit/SenTestingKit.h&gt;</span>
<span class="cp">#import &quot;Person.h&quot;</span>

<span class="k">@interface</span> <span class="nc">TestPerson</span> : <span class="nc">SenTestCase</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">TestPerson</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">testFullName</span> <span class="p">{</span>
   <span class="n">Person</span> <span class="o">*</span><span class="n">person</span> <span class="o">=</span> <span class="p">[[</span><span class="n">Person</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
   <span class="n">person</span><span class="p">.</span><span class="n">firstName</span> <span class="o">=</span> <span class="s">@&quot;Pablo&quot;</span><span class="p">;</span>
   <span class="n">person</span><span class="p">.</span><span class="n">lastName</span> <span class="o">=</span> <span class="s">@&quot;Picasso&quot;</span><span class="p">;</span>
   <span class="n">STAssertEqualObjects</span><span class="p">([</span><span class="n">person</span> <span class="n">fullName</span><span class="p">],</span> <span class="s">@&quot;Pablo Picasso&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
<p>The SenTestingKit assertions are about what you&rsquo;d expect, offering bread-and-butter equality, existence, and truth checks:</p>

<ul>
<li><code>STAssertNil()</code></li>
<li><code>STAssertNotNil()</code></li>
<li><code>STAssertTrue()</code></li>
<li><code>STAssertFalse()</code></li>
<li><code>STAssertEqualObjects()</code></li>
<li><code>STAssertEquals()</code></li>
<li><code>STAssertEqualsWithAccuracy()</code></li>
<li><code>STAssertThrows()</code></li>
<li><code>STAssertThrowsSpecific()</code></li>
<li><code>STAssertThrowsSpecificNamed()</code></li>
<li><code>STAssertNoThrow()</code></li>
<li><code>STAssertNoThrowSpecific()</code></li>
<li><code>STAssertNoThrowSpecificNamed()</code></li>
<li><code>STAssertTrueNoThrow()</code></li>
<li><code>STAssertFalseNoThrow()</code></li>
<li><code>STFail()</code></li>
</ul>

<p>And yet, as useful as tests are, they necessarily introduce friction into a development cycle. When project pressures begin to weigh, tests are the first thing to be thrown overboard. At some point, the tests stop passing (&ldquo;we can worry about that later—now we have to ship!&rdquo;)</p>

<p>The only chance testing has to remain relevant in high-pressure situations is to reduce that friction in development. Essentially, tests need to become both <em>easier to write</em> and <em>easier to run</em>.</p>

<h2 id="open-source-libraries">Open Source Libraries</h2>

<p>There are a myriad of open source libraries that attempt to make testing more palatable by way of syntactic sugar and features like <a href="https://en.wikipedia.org/wiki/Method_stub">method stubs</a>, <a href="https://en.wikipedia.org/wiki/Mock_object">mock objects</a>, and <a href="http://en.wikipedia.org/wiki/Futures_and_promises">promises</a>.</p>

<p>Here&rsquo;s a list of some of the most useful open source libraries for unit testing:</p>

<table>
  <thead>
    <th colspan="3">Mock Objects</th>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/erikdoe/ocmock">OCMock</a></td>
      <td><a href="https://github.com/erikdoe">Erik Doernenburg</a></td>
      <td><iframe src="http://ghbtns.com/github-btn.html?user=erikdoe&repo=ocmock&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="106" height="20"></iframe></td>
    </tr>
    <tr>
      <td><a href="https://github.com/jonreid/OCMockito">OCMockito</a></td>
      <td><a href="https://github.com/jonreid">Jon Reid</a></td>
      <td><iframe src="http://ghbtns.com/github-btn.html?user=jonreid&repo=OCMockito&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="106" height="20"></iframe></td>
    </tr>
  </tbody>

  <thead>
    <th colspan="3">Matchers</th>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/specta/expecta">Expecta</a></td>
      <td><a href="https://github.com/petejkim">Peter Jihoon Kim</a></td>
      <td><iframe src="http://ghbtns.com/github-btn.html?user=specta&repo=expecta&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="106" height="20"></iframe></td>
    </tr>
    <tr>
      <td><a href="https://github.com/hamcrest/OCHamcrest">OCHamcrest</a></td>
      <td><a href="https://github.com/jonreid">Jon Reid</a></td>
      <td><iframe src="http://ghbtns.com/github-btn.html?user=hamcrest&repo=OCHamcrest&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="106" height="20"></iframe></td>
    </tr>
  </tbody>

  <thead>
    <th colspan="3">BDD / TDD</th>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/specta/specta">Specta</a></td>
      <td><a href="https://github.com/petejkim">Peter Jihoon Kim</a></td>
      <td><iframe src="http://ghbtns.com/github-btn.html?user=specta&repo=specta&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="106" height="20"></iframe></td>
    </tr>
    <tr>
      <td><a href="https://github.com/kiwi-bdd/Kiwi">Kiwi</a></td>
      <td><a href="https://github.com/allending">Allen Ding</a></td>
      <td><iframe src="http://ghbtns.com/github-btn.html?user=kiwi-bdd&repo=Kiwi&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="106" height="20"></iframe></td>
    </tr>
    <tr>
      <td><a href="https://github.com/pivotal/cedar">Cedar</a></td>
      <td><a href="https://github.com/pivotal">Pivotal Labs</a></td>
      <td><iframe src="http://ghbtns.com/github-btn.html?user=pivotal&repo=cedar&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="106" height="20"></iframe></td>
    </tr>
  </tbody>

  <thead>
    <th colspan="3">Frameworks</th>
  </thead>
  <tbody>
    <tr>
      <td><a href="https://github.com/gh-unit/gh-unit/">GHUnit</a></td>
      <td><a href="https://github.com/gabriel">Gabriel Handford</a></td>
      <td><iframe src="http://ghbtns.com/github-btn.html?user=gh-unit&repo=gh-unit&type=watch&count=true" allowtransparency="true" frameborder="0" scrolling="0" width="106" height="20"></iframe></td>
    </tr>
  </tbody>
</table>

<h2 id="automated-testing">Automated Testing</h2>

<p>Making tests easier to write is one thing, but getting them to run without affecting productivity is quite another.</p>

<h3 id="jenkins">Jenkins</h3>

<p>For a long time, installing <a href="http://jenkins-ci.org">Jenkins</a> on a dedicated Mac Mini was the state-of-the-art for automated build servers.</p>

<p>Aside from the fact that it&rsquo;s <em>kinda the worst thing ever to set-up</em>, <a href="https://speakerdeck.com/subdigital/ios-build-automation-with-jenkins">you can do a lot of cool things</a> like notifying build status over IM or IRC, automatically distributing builds to <a href="https://testflightapp.com/dashboard/">TestFlight</a> or <a href="http://hockeyapp.net">HockeyApp</a> with <a href="https://github.com/nomad/shenzhen">Shenzhen</a>, and generating documentation with <a href="http://gentlebytes.com/appledoc/">AppleDoc</a>.</p>

<h3 id="travis">Travis</h3>

<p>Until recently, automated unit testing for Objective-C was the privilege of projects that could dedicate the time and money to setup a CI server. <a href="https://travis-ci.org">Travis CI</a> made CI available to the masses.</p>

<p>CI for Objective-C is more difficult than for other languages, because it needs to be done on a Mac. For economic reasons, there just isn&rsquo;t a market for cloud-based OS X environments like there is for Linux. Fortunately, <a href="https://saucelabs.com">SauceLabs</a> has built such a virtualized Mac cloud, and is graciously donating some of it to run tests for open source Objective-C projects on Travis-CI.</p>

<p>For an example of automated Objective-C unit testing in the wild, check out <a href="https://github.com/afnetworking/afnetworking#unit-tests">how AFNetworking does it</a>.</p>

<p>The <code>Tests</code> subdirectory contains separate projects for iOS and OS X targets, as well as a Podfile, which specifies all of the testing library dependencies. AFNetworking executes a <a href="http://rake.rubyforge.org">Rake</a> task, which shells out to <a href="https://github.com/facebook/xctool"><code>xctool</code></a>.</p>

<p>All of the configuration for setup is defined in <code>.travis.yml</code>:</p>

<h4 id=".travis.yml">.travis.yml</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">language: objective-c
before_install:
  - brew update
  - brew install xctool --HEAD
  - cd Tests &amp;&amp; pod install &amp;&amp; cd $TRAVIS_BUILD_DIR
  - mkdir -p &quot;Tests/AFNetworking Tests.xcodeproj/xcshareddata/xcschemes&quot; &amp;&amp; cp Tests/Schemes/*.xcscheme &quot;Tests/AFNetworking Tests.xcodeproj/xcshareddata/xcschemes/&quot;
script: rake test
</code></pre></div>
<p>Full documentation for the Travis configuration file <a href="http://about.travis-ci.org/docs/user/build-configuration/">can be found on Travis-CI.org</a>.</p>

<hr>

<p>Once again, the direction of Objective-C has been directly influenced by the Ruby community. Those guys and gals are <em>serious</em> about testing. It&rsquo;s not like we should complain, though: between <a href="http://cocoapods.org">CocoaPods</a>, <a href="http://www.rubymotion.com">RubyMotion</a>, and <a href="http://nomad-cli.com">Nomad</a>, Ruby has made Objective-C development better by several orders of magnitude.</p>

<p>The bottom line is that testing has come to Objective-C. It&rsquo;s not always necessary, and it&rsquo;s certainly not a silver bullet for writing great software, but it&rsquo;s proven itself invaluable (especially for open source development). So give it a try now, before <em>not</em> testing becomes <em>seriously uncool</em>.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2013-05-27-unit-testing.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
            
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/nsdatadetector/" title="NSDataDetector" rel="next">NSData​Detector</a>
            </h1>

            <p>Until humanity embraces RDF for all of their daily interactions, a large chunk of artificial intelligence is going to go into figuring out what the heck we&rsquo;re all talking about. Fortunately for Cocoa developers, there&rsquo;s NSDataDetector.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/random/" title="rand(3) / random(3) / arc4random(3) / et al.">rand(3) / random(3) / arc4random(3) / et al.</a>
            </li>
            
          
          
            <li>
              <a href="/method-swizzling/" title="Method Swizzling">Method Swizzling</a>
            </li>
            
          
          
            <li>
              <a href="/__attribute__/" title="__attribute__">__attribute__</a>
            </li>
            
          
          
            <li>
              <a href="/nil/" title="nil / Nil / NULL / NSNull">nil / Nil / NULL / NSNull</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
