<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>Reader Submissions -  New Year's 2015 - NSHipster</title>
    <meta name="description" content="2014 was an incredible year professionally for Apple developers. With a deluge of new developments—both from Cupertino and the community at large—there were no shortage of interesting tidbits for readers to share."/>
    <link rel="canonical" href="http://nshipster.com/new-years-2015/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="Reader Submissions -<br/> New Year's 2015"/>
    <meta name="twitter:description" content="2014 was an incredible year professionally for Apple developers. With a deluge of new developments—both from Cupertino and the community at large—there were no shortage of interesting tidbits for readers to share."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Reader Submissions -<br/> New Year's 2015"/>
    <meta property="og:url" content="http://nshipster.com/new-years-2015/"/>
    <meta property="og:description" content="2014 was an incredible year professionally for Apple developers. With a deluge of new developments—both from Cupertino and the community at large—there were no shortage of interesting tidbits for readers to share."/>
    <meta property="article:published_time" content="2015-01-01T00:00:00-08:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:34:50-08:00"/>
    <meta property="article:tag" content="reader submissions"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="Reader Submissions -<br/> New Year's 2015"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/new-years-2015/">Reader Submissions -<br/> New Year's 2015</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2015-01-01T00:00:00-08:00" itemprop="datePublished">January 1<sup>st</sup>, 2015</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>As we take a moment to reflect on our experiences over the past year, one thing is clear: 2014 was an incredible year professionally for Apple developers. So much has happened in such a short timespan, and yet it&rsquo;s hard to remember our relationship to Objective-C before Swift, or what APIs could have captivated our imagination as much as iOS 8 or WatchKit.</p>

<p>It&rsquo;s an NSHipster tradition to ask you, dear readers, to <a href="https://gist.github.com/mattt/f00da093956f20945727">send in your favorite tips and tricks from the past year</a> for publication over the New Year&rsquo;s holiday. This year, with a deluge of new developments—both from Cupertino and the community at large—there were no shortage of interesting tidbits to share.</p>

<p>Thanks to <a href="https://github.com/cmyr">Colin Rofls</a>, <a href="https://github.com/0xced">Cédric Luthi</a>, <a href="https://github.com/fpillet">Florent Pillet</a>, <a href="https://github.com/hborders">Heath Borders</a>, <a href="https://github.com/zobkiw">Joe Zobkiw</a>, <a href="https://github.com/jonfriskics">Jon Friskics</a>, <a href="https://github.com/incanus">Justin Miller</a>, <a href="https://github.com/marcinmatczuk">Marcin Matczuk</a>, <a href="https://github.com/Konrad77">Mikael Konradsson</a>, <a href="https://github.com/NSProgrammer">Nolan O&#39;Brien</a>, <a href="https://github.com/CodaFi">Robert Widmann</a>, <a href="https://github.com/palewar">Sachin Palewar</a>, <a href="https://github.com/defagos">Samuel Defago</a>, <a href="https://github.com/bitops">Sebastian Wittenkamp</a>, <a href="https://github.com/shpakovski">Vadim Shpakovski</a>, and <a href="https://github.com/kazmasaurus">Zak Remer</a> for their contributions.</p>

<hr>

<h2 id="the-secret-lives-of-member-functions">The Secret Lives of Member Functions</h2>

<p>From <a href="https://github.com/CodaFi">Robert Widmann</a>:</p>

<blockquote>
<p>Member functions on Swift classes and structures always have the following type when used statically:</p>
</blockquote>

<p>Object -&gt; (Args) -&gt; Thing</p>

<p>For example, you can call <code>reverse()</code> on an array in two ways:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">].</span><span class="n">reverse</span><span class="p">()</span>
<span class="n">Array</span><span class="p">.</span><span class="n">reverse</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">])()</span>
</code></pre></div>
<h2 id="@(-)-for-boxing-c-strings"><code>@( )</code> for Boxing C-Strings</h2>

<p>From <a href="https://github.com/defagos">Samuel Defago</a>:</p>

<blockquote>
<p>Given the fact that literals are most of the time associated with numbers and collections, I often forget that they work for UTF8-encoded <code>NULL</code>-terminated C-strings as well, especially when I write code using the runtime:</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">propertyAttributesString</span> <span class="o">=</span>
    <span class="l">@(</span><span class="n">property_getAttributes</span><span class="p">(</span><span class="n">class_getProperty</span><span class="p">([</span><span class="bp">NSObject</span> <span class="k">class</span><span class="p">],</span> <span class="s">&quot;description&quot;</span><span class="p">))</span><span class="l">)</span><span class="p">;</span>
<span class="c1">// T@&quot;NSString&quot;,R,C</span>
</code></pre></div>
<h2 id="amibeingdebugged">AmIBeingDebugged</h2>

<p><a href="https://github.com/NSProgrammer">Nolan O&#39;Brien</a> brings the <code>AmIBeingDebugged</code> function to our attention from from <a href="https://developer.apple.com/library/mac/qa/qa1361/_index.html">this Technical Q&amp;A document</a>:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="cp">#include &lt;assert.h&gt;</span>
<span class="cp">#include &lt;stdbool.h&gt;</span>
<span class="cp">#include &lt;sys/types.h&gt;</span>
<span class="cp">#include &lt;unistd.h&gt;</span>
<span class="cp">#include &lt;sys/sysctl.h&gt;</span>

<span class="k">static</span> <span class="n">Bool</span> <span class="nf">AmIBeingDebugged</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">mib</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
    <span class="k">struct</span> <span class="n">kinfo_proc</span> <span class="n">info</span><span class="p">;</span>
    <span class="kt">size_t</span> <span class="n">size</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">info</span><span class="p">);</span>

    <span class="n">info</span><span class="p">.</span><span class="n">kp_proc</span><span class="p">.</span><span class="n">p_flag</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">mib</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">CTL_KERN</span><span class="p">;</span>
    <span class="n">mib</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">KERN_PROC</span><span class="p">;</span>
    <span class="n">mib</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">KERN_PROC_PID</span><span class="p">;</span>
    <span class="n">mib</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="n">getpid</span><span class="p">();</span>

    <span class="n">sysctl</span><span class="p">(</span><span class="n">mib</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">mib</span><span class="p">)</span> <span class="o">/</span> <span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">mib</span><span class="p">),</span> <span class="o">&amp;</span><span class="n">info</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">size</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

    <span class="k">return</span> <span class="p">(</span><span class="n">info</span><span class="p">.</span><span class="n">kp_proc</span><span class="p">.</span><span class="n">p_flag</span> <span class="o">&amp;</span> <span class="n">P_TRACED</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="use-lazy-variables">Use Lazy Variables</h2>

<p>From <a href="https://github.com/cmyr">Colin Rofls</a>:</p>

<blockquote>
<p>Optionals should be avoided. Implicitly unwrapped optionals should be strongly avoided. Want to declare a var but don&rsquo;t necessarily have an initial value at init time? Use the lazy keyword, and just don&rsquo;t call the getter before you have your real value.</p>
</blockquote>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">lazy</span> <span class="k">var</span> <span class="n">someModelStructure</span> <span class="o">=</span> <span class="n">ExpensiveClass</span><span class="p">()</span>
</code></pre></div>
<blockquote>
<p>If you call <code>set</code> on this var without having ever called the getter, the lazy expression is never evaluated. Great for references to views that you don&rsquo;t necessarily want to init until viewDidLoad, for instance.</p>
</blockquote>

<h2 id="accessing-child-controllers-inserted-into-storyboard-container-views">Accessing Child Controllers Inserted Into Storyboard Container Views</h2>

<p>From <a href="https://github.com/shpakovski">Vadim Shpakovski</a>:</p>

<blockquote>
<p>Here is a convenient way to access child controllers inserted into Storyboard container views:</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">// 1. A property has the same name as a segue identifier in XIB</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">ChildViewController1</span> <span class="o">*</span><span class="n">childController1</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">)</span> <span class="n">ChildViewController2</span> <span class="o">*</span><span class="n">childController2</span><span class="p">;</span>

<span class="c1">// #pragma mark - UIViewController</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">prepareForSegue:</span><span class="p">(</span><span class="bp">UIStoryboardSegue</span> <span class="o">*</span><span class="p">)</span><span class="nv">segue</span>
                 <span class="nf">sender:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">sender</span>
<span class="p">{</span>
    <span class="p">[</span><span class="nb">super</span> <span class="nl">prepareForSegue</span><span class="p">:</span><span class="n">segue</span> <span class="nl">sender</span><span class="p">:</span><span class="n">sender</span><span class="p">];</span>

    <span class="c1">// 2. All known destination controllers assigned to properties</span>
    <span class="k">if</span> <span class="p">([</span><span class="nb">self</span> <span class="nl">respondsToSelector</span><span class="p">:</span><span class="n">NSSelectorFromString</span><span class="p">(</span><span class="n">segue</span><span class="p">.</span><span class="n">identifier</span><span class="p">)])</span> <span class="p">{</span>
        <span class="p">[</span><span class="nb">self</span> <span class="nl">setValue</span><span class="p">:</span><span class="n">segue</span><span class="p">.</span><span class="n">destinationViewController</span> <span class="nl">forKey</span><span class="p">:</span><span class="n">segue</span><span class="p">.</span><span class="n">identifier</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
    <span class="p">[</span><span class="nb">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>

    <span class="c1">// 3. Controllers already available bc viewDidLoad is called after prepareForSegue</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">childController1</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">redColor</span><span class="p">];</span>
    <span class="nb">self</span><span class="p">.</span><span class="n">childController2</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIColor</span> <span class="n">blueColor</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="re-run-without-re-building">Re-Run without Re-Building</h2>

<p>From <a href="https://github.com/hborders">Heath Borders</a>:</p>

<blockquote>
<p>If you&rsquo;re repeatedly debugging the same problem over and over, you can run your app without rebuilding with &ldquo;Product &gt; Perform Action &gt; Run without Building&rdquo; (<code>⌘⌃R</code>).</p>
</blockquote>

<h2 id="quick-access-to-playground-resources">Quick Access to Playground Resources</h2>

<p>From <a href="https://github.com/jonfriskics">Jon Friskics</a>:</p>

<blockquote>
<p>Swift Playgrounds all share the same Shared Playground Data folder that&rsquo;s symlinked to <code>/Users/HOME/Documents/Shared Playground Data</code>.</p>

<p>If you like using lots of Playgrounds, you&rsquo;ll want to organize the data that each Playground is using into subfolders of that shared folder, but then you&rsquo;ve got to let the Playground know where to look. Here&rsquo;s a helper function that I use that makes that easy:</p>
</blockquote>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="n">pathToFileInSharedSubfolder</span><span class="p">(</span><span class="nl">file</span><span class="p">:</span> <span class="n">String</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">String</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">XCPSharedDataDirectoryPath</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="bp">NSProcessInfo</span><span class="p">.</span><span class="n">processInfo</span><span class="p">().</span><span class="n">processName</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">file</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>That processName property in NSProcessInfo contains the name of the Playground file, so as long as you have already created a sub-folder in the Shared Playground Data folder with the same name you can access those files pretty easily, like reading local JSON:</p>
</blockquote>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">var</span> <span class="nl">jsonReadError</span><span class="p">:</span><span class="bp">NSError</span><span class="o">?</span>
<span class="k">let</span> <span class="n">jsonData</span> <span class="o">=</span> <span class="bp">NSFileManager</span><span class="p">.</span><span class="n">defaultManager</span><span class="p">().</span><span class="n">contentsAtPath</span><span class="p">(</span><span class="n">pathToFileInSharedSubfolder</span><span class="p">(</span><span class="s">&quot;data.json&quot;</span><span class="p">))</span><span class="o">!</span>
<span class="k">let</span> <span class="n">jsonArray</span> <span class="o">=</span> <span class="bp">NSJSONSerialization</span><span class="p">.</span><span class="n">JSONObjectWithData</span><span class="p">(</span><span class="n">jsonData</span><span class="p">,</span> <span class="nl">options</span><span class="p">:</span> <span class="nb">nil</span><span class="p">,</span> <span class="nl">error</span><span class="p">:</span> <span class="o">&amp;</span><span class="n">jsonReadError</span><span class="p">)</span> <span class="kt">as</span> <span class="p">[</span><span class="n">AnyObject</span><span class="p">]</span>
</code></pre></div>
<blockquote>
<p>&hellip;or pulling out a local image:</p>
</blockquote>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="n">imageView</span> <span class="o">=</span> <span class="bp">UIImageView</span><span class="p">()</span>
<span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="bp">UIImage</span><span class="p">(</span><span class="nl">contentsOfFile</span><span class="p">:</span> <span class="n">pathToFileInSharedSubfolder</span><span class="p">(</span><span class="s">&quot;image.png&quot;</span><span class="p">))</span>
</code></pre></div>
<hr>

<p>The rest of this year&rsquo;s reader submissions come from <a href="https://github.com/0xced">Cédric Luthi</a>, who (as in <a href="http://nshipster.com/new-years-2014/">years</a> <a href="http://nshipster.com/reader-submissions-new-years-2013/">past</a>) contributed a payload of tips and tricks worthy of an entire article unto themselves. Thanks so much for these, Cédric!</p>

<h2 id="cocoapods,-exposed!">CocoaPods, Exposed!</h2>

<blockquote>
<p>Here&rsquo;s a quick way to check all the pods used by a (closed source) app:</p>
</blockquote>

<p><code>$ class-dump -C Pods_ /Applications/Squire.app | grep -o &quot;Pods_\w+&quot;</code></p>

<h2 id="create_infoplist_section_in_binary"><code>CREATE_INFOPLIST_SECTION_IN_BINARY</code></h2>

<blockquote>
<p>Check out the <code>CREATE_INFOPLIST_SECTION_IN_BINARY</code> Xcode setting for command-line apps. It&rsquo;s much easier to use than the <code>-sectcreate __TEXT __info_plist</code> linker flag and it embeds the processed Info.plist file into the binary.</p>

<p>It&rsquo;s also a lesson on filing radars. This feature request was filed as <code>rdar://4722772</code> in 2006 and was addressed about 7 years later.</p>
</blockquote>

<h2 id="stop-dylib-hooking">Stop dylib Hooking</h2>

<blockquote>
<p>Make hackers&#39; lives tougher with <a href="https://twitter.com/dirk_gently/status/481075149437804544">this trick from Sam Marshall</a>:</p>

<blockquote>
<p>Add this one line to your &ldquo;Other Linker Flags&rdquo;:</p>
</blockquote>
</blockquote>

<p><code>-Wl,-sectcreate,__RESTRICT,__restrict,/dev/null</code></p>

<h2 id="nsbundle--preferredlocalizations">NSBundle -preferredLocalizations</h2>

<blockquote>
<p>Sometimes, you need to know which language your app is running in. Often, people will use <code>NSLocale +preferredLanguages</code>. Unfortunately this tells nothing about the language the app is actually displaying. It will just give you the ordered list as found in &ldquo;Settings → General → Language &amp; Region → Preferred Language&rdquo; Order on iOS, or &ldquo;System Preferences → Language &amp; Region → Preferred Languages&rdquo; on OS X.</p>

<p>Imagine that the preferred language order is <code>{English, French}</code> but your app is German only. Calling <code>[[NSLocale preferredLanguages] firstObject]</code> will give you English when you want German.</p>

<p>The proper way to get the actual language used by the app is to use <code>[[NSBundle mainBundle] preferredLocalizations]</code>.</p>
</blockquote>

<p>From the documentation:</p>

<blockquote>
<blockquote>
<p>An array of <code>NSString</code> objects containing language IDs for localizations in the bundle. The strings are ordered according to the user&rsquo;s language preferences and available localizations.</p>
</blockquote>
</blockquote>

<p>From a comment in <code>NSBundle.h</code>:</p>

<blockquote>
<blockquote>
<p>A subset of this bundle&rsquo;s localizations, re-ordered into the preferred order for this process&rsquo;s current execution environment; the main bundle&rsquo;s preferred localizations indicate the language (of text) the user is most likely seeing in the UI</p>
</blockquote>

<p>You may also need to use <code>NSLocale +canonicalLanguageIdentifierFromString:</code> in order to ensure a canonical language identifier.</p>
</blockquote>

<h2 id="preserve-sdk-headers">Preserve SDK Headers</h2>

<blockquote>
<p>If you are installing Xcode from the dmg, check out <a href="https://twitter.com/joar_at_work/statuses/472986684196278272">this technique by Joar Wingfors</a> in order to avoid to accidentally modifying SDK headers by preserving ownership, permissions and hard links:</p>
</blockquote>

<p><code>$ sudo ditto /Volumes/Xcode/Xcode.app /Applications/Xcode.app</code></p>

<h2 id="inspecting-void-*-instance-variables">Inspecting <code>void *</code> Instance Variables</h2>

<blockquote>
<p>For reverse engineering purpose, it&rsquo;s often useful to look at instance variables of objects. It&rsquo;s usually pretty easy to do so with <code>valueForKey:</code>, since very few classes override <code>+accessInstanceVariablesDirectly</code> to disable ivar access through Key-Value Coding.</p>

<p>There&rsquo;s one case where it doesn&rsquo;t work though: when the ivar has a <code>void *</code> type.</p>

<p>Here is an excerpt of the MediaPlayer framework class-dump on iOS 6.1:</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">@interface</span> <span class="bp">MPMoviePlayerController</span> : <span class="bp">NSObject</span> <span class="o">&lt;</span><span class="bp">MPMediaPlayback</span><span class="o">&gt;</span>
<span class="p">{</span>
    <span class="kt">void</span> <span class="o">*</span><span class="n">_internal</span><span class="p">;</span>    <span class="c1">// 4 = 0x4</span>
    <span class="kt">BOOL</span> <span class="n">_readyForDisplay</span><span class="p">;</span>  <span class="c1">// 8 = 0x8</span>
<span class="p">}</span>
</code></pre></div>
<blockquote>
<p>Since <code>id internal = [moviePlayerController valueForKey:@&quot;internal&quot;]</code> doesn&rsquo;t work, here is the hardcore way to access the internal ivar:</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="kt">id</span> <span class="n">internal</span> <span class="o">=</span> <span class="o">*</span><span class="p">((</span><span class="k">const</span> <span class="kt">id</span><span class="o">*</span><span class="p">)(</span><span class="kt">void</span><span class="o">*</span><span class="p">)((</span><span class="kt">uintptr_t</span><span class="p">)</span><span class="n">moviePlayerController</span> <span class="o">+</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">Class</span><span class="p">)));</span>
</code></pre></div>
<blockquote>
<p>Don&rsquo;t ship this code, its&rsquo;s very fragile because the ivar layout may change. Use this for reverse engineering only!</p>
</blockquote>

<h2 id="nsdateformatter-+dateformatfromtemplate:options:locale:"><code>NSDateFormatter +dateFormatFromTemplate:options:locale:</code></h2>

<blockquote>
<p>A friendly reminder that if you are using <code>NSDateFormatter -setDateFormat:</code> without <code>NSDateFormatter +dateFormatFromTemplate:options:locale:</code>, you&rsquo;re probably doing it wrong.</p>

<p>From the <a href="https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/#//apple_ref/occ/clm/NSDateFormatter/dateFormatFromTemplate:options:locale">documentation</a>:</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">+</span> <span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nf">dateFormatFromTemplate:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">template</span>
                             <span class="nf">options:</span><span class="p">(</span><span class="bp">NSUInteger</span><span class="p">)</span><span class="nv">opts</span>
                              <span class="nf">locale:</span><span class="p">(</span><span class="bp">NSLocale</span> <span class="o">*</span><span class="p">)</span><span class="nv">locale</span>
</code></pre></div>
<blockquote>
<blockquote>
<p>Different locales have different conventions for the ordering of date components. You use this method to get an appropriate format string for a given set of components for a specified locale (typically you use the current locale—see currentLocale).</p>

<p>The following example shows the difference between the date formats for British and American English:</p>
</blockquote>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSLocale</span> <span class="o">*</span><span class="n">usLocale</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSLocale</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithLocaleIdentifier</span><span class="p">:</span><span class="s">@&quot;en_US&quot;</span><span class="p">];</span>
<span class="bp">NSLocale</span> <span class="o">*</span><span class="n">gbLocale</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSLocale</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithLocaleIdentifier</span><span class="p">:</span><span class="s">@&quot;en_GB&quot;</span><span class="p">];</span>

<span class="bp">NSString</span> <span class="o">*</span><span class="n">dateFormat</span><span class="p">;</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">dateComponents</span> <span class="o">=</span> <span class="s">@&quot;yMMMMd&quot;</span><span class="p">;</span>

<span class="n">dateFormat</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSDateFormatter</span> <span class="nl">dateFormatFromTemplate</span><span class="p">:</span><span class="n">dateComponents</span> <span class="nl">options</span><span class="p">:</span><span class="mi">0</span> <span class="nl">locale</span><span class="p">:</span><span class="n">usLocale</span><span class="p">];</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Date format for %@: %@&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="n">usLocale</span> <span class="nl">displayNameForKey</span><span class="p">:</span><span class="n">NSLocaleIdentifier</span> <span class="nl">value</span><span class="p">:[</span><span class="n">usLocale</span> <span class="n">localeIdentifier</span><span class="p">]],</span> <span class="n">dateFormat</span><span class="p">);</span>

<span class="n">dateFormat</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSDateFormatter</span> <span class="nl">dateFormatFromTemplate</span><span class="p">:</span><span class="n">dateComponents</span> <span class="nl">options</span><span class="p">:</span><span class="mi">0</span> <span class="nl">locale</span><span class="p">:</span><span class="n">gbLocale</span><span class="p">];</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;Date format for %@: %@&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="n">gbLocale</span> <span class="nl">displayNameForKey</span><span class="p">:</span><span class="n">NSLocaleIdentifier</span> <span class="nl">value</span><span class="p">:[</span><span class="n">gbLocale</span> <span class="n">localeIdentifier</span><span class="p">]],</span> <span class="n">dateFormat</span><span class="p">);</span>

<span class="c1">// Output:</span>
<span class="c1">// Date format for English (United States): MMMM d, y</span>
<span class="c1">// Date format for English (United Kingdom): d MMMM y</span>
</code></pre></div>
<h2 id="deriving-internal-constants-with-the-debugger">Deriving Internal Constants with the Debugger</h2>

<blockquote>
<p>Recently, <a href="https://twitter.com/myell0w/">Matthias Tretter</a> asked on Twitter:</p>
</blockquote>

<blockquote class="twitter-tweet" lang="en"><p>Does anyone know the default animation duration and springs for modal viewController presentation on iOS 8?</p>&mdash; Matthias Tretter (@myell0w) <a href="https://twitter.com/myell0w/status/535775373729234944">November 21, 2014</a></blockquote>

<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

<blockquote>
<p>Search for duration in a class-dump of UIKit, find the <code>UITransitionView +defaultDurationForTransition:</code> method, and set a breakpoint for that method:</p>
</blockquote>
<div class="highlight"><pre><code class="language-text" data-lang="text">(lldb) br set -n &quot;+[UITransitionView defaultDurationForTransition:]&quot;
</code></pre></div>
<blockquote>
<p>Present a modal view controller, you will hit the breakpoint, type <code>finish</code> to execute the method:</p>
</blockquote>
<div class="highlight"><pre><code class="language-text" data-lang="text">(lldb) finish
</code></pre></div>
<blockquote>
<p>At that point <code>defaultDurationForTransition:</code> has executed, and you can read the result (it&rsquo;s in the <code>xmm0</code> register):</p>
</blockquote>
<div class="highlight"><pre><code class="language-text" data-lang="text">(lldb) register read xmm0 --format float64
    xmm0 = {0.4 0}
</code></pre></div>
<blockquote>
<p>Answer: the default duration is 0.4s.</p>
</blockquote>

<h2 id="diy-weak-associated-objects">DIY Weak Associated Objects</h2>

<blockquote>
<p>Unfortunately, the associated objects <code>OBJC_ASSOCIATION_ASSIGN</code> policy does not support zeroing weak references. Fortunately, it&rsquo;s quite easy to implement yourself. You just need a simple class to wrap an object with a weak reference:</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">@interface</span> <span class="nc">WeakObjectContainter</span> : <span class="bp">NSObject</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">readonly</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">id</span> <span class="n">object</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">WeakObjectContainter</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">instancetype</span><span class="p">)</span><span class="nf">initWithObject:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">object</span> <span class="p">{</span>
    <span class="nb">self</span> <span class="o">=</span> <span class="p">[</span><span class="nb">super</span> <span class="n">init</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">self</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nb">self</span><span class="p">.</span><span class="n">object</span> <span class="o">=</span> <span class="n">object</span><span class="p">;</span>

    <span class="k">return</span> <span class="nb">self</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>
</code></pre></div>
<blockquote>
<p>Then, associate the <code>WeakObjectContainter</code> with <code>OBJC_ASSOCIATION_RETAIN(_NONATOMIC):</code></p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">objc_setAssociatedObject</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MyKey</span><span class="p">,</span> <span class="p">[[</span><span class="n">WeakObjectContainter</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithObject</span><span class="p">:</span><span class="n">object</span><span class="p">],</span> <span class="n">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span><span class="p">);</span>
</code></pre></div>
<blockquote>
<p>Use the <code>object</code> property to access it in order to get a zeroing weak reference to the desired object:</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="kt">id</span> <span class="n">object</span> <span class="o">=</span> <span class="p">[</span><span class="n">objc_getAssociatedObject</span><span class="p">(</span><span class="nb">self</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">MyKey</span><span class="p">)</span> <span class="n">object</span><span class="p">];</span>
</code></pre></div>
<hr>

<p>And with that, we bring in a brand new year of possibilities and opportunities. Happy 2015, everyone!</p>

<p>May your code continue to compile and inspire.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2015-01-01-new-years-2015.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
        
            <em>This article uses Swift version 1.0.</em>
        
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/changing-of-the-guard/" title="Changing of the Guard" rel="next">Changing of the Guard</a>
            </h1>

            <p>An important site announcement.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
          
          
            <li>
              <a href="/new-years-2014/" title="Reader Submissions -<br/> New Year's 2014">Reader Submissions -<br/> New Year's 2014</a>
            </li>
            
          
          
            <li>
              <a href="/new-years-2013/" title="Reader Submissions -<br/> New Year's 2013">Reader Submissions -<br/> New Year's 2013</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
