<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>NSURLCache - NSHipster</title>
    <meta name="description" content="NSURLCache provides a composite in-memory and on-disk caching mechanism for URL requests to your application. As part of Foundation's URL Loading System, any request loaded through NSURLConnection will be handled by NSURLCache."/>
    <link rel="canonical" href="http://nshipster.com/nsurlcache/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="NSURLCache"/>
    <meta name="twitter:description" content="NSURLCache provides a composite in-memory and on-disk caching mechanism for URL requests to your application. As part of Foundation&#39;s URL Loading System, any request loaded through NSURLConnection will be handled by NSURLCache."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="NSURLCache"/>
    <meta property="og:url" content="http://nshipster.com/nsurlcache/"/>
    <meta property="og:description" content="NSURLCache provides a composite in-memory and on-disk caching mechanism for URL requests to your application. As part of Foundation&#39;s URL Loading System, any request loaded through NSURLConnection will be handled by NSURLCache."/>
    <meta property="article:published_time" content="2013-02-11T00:00:00-08:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:34:50-08:00"/>
    <meta property="article:tag" content="cocoa"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="NSURLCache"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/nsurlcache/">NSURLCache</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2013-02-11T00:00:00-08:00" itemprop="datePublished">February 11<sup>th</sup>, 2013</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p><code>NSURLCache</code> provides a composite in-memory and on-disk caching mechanism for URL requests to your application. As part of Foundation&rsquo;s <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i">URL Loading System</a>, any request loaded through <code>NSURLConnection</code> will be handled by <code>NSURLCache</code>.</p>

<p>Network caching reduces the number of requests that need to be made to the server, and improve the experience of using an application offline or under slow network conditions.</p>

<p>When a request has finished loading its response from the server, a cached response will be saved locally. The next time the same request is made, the locally-cached response will be returned immediately, without connecting to the server. <code>NSURLCache</code> returns the cached response <em>automatically</em> and <em>transparently</em>.</p>

<p>As of iOS 5, a shared <code>NSURLCache</code> is set for the application by default. <a href="https://developer.apple.com/library/ios/documentation/cocoa/Reference/Foundation/Classes/NSURLCache_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLCache/setSharedURLCache:">Quoth the docs</a>:</p>

<blockquote>
<p>Applications that do not have special caching requirements or constraints should find the default shared cache instance acceptable. An application with more specific needs can create a custom NSURLCache object and set it as the shared cache instance using setSharedURLCache:. The application should do so before any calls to this method.</p>
</blockquote>

<p>Those having such special caching requirements can set a shared URL cache in <code>-application:didFinishLaunchingWithOptions:</code> on iOS, or  <code>–applicationDidFinishLaunching:</code> on OS X:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="n">application</span><span class="p">(</span><span class="nl">application</span><span class="p">:</span> <span class="bp">UIApplication</span><span class="o">!</span><span class="p">,</span> <span class="n">didFinishLaunchingWithOptions</span> <span class="nl">launchOptions</span><span class="p">:</span> <span class="bp">NSDictionary</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Bool</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">URLCache</span> <span class="o">=</span> <span class="bp">NSURLCache</span><span class="p">(</span><span class="nl">memoryCapacity</span><span class="p">:</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span> <span class="nl">diskCapacity</span><span class="p">:</span> <span class="mi">20</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="p">,</span> <span class="nl">diskPath</span><span class="p">:</span> <span class="nb">nil</span><span class="p">)</span>
    <span class="bp">NSURLCache</span><span class="p">.</span><span class="n">setSharedURLCache</span><span class="p">(</span><span class="n">URLCache</span><span class="p">)</span>

    <span class="k">return</span> <span class="nb">true</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span>
    <span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
<span class="p">{</span>
  <span class="bp">NSURLCache</span> <span class="o">*</span><span class="n">URLCache</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSURLCache</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithMemoryCapacity</span><span class="p">:</span><span class="mi">4</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
                                                       <span class="nl">diskCapacity</span><span class="p">:</span><span class="mi">20</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span>
                                                           <span class="nl">diskPath</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
  <span class="p">[</span><span class="bp">NSURLCache</span> <span class="nl">setSharedURLCache</span><span class="p">:</span><span class="n">URLCache</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p>Caching policies are specified in both the request (by the client) and in the response (by the server). Understanding these policies and how they relate to one another is essential to finding the optimal behavior for your application.</p>

<h2 id="nsurlrequestcachepolicy"><code>NSURLRequestCachePolicy</code></h2>

<p><code>NSURLRequest</code> has a <code>cachePolicy</code> property, which specifies the caching behavior of the request according to the following constants:</p>

<ul>
<li><code>NSURLRequestUseProtocolCachePolicy</code>: Caching logic defined in the protocol implementation is used for a particular URL load request. This is the default policy.</li>
<li><code>NSURLRequestReloadIgnoringLocalCacheData</code>: Data should be loaded from the originating source. No existing cache data should be used.</li>
<li><code>NSURLRequestReloadIgnoringLocalAndRemoteCacheData</code>: Not only should the local cache data be ignored, but proxies and other intermediates should be instructed to disregard their caches so far as the protocol allows.</li>
<li><code>NSURLRequestReturnCacheDataElseLoad</code>: Existing cached data should be used, regardless of its age or expiration date. If there is no existing data in the cache corresponding to the request, the data is loaded from the originating source.</li>
<li><code>NSURLRequestReturnCacheDataDontLoad</code>: Existing cache data should be used, regardless of its age or expiration date. If there is no existing data in the cache corresponding to the request, no attempt is made to load the data from the originating source, and the load is considered to have failed, (i.e. &ldquo;offline&rdquo; mode).</li>
<li><code>NSURLRequestReloadRevalidatingCacheData</code>: Existing cache data may be used provided the origin source confirms its validity, otherwise the URL is loaded from the origin source.</li>
</ul>

<p>It may not surprise you that these values are poorly understood and often confused with one another.</p>

<p>Adding to the confusion is the fact that <code>NSURLRequestReloadIgnoringLocalAndRemoteCacheData</code> and <code>NSURLRequestReloadRevalidatingCacheData</code> <a href="https://gist.github.com/mattt/4753073#file-nsurlrequest-h-L95-L108"><em>aren&rsquo;t even implemented</em></a>! (<a href="http://openradar.appspot.com/radar?id=1755401">Link to Radar</a>).</p>

<p>So here&rsquo;s what you <em>actually</em> need to know about <code>NSURLRequestCachePolicy</code>:</p>

<table>
  <thead>
    <tr>
      <th>Constant</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><tt>UseProtocolCachePolicy</tt></td>
      <td>Default behavior</td>
    </tr>
    <tr>
      <td><tt>ReloadIgnoringLocalCacheData</tt></td>
      <td>Don&rsquo;t use the cache</td>
    </tr>
    <tr>
      <td><del><tt>ReloadIgnoringLocalAndRemoteCacheData</tt></del></td>
      <td><del>Seriously, don&rsquo;t use the cache</del></td>
    </tr>
    <tr>
      <td><tt>ReturnCacheDataElseLoad</tt></td>
      <td>Use the cache (no matter how out of date), or if no cached response exists, load from the network</td>
    </tr>
    <tr>
      <td><tt>ReturnCacheDataDontLoad</tt></td>
      <td>Offline mode: use the cache (no matter how out of date), but <em>don&rsquo;t</em> load from the network</td>
    </tr>
    <tr>
      <td><del><tt>ReloadRevalidatingCacheData</tt></del></td>
      <td><del>Validate cache against server before using</del></td>
    </tr>
  </tbody>
</table>

<h2 id="http-cache-semantics">HTTP Cache Semantics</h2>

<p>Because <code>NSURLConnection</code> is designed to support multiple protocols—including both <code>FTP</code> and <code>HTTP</code>/<code>HTTPS</code>—the URL Loading System APIs specify caching in a protocol-agnostic fashion. For the purposes of this article, caching will be explained in terms of HTTP semantics.</p>

<p>HTTP requests and responses use <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html">headers</a> to communicate metadata such as character encoding, MIME type, and caching directives.</p>

<h3 id="request-cache-headers">Request Cache Headers</h3>

<p>By default, <code>NSURLRequest</code> will use the current time to determine whether a cached response should be returned. For more precise cache control, the following headers can be specified:</p>

<ul>
<li><code>If-Modified-Since</code> - This request header corresponds to the <code>Last-Modified</code> response header. Set the value of this to the <code>Last-Modified</code> value received from the last request to the same endpoint.</li>
<li><code>If-None-Match</code> - This request header corresponds to the <code>Etag</code> response header. Use the <code>Etag</code> value received previously for the last request to that endpoint.</li>
</ul>

<h3 id="response-cache-headers">Response Cache Headers</h3>

<p>An <code>NSHTTPURLResponse</code> contains a set of HTTP headers, which can include the following directives for how that response should be cached:</p>

<ul>
<li><code>Cache-Control</code> - This header must be present in the response from the server to enable HTTP caching by a client. The value of this header may include information like its <code>max-age</code> (how long to cache a response), and whether the response may be cached with <code>public</code> or <code>private</code> access, or <code>no-cache</code> (not at all). See the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.9"><code>Cache-Control</code> section of RFC 2616</a> for full details.</li>
</ul>

<p>In addition to <code>Cache-Control</code>, a server may send additional headers that can be used to conditionally request information as needed (as mentioned in the previous section):</p>

<ul>
<li><code>Last-Modified</code> - The value of this header corresponds to the date and time when the requested resource was last changed. For example, if a client requests a timeline of recent photos, <code>/photos/timeline</code>, the <code>Last-Modified</code>
value could be set to when the most recent photo was taken.</li>
<li><code>Etag</code> - An abbreviation for &ldquo;entity tag&rdquo;, this is an identifier that represents the contents requested resource. In practice, an <code>Etag</code> header value could be something like the <a href="http://en.wikipedia.org/wiki/MD5"><code>MD5</code></a> digest of the resource properties. This is particularly useful for dynamically generated resources that may not have an obvious <code>Last-Modified</code> value.</li>
</ul>

<h2 id="nsurlconnectiondelegate"><code>NSURLConnectionDelegate</code></h2>

<p>Once the server response has been received, the <code>NSURLConnection</code> delegate has an opportunity to specify the cached response in <code>-connection:willCacheResponse:</code>.</p>

<p><code>NSCachedURLResponse</code> is a class that contains both an <code>NSURLResponse</code> with the cached <code>NSData</code> associated with the response.</p>

<p>In <code>-connection:willCacheResponse:</code>, the <code>cachedResponse</code> object has been automatically created from the result of the URL connection. Because there is no mutable counterpart to <code>NSCachedURLResponse</code>, in order to change anything about <code>cachedResponse</code>, a new object must be constructed, passing any modified values into <code>–initWithResponse:data:userInfo:storagePolicy:</code>, for instance:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// MARK: NSURLConnectionDataDelegate</span>

<span class="k">func</span> <span class="n">connection</span><span class="p">(</span><span class="nl">connection</span><span class="p">:</span> <span class="bp">NSURLConnection</span><span class="o">!</span><span class="p">,</span> <span class="n">willCacheResponse</span> <span class="nl">cachedResponse</span><span class="p">:</span> <span class="bp">NSCachedURLResponse</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">NSCachedURLResponse</span><span class="o">!</span> <span class="p">{</span>
    <span class="k">var</span> <span class="n">mutableUserInfo</span> <span class="o">=</span> <span class="bp">NSMutableDictionary</span><span class="p">(</span><span class="nl">dictionary</span><span class="p">:</span> <span class="n">cachedResponse</span><span class="p">.</span><span class="n">userInfo</span><span class="p">)</span>
    <span class="k">var</span> <span class="n">mutableData</span> <span class="o">=</span> <span class="bp">NSMutableData</span><span class="p">(</span><span class="nl">data</span><span class="p">:</span> <span class="n">cachedResponse</span><span class="p">.</span><span class="n">data</span><span class="p">)</span>
    <span class="k">var</span> <span class="nl">storagePolicy</span><span class="p">:</span> <span class="n">NSURLCacheStoragePolicy</span> <span class="o">=</span> <span class="p">.</span><span class="n">AllowedInMemoryOnly</span>

    <span class="c1">// ...</span>

    <span class="k">return</span> <span class="bp">NSCachedURLResponse</span><span class="p">(</span><span class="nl">response</span><span class="p">:</span> <span class="n">cachedResponse</span><span class="p">.</span><span class="n">response</span><span class="p">,</span> <span class="nl">data</span><span class="p">:</span> <span class="n">mutableData</span><span class="p">,</span> <span class="nl">userInfo</span><span class="p">:</span> <span class="n">mutableUserInfo</span><span class="p">,</span> <span class="nl">storagePolicy</span><span class="p">:</span> <span class="n">storagePolicy</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">-</span> <span class="p">(</span><span class="bp">NSCachedURLResponse</span> <span class="o">*</span><span class="p">)</span><span class="nf">connection:</span><span class="p">(</span><span class="bp">NSURLConnection</span> <span class="o">*</span><span class="p">)</span><span class="nv">connection</span>
                  <span class="nf">willCacheResponse:</span><span class="p">(</span><span class="bp">NSCachedURLResponse</span> <span class="o">*</span><span class="p">)</span><span class="nv">cachedResponse</span>
<span class="p">{</span>
    <span class="bp">NSMutableDictionary</span> <span class="o">*</span><span class="n">mutableUserInfo</span> <span class="o">=</span> <span class="p">[[</span><span class="n">cachedResponse</span> <span class="n">userInfo</span><span class="p">]</span> <span class="n">mutableCopy</span><span class="p">];</span>
    <span class="bp">NSMutableData</span> <span class="o">*</span><span class="n">mutableData</span> <span class="o">=</span> <span class="p">[[</span><span class="n">cachedResponse</span> <span class="n">data</span><span class="p">]</span> <span class="n">mutableCopy</span><span class="p">];</span>
    <span class="n">NSURLCacheStoragePolicy</span> <span class="n">storagePolicy</span> <span class="o">=</span> <span class="n">NSURLCacheStorageAllowedInMemoryOnly</span><span class="p">;</span>

    <span class="c1">// ...</span>

    <span class="k">return</span> <span class="p">[[</span><span class="bp">NSCachedURLResponse</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithResponse</span><span class="p">:[</span><span class="n">cachedResponse</span> <span class="n">response</span><span class="p">]</span>
                                                    <span class="nl">data</span><span class="p">:</span><span class="n">mutableData</span>
                                                <span class="nl">userInfo</span><span class="p">:</span><span class="n">mutableUserInfo</span>
                                           <span class="nl">storagePolicy</span><span class="p">:</span><span class="n">storagePolicy</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p>If <code>-connection:willCacheResponse:</code> returns <code>nil</code>, the response will not be cached.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">func</span> <span class="n">connection</span><span class="p">(</span><span class="nl">connection</span><span class="p">:</span> <span class="bp">NSURLConnection</span><span class="o">!</span><span class="p">,</span> <span class="n">willCacheResponse</span> <span class="nl">cachedResponse</span><span class="p">:</span> <span class="bp">NSCachedURLResponse</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">NSCachedURLResponse</span><span class="o">!</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">nil</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">-</span> <span class="p">(</span><span class="bp">NSCachedURLResponse</span> <span class="o">*</span><span class="p">)</span><span class="nf">connection:</span><span class="p">(</span><span class="bp">NSURLConnection</span> <span class="o">*</span><span class="p">)</span><span class="nv">connection</span>
                  <span class="nf">willCacheResponse:</span><span class="p">(</span><span class="bp">NSCachedURLResponse</span> <span class="o">*</span><span class="p">)</span><span class="nv">cachedResponse</span>
<span class="p">{</span>
    <span class="k">return</span> <span class="nb">nil</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>When left unimplemented, <code>NSURLConnection</code> will simply use the cached response that would otherwise be passed into <code>-connection:willCacheResponse:</code>, so unless you need to change or prevent caching, this method does not need to be implemented in the delegate.</p>

<h2 id="caveats">Caveats</h2>

<p>Just like its unrelated-but-similarly-named cohort, <a href="http://nshipster.com/nscache/"><code>NSCache</code></a>, <code>NSURLCache</code> is not without some peculiarities.</p>

<p>As of iOS 5, disk caching is supported, but only for HTTP, not HTTPS, requests (though iOS 6 added support for this). Peter Steinberger <a href="http://petersteinberger.com/blog/2012/nsurlcache-uses-a-disk-cache-as-of-ios5/">wrote an excellent article on this subject</a>, after digging into the internals while implementing <a href="https://github.com/steipete/SDURLCache">his own NSURLCache subclass</a>.</p>

<p><a href="http://blackpixel.com/blog/2012/05/caching-and-nsurlconnection.html">Another article by Daniel Pasco at Black Pixel</a> describes some unexpected default behavior when communicating with servers that don&rsquo;t set cache headers.</p>

<hr>

<p><code>NSURLCache</code> reminds us of how important it is to be familiar with the systems we interact with. Chief among them when developing for iOS or OS X is, of course, the <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i">URL Loading System</a>.</p>

<p>Untold numbers of developers have hacked together an awkward, fragile system for network caching functionality, all because they weren&rsquo;t aware that <code>NSURLCache</code> could be setup in two lines and do it 100× better. Even more developers have never known the benefits of network caching, and never attempted a solution, causing their apps to make untold numbers of unnecessary requests to the server.</p>

<p>So be the change you want to see in the world, and be sure to always start you app on the right foot, by setting a shared <code>NSURLCache</code> in <code>-application:didFinishLaunchingWithOptions:</code>.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2013-02-11-nsurlcache.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
        
            <em>This article uses Swift version 1.1.</em>
        
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/reactivecocoa/" title="ReactiveCocoa" rel="next">Reactive​Cocoa</a>
            </h1>

            <p>Breaking from a tradition of covering Apple APIs exclusively, this edition of NSHipster will look at an open source project that exemplifies a brave new era of open source contribution to Objective-C: ReactiveCocoa.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/nsorderedset/" title="NSOrderedSet">NSOrderedSet</a>
            </li>
            
          
          
            <li>
              <a href="/uiaccessibility/" title="UIAccessibility">UIAccessibility</a>
            </li>
            
          
          
            <li>
              <a href="/avspeechsynthesizer/" title="AVSpeechSynthesizer">AVSpeechSynthesizer</a>
            </li>
            
          
          
            <li>
              <a href="/core-location-in-ios-8/" title="Core Location in iOS 8">Core Location in iOS 8</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
