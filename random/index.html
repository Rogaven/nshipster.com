<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>rand(3) / random(3) / arc4random(3) / et al. - NSHipster</title>
    <meta name="description" content="What passes for randomness is merely a hidden chain of causality. Of course, app developers could care less about philosophy—what they want is code. Thus, our goal this week: to clear up all of the lingering questions and misunderstandings about doing random things in Objective-C"/>
    <link rel="canonical" href="http://nshipster.com/random/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="rand(3) / random(3) / arc4random(3) / et al."/>
    <meta name="twitter:description" content="What passes for randomness is merely a hidden chain of causality. Of course, app developers could care less about philosophy—what they want is code. Thus, our goal this week: to clear up all of the lingering questions and misunderstandings about doing random things in Objective-C"/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="rand(3) / random(3) / arc4random(3) / et al."/>
    <meta property="og:url" content="http://nshipster.com/random/"/>
    <meta property="og:description" content="What passes for randomness is merely a hidden chain of causality. Of course, app developers could care less about philosophy—what they want is code. Thus, our goal this week: to clear up all of the lingering questions and misunderstandings about doing random things in Objective-C"/>
    <meta property="article:published_time" content="2013-08-12T00:00:00-07:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:06:40-08:00"/>
    <meta property="article:tag" content="objective-c"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="rand(3) / random(3) / arc4random(3) / et al."/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/random/">rand(3) / random(3) / arc4random(3) / et al.</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2013-08-12T00:00:00-07:00" itemprop="datePublished">August 12<sup>th</sup>, 2013</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>What passes for randomness is merely a hidden chain of causality.</p>

<p>In a mechanical universe of material interactions expressed through mathematical equations, it is unclear whether nature encodes an element of chance, or if it&rsquo;s a uniquely human way to reconcile uncertainty.</p>

<p>We can be sure of one thing, however: in the closed, digital universe of CPU cycles, processes, and threads, there is no true randomness, only <em>pseudorandomness</em>.</p>

<p>Pseudorandomness, is often implemented in a way very similar to a <a href="http://en.wikipedia.org/wiki/Cryptographic_hash_function">cryptographic hash</a>, as a deterministic function that returns a value based on the current time (salted, of course, by some initial seed value). Also like hash functions, there are a number of <acronym>PRNG</acronym>, or pseudorandom number generators, each of which are optimized for particular performance characteristics: uniformity, periodicity, and computational complexity.</p>

<p>Of course, for app developers, all of this is an academic exercise. And rather than bore you with any more high-minded, long-winded treatises on the philosophical nature of randomness, we&rsquo;re going to tackle this one FAQ-style.</p>

<p>Our goal this week: to clear up all of the lingering questions and misunderstandings about doing random things in Objective-C. Let&rsquo;s dive in!</p>

<hr>

<h2 id="how-do-i-generate-a-random-number-in-objective-c?">How Do I Generate a Random Number in Objective-C?</h2>

<p><em>tl;dr</em>: <strong>Use <code>arc4random()</code> and its related functions.</strong></p>

<p>Specifically, to generate a random number between <code>0</code> and <code>N - 1</code>, use <code>arc4random_uniform()</code>, which avoids <a href="http://eternallyconfuzzled.com/arts/jsw_art_rand.aspx">modulo bias</a>.</p>

<h3 id="random-int-between-0-and-n---1">Random <code>int</code> between <code>0</code> and <code>N - 1</code></h3>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSUInteger</span> <span class="n">r</span> <span class="o">=</span> <span class="n">arc4random_uniform</span><span class="p">(</span><span class="n">N</span><span class="p">);</span>
</code></pre></div>
<h3 id="random-int-between-1-and-n">Random <code>int</code> between <code>1</code> and <code>N</code></h3>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSUInteger</span> <span class="n">r</span> <span class="o">=</span> <span class="n">arc4random_uniform</span><span class="p">(</span><span class="n">N</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
</code></pre></div>
<h3 id="random-double-between-0-and-1">Random <code>double</code> between <code>0</code> and <code>1</code></h3>

<p>If you are generating a random <code>double</code> or <code>float</code>, another good option is the more obscure <code>rand48</code> family of functions, including <code>drand48(3)</code>.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">srand48</span><span class="p">(</span><span class="n">time</span><span class="p">(</span><span class="mi">0</span><span class="p">));</span>
<span class="kt">double</span> <span class="n">r</span> <span class="o">=</span> <span class="n">drand48</span><span class="p">();</span>
</code></pre></div>
<blockquote>
<p><code>rand48</code> functions, unlike <code>arc4random</code> functions, require an initial value to be seeded before generating random numbers. This seed function, <code>srand48(3)</code>, should only be run once.</p>
</blockquote>

<h2 id="how-do-i-pick-a-random-element-from-an-nsarray?">How Do I Pick a Random Element from an <code>NSArray</code>?</h2>

<p>Use <code>arc4random_uniform(3)</code> to generate a random number in the range of a non-empty array.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">if</span> <span class="p">([</span><span class="n">array</span> <span class="n">count</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">id</span> <span class="n">obj</span> <span class="o">=</span> <span class="n">array</span><span class="p">[</span><span class="n">arc4random_uniform</span><span class="p">([</span><span class="n">array</span> <span class="n">count</span><span class="p">])];</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="how-do-i-randomly-order-an-nsarray?">How Do I Randomly Order an <code>NSArray</code>?</h2>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSMutableArray</span> <span class="o">*</span><span class="n">mutableArray</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSMutableArray</span> <span class="nl">arrayWithArray</span><span class="p">:</span><span class="n">array</span><span class="p">];</span>
<span class="bp">NSUInteger</span> <span class="n">count</span> <span class="o">=</span> <span class="p">[</span><span class="n">mutableArray</span> <span class="n">count</span><span class="p">];</span>
<span class="c1">// See http://en.wikipedia.org/wiki/Fisher–Yates_shuffle</span>
<span class="k">if</span> <span class="p">(</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="bp">NSUInteger</span> <span class="n">i</span> <span class="o">=</span> <span class="n">count</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span> <span class="o">--</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="p">[</span><span class="n">mutableArray</span> <span class="nl">exchangeObjectAtIndex</span><span class="p">:</span><span class="n">i</span> <span class="nl">withObjectAtIndex</span><span class="p">:</span><span class="n">arc4random_uniform</span><span class="p">((</span><span class="kt">int32_t</span><span class="p">)(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))];</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="bp">NSArray</span> <span class="o">*</span><span class="n">randomArray</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSArray</span> <span class="nl">arrayWithArray</span><span class="p">:</span><span class="n">mutableArray</span><span class="p">];</span>
</code></pre></div>
<blockquote>
<p>This code is borrowed from <a href="https://github.com/mattt/TTTRandomizedEnumerator">TTTRandomizedEnumerator</a>, which also provides randomized enumerators for <code>NSSet</code>, <code>NSOrderedSet</code>, and <code>NSDictionary</code>.</p>
</blockquote>

<h2 id="how-do-i-generate-a-random-string?">How Do I Generate a Random String?</h2>

<p>If you&rsquo;re looking to generate &ldquo;<a href="http://en.wikipedia.org/wiki/Lorem_ipsum">lorem ipsum</a>&rdquo;-style sentences, try constructing a <a href="http://en.wikipedia.org/wiki/Markov_chain">Markov Chain</a> from a <a href="http://en.wikipedia.org/wiki/Text_corpus">corpus</a>.</p>

<p>Otherwise, if you&rsquo;re looking to just get random letters, try one of the following methods:</p>

<h3 id="generate-a-random-lowercase-nsstring">Generate a Random Lowercase <code>NSString</code></h3>

<p>If you are operating on a known, contiguous range of Unicode characters, such as the lowercase letters (<code>U+0061</code> — <code>U+007A</code>), you can do a simple conversion from a <code>char</code>:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">letter</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span><span class="s">@&quot;%c&quot;</span><span class="p">,</span> <span class="n">arc4random_uniform</span><span class="p">(</span><span class="mi">26</span><span class="p">)</span> <span class="o">+</span> <span class="sc">&#39;a&#39;</span><span class="p">];</span>
</code></pre></div>
<h3 id="pick-a-random-character-from-an-nsstring">Pick a Random Character From an <code>NSString</code></h3>

<p>Otherwise, a simple way to pick random letters from a set of your choosing is to simply create a string containing all of the possible letters:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">vowels</span> <span class="o">=</span> <span class="s">@&quot;aeiouy&quot;</span><span class="p">;</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">letter</span> <span class="o">=</span> <span class="p">[</span><span class="n">vowels</span> <span class="nl">substringWithRange</span><span class="p">:</span><span class="n">NSMakeRange</span><span class="p">(</span><span class="n">arc4random_uniform</span><span class="p">([</span><span class="n">vowels</span> <span class="n">length</span><span class="p">]),</span> <span class="mi">1</span><span class="p">)];</span>
</code></pre></div>
<h2 id="why-should-i-use-arc4random(3)-instead-of-rand(3)-or-random(3)?">Why Should I Use <code>arc4random(3)</code> instead of <code>rand(3)</code> or <code>random(3)</code>?</h2>

<blockquote>
<p>C functions are typically denoted with a number <code>3</code> inside of parentheses, following the organizational convention of <a href="http://en.wikipedia.org/wiki/Man_page#Manual_sections"><code>man</code> pages</a>.</p>
</blockquote>

<ul>
<li><code>arc4random</code> does not require an initial seed (with <code>srand</code> or <code>srandom</code>), making it that much easier to use.</li>
<li><code>arc4random</code> has a range up to <code>0x100000000 (4294967296)</code>, whereas <code>rand</code> and <code>random</code> top out at <code>RAND_MAX = 0x7fffffff (2147483647)</code>.</li>
<li><code>rand</code> has often been implemented in a way that regularly cycles low bits, making it more predictable.</li>
</ul>

<h2 id="what-are-rand(3),-random(3),-and-arc4random(3),-and-where-do-they-come-from?">What are <code>rand(3)</code>, <code>random(3)</code>, and <code>arc4random(3)</code>, and Where Do They Come From?</h2>

<ul>
<li><code>rand</code> is a standard C function.</li>
<li><code>random</code> is <a href="http://pubs.opengroup.org/onlinepubs/009695399/functions/initstate.html">defined as part of the POSIX standard</a>.</li>
<li><code>arc4random</code> is provided on BSD and derived platforms.</li>
</ul>

<hr>

<p>If you have any additional questions about randomness on Objective-C, feel free to tweet <a href="https://twitter.com/NSHipster">@NSHipster</a>. As always, corrections are welcome in the form of a <a href="https://github.com/NSHipster/articles/pulls">pull request</a>.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2013-08-12-random.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
            
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/nshashtable-and-nsmaptable/" title="NSHashTable & NSMapTable" rel="next">NSHash​Table & NSMap​Table</a>
            </h1>

            <p>NSSet and NSDictionary, along with NSArray are the workhorse collection classes of Foundation. Unlike other standard libraries, implementation details are hidden from developers, allowing them to write simple code and trust that it will be (reasonably) performant.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/instancetype/" title="instancetype">instancetype</a>
            </li>
            
          
          
            <li>
              <a href="/__attribute__/" title="__attribute__">__attribute__</a>
            </li>
            
          
          
            <li>
              <a href="/pragma/" title="#pragma">#pragma</a>
            </li>
            
          
          
            <li>
              <a href="/c-storage-classes/" title="C Storage Classes">C Storage Classes</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
