<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>UIApplicationDelegate launchOptions - NSHipster</title>
    <meta name="description" content="AppDelegate is the dumping ground for functionality in iOS."/>
    <link rel="canonical" href="http://nshipster.com/launch-options/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="UIApplicationDelegate launchOptions"/>
    <meta name="twitter:description" content="AppDelegate is the dumping ground for functionality in iOS."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="UIApplicationDelegate launchOptions"/>
    <meta property="og:url" content="http://nshipster.com/launch-options/"/>
    <meta property="og:description" content="AppDelegate is the dumping ground for functionality in iOS."/>
    <meta property="article:published_time" content="2013-12-16T00:00:00-08:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:34:50-08:00"/>
    <meta property="article:tag" content="cocoa"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="UIApplicationDelegate launchOptions"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/launch-options/">UIApplication​Delegate launch​Options</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2013-12-16T00:00:00-08:00" itemprop="datePublished">December 16<sup>th</sup>, 2013</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>AppDelegate is the dumping ground for functionality in iOS.</p>

<p>Application lifecycle management? URL routing? Notifications? Core Data incantations? Invasive and monolithic 3rd-party SDK initialization? Random functionality that doesn&rsquo;t seem to fit anywhere else? Just stash it in <code>AppDelegate.m</code>!</p>

<p>And of all of the crowded, over-loaded parts in AppDelegate, <code>-application:didFinishLaunchingWithOptions:</code> is the most congested of all.</p>

<p>For many developers, the <code>launchOptions</code> parameter is akin to the <code>String[] args</code> argument of a Java <code>main</code> method—something ignored in the rush to building an application. Hiding in plain sight, <code>launchOptions</code> contains a wealth of keyed knowledge that speaks to the multitude of ways an app can be launched on iOS.</p>

<p>This week, all will be revealed in this NSHipster tell-all about the least understood parameter of the most important method in UIKit: <code>launchOptions</code>.</p>

<hr>

<p>Every app begins with <code>UIApplicationDelegate -application:didFinishLaunchingWithOptions:</code> (or more accurately, <code>-application:willFinishLaunchingWithOptions:</code>, when implemented). It is called by the application to notify its delegate that the launch process is finishing, and nearly ready to run.</p>

<p>An app launches when its icon is tapped on <a href="http://en.wikipedia.org/wiki/SpringBoard">Springboard</a>, but there are several other occasions in which an app can be launched. For example, an app registered for a custom URL scheme, such as <code>twitter://</code>, could be launched as a result of opening a URL. An app could also be launched in response to a push notification, or a significant change in device location.</p>

<p>Determining why and how an app launched is the responsibility of the <code>launchOptions</code> parameter. Like a <code>userInfo</code> dictionary, <code>-application:didFinishLaunchingWithOptions:</code> can get information for particular named keys in <code>launchOptions</code>.</p>

<blockquote>
<p>Many of these keys are also available in the  <code>UIApplicationDidFinishLaunchingNotification</code> notification posted on application launch. Check the docs for additional details.</p>
</blockquote>

<p>Numerous as they are, <code>launchOptions</code> keys can be more easily understood when organized into groups, corresponding to why the app was launched:</p>

<h2 id="opening-from-url">Opening from URL</h2>

<p>Apps can launch other apps by passing URLs:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">[[</span><span class="bp">UIApplication</span> <span class="n">sharedApplication</span><span class="p">]</span> <span class="nl">openURL</span><span class="p">:[</span><span class="bp">NSURL</span> <span class="nl">URLWithString</span><span class="p">:</span><span class="s">@&quot;app://...&quot;</span><span class="p">]];</span>
</code></pre></div>
<p>For example, an <code>http://</code> URL would open in Safari, a <code>mailto://</code> URL would open in Mail, and a <code>tel://</code> URL would open in Phone.</p>

<p>In these circumstances, the <code>UIApplicationLaunchOptionsURLKey</code> key would be populated in <code>launchOptions</code>.</p>

<blockquote>
<ul>
<li><code>UIApplicationLaunchOptionsURLKey</code>: Indicates that the app was launched in order to open a URL. The value of this key is an <code>NSURL</code> object containing the URL to open.</li>
</ul>
</blockquote>

<p>An app can also be launched through URLs with additional system information. When an app is launched from an <code>UIDocumentInteractionController</code> or via AirDrop, the following keys are set in <code>launchOptions</code>:</p>

<blockquote>
<ul>
<li><code>UIApplicationLaunchOptionsSourceApplicationKey</code>: Identifies the app that requested the launch of your app. The value of this key is an <code>NSString</code> object that represents the bundle ID of the app that made the request</li>
<li><code>UIApplicationLaunchOptionsAnnotationKey</code>: Indicates that custom data was provided by the app that requested the opening of the URL. The value of this key is a property-list object containing the custom data.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSURL</span> <span class="o">*</span><span class="n">fileURL</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="nl">URLForResource</span><span class="p">:</span><span class="s">@&quot;Document&quot;</span> <span class="nl">withExtension</span><span class="p">:</span><span class="s">@&quot;pdf&quot;</span><span class="p">];</span>
<span class="k">if</span> <span class="p">(</span><span class="n">fileURL</span><span class="p">)</span> <span class="p">{</span>
    <span class="bp">UIDocumentInteractionController</span> <span class="o">*</span><span class="n">documentInteractionController</span> <span class="o">=</span> <span class="p">[</span><span class="bp">UIDocumentInteractionController</span> <span class="nl">interactionControllerWithURL</span><span class="p">:</span><span class="n">fileURL</span><span class="p">];</span>
    <span class="n">documentInteractionController</span><span class="p">.</span><span class="n">annotation</span> <span class="o">=</span> <span class="l">@{</span><span class="s">@&quot;foo&quot;</span><span class="o">:</span> <span class="s">@&quot;bar&quot;</span><span class="l">}</span><span class="p">;</span>
    <span class="p">[</span><span class="n">documentInteractionController</span> <span class="nl">setDelegate</span><span class="p">:</span><span class="nb">self</span><span class="p">];</span>
    <span class="p">[</span><span class="n">documentInteractionController</span> <span class="nl">presentPreviewAnimated</span><span class="p">:</span><span class="nb">YES</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="responding-to-notification">Responding to Notification</h2>

<p>Not to be confused with <a href="http://nshipster.com/nsnotification-and-nsnotificationcenter/"><code>NSNotification</code></a>, apps can be sent remote or local notifications.</p>

<h3 id="remote-notification">Remote Notification</h3>

<p>Introduced in iOS 3, remote, or &ldquo;push&rdquo; notifications are one of the defining features of the mobile platform.</p>

<p>To register for remote notifications, <code>registerForRemoteNotificationTypes:</code> is called in <code>application:didFinishLaunchingWithOptions:</code>.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">[</span><span class="n">application</span> <span class="nl">registerForRemoteNotificationTypes</span><span class="p">:</span>
    <span class="n">UIRemoteNotificationTypeBadge</span> <span class="o">|</span>
    <span class="n">UIRemoteNotificationTypeSound</span> <span class="o">|</span>
    <span class="n">UIRemoteNotificationTypeAlert</span><span class="p">];</span>
</code></pre></div>
<p>&hellip;which, if successful, calls  <code>-application:didRegisterForRemoteNotificationsWithDeviceToken:</code>. Once the device has been successfully registered, it can receive push notifications at any time.</p>

<p>If an app receives a notification while in the foreground, its delegate will call <code>application:didReceiveRemoteNotification:</code>. However, if the app is launched, perhaps by swiping the alert in notification center, <code>application:didFinishLaunchingWithOptions:</code> is called with the  <code>UIApplicationLaunchOptionsRemoteNotificationKey</code> launch option:</p>

<blockquote>
<ul>
<li><code>UIApplicationLaunchOptionsRemoteNotificationKey</code>: Indicates that a remote notification is available for the app to process. The value of this key is an <code>NSDictionary</code> containing the payload of the remote notification.
&gt; - <code>alert</code>: Either a string for the alert message or a dictionary with two keys: <code>body</code> and <code>show-view</code>.
&gt; - <code>badge</code>: A number indicating the quantity of data items to download from the provider. This number is to be displayed on the app icon. The absence of a badge property indicates that any number currently badging the icon should be removed.
&gt; - <code>sound</code>: The name of a sound file in the app bundle to play as an alert sound. If “default” is specified, the default sound should be played.</li>
</ul>
</blockquote>

<p>Since this introduces two separate code paths for notification handling, a common approach is to have <code>application:didFinishLaunchingWithOptions:</code> manually call <code>application:didReceiveRemoteNotification:</code>:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">application:</span><span class="p">(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="nv">application</span>
<span class="nf">didFinishLaunchingWithOptions:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">launchOptions</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">launchOptions</span><span class="p">[</span><span class="n">UIApplicationLaunchOptionsRemoteNotificationKey</span><span class="p">])</span> <span class="p">{</span>
        <span class="p">[</span><span class="nb">self</span> <span class="nl">application</span><span class="p">:</span><span class="n">application</span> <span class="nl">didReceiveRemoteNotification</span><span class="p">:</span><span class="n">launchOptions</span><span class="p">[</span><span class="n">UIApplicationLaunchOptionsRemoteNotificationKey</span><span class="p">]];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="local-notification">Local Notification</h3>

<p><a href="https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Chapters/IPhoneOSClientImp.html#//apple_ref/doc/uid/TP40008194-CH103-SW1">Local notifications</a> were added in iOS 4, and to this day, are still surprisingly misunderstood.</p>

<p>Apps can schedule <code>UILocalNotification</code>s to trigger at some future time or interval. If the app is active in the foreground at that time, the app calls <code>-application:didReceiveLocalNotification:</code> on its delegate. However, if the app is not active, the notification will be posted to Notification Center.</p>

<p>Unlike remote notifications, <code>UIApplication</code> delegate provides a unified code path for handling local notifications. If an app is launched through a local notification, it calls <code>-application:didFinishLaunchingWithOptions:</code> followed by <code>-application:didReceiveLocalNotification:</code> (that is, there is no need to call it from <code>-application:didFinishLaunchingWithOptions:</code> like remote notifications).</p>

<p>A local notification populates the launch options on <code>UIApplicationLaunchOptionsLocalNotificationKey</code>, which contains a payload with the same structure as a remote notification:</p>

<ul>
<li><code>UIApplicationLaunchOptionsLocalNotificationKey</code>: Indicates that a local notification is available for the app to process. The value of this key is an <code>NSDictionary</code> containing the payload of the local notification.</li>
</ul>

<p>In the case where it is desirable to show an alert for a local notification delivered when the app is active in the foreground, and otherwise wouldn&rsquo;t provide a visual indication, here&rsquo;s how one might use the information from <code>UILocalNotification</code> to do it manually:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">// .h</span>
<span class="p">@</span><span class="n">import</span> <span class="n">AVFoundation</span><span class="p">;</span>

<span class="k">@interface</span> <span class="nc">AppDelegate</span> <span class="p">()</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">readwrite</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">,</span> <span class="k">assign</span><span class="p">)</span> <span class="n">SystemSoundID</span> <span class="n">localNotificationSound</span><span class="p">;</span>
<span class="k">@end</span>

<span class="c1">// .m</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">application</span><span class="p">:(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="n">application</span>
<span class="nl">didReceiveLocalNotification</span><span class="p">:(</span><span class="bp">UILocalNotification</span> <span class="o">*</span><span class="p">)</span><span class="n">notification</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">application</span><span class="p">.</span><span class="n">applicationState</span> <span class="o">==</span> <span class="n">UIApplicationStateActive</span><span class="p">)</span> <span class="p">{</span>
        <span class="bp">UIAlertView</span> <span class="o">*</span><span class="n">alertView</span> <span class="o">=</span>
            <span class="p">[[</span><span class="bp">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle</span><span class="p">:</span><span class="n">notification</span><span class="p">.</span><span class="n">alertAction</span>
                                       <span class="nl">message</span><span class="p">:</span><span class="n">notification</span><span class="p">.</span><span class="n">alertBody</span>
                                      <span class="nl">delegate</span><span class="p">:</span><span class="nb">nil</span>
                             <span class="nl">cancelButtonTitle</span><span class="p">:</span><span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;OK&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">)</span>
                             <span class="nl">otherButtonTitles</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">self</span><span class="p">.</span><span class="n">localNotificationSound</span><span class="p">)</span> <span class="p">{</span>
            <span class="bp">NSURL</span> <span class="o">*</span><span class="n">soundURL</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSBundle</span> <span class="n">mainBundle</span><span class="p">]</span> <span class="nl">URLForResource</span><span class="p">:</span><span class="s">@&quot;Sosumi&quot;</span>
                                                      <span class="nl">withExtension</span><span class="p">:</span><span class="s">@&quot;wav&quot;</span><span class="p">];</span>
            <span class="n">AudioServicesCreateSystemSoundID</span><span class="p">((</span><span class="k">__bridge</span> <span class="n">CFURLRef</span><span class="p">)</span><span class="n">soundURL</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_localNotificationSound</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">AudioServicesPlaySystemSound</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">localNotificationSound</span><span class="p">);</span>

        <span class="p">[</span><span class="n">alertView</span> <span class="n">show</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">applicationWillTerminate</span><span class="p">:(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="n">application</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">localNotificationSound</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">AudioServicesDisposeSystemSoundID</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">localNotificationSound</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="location-event">Location Event</h2>

<p>Building the next great geomobilelocalsocial check-in photo app? Well, you&rsquo;re about 4 years late to the party.</p>

<p>But fear not! With iOS region monitoring, your app can be launched on location events:</p>

<blockquote>
<ul>
<li><code>UIApplicationLaunchOptionsLocationKey</code>: Indicates that the app was launched in response to an incoming location event. The value of this key is an <code>NSNumber</code> object containing a Boolean value. You should use the presence of this key as a signal to create a <code>CLLocationManager</code> object and start location services again. Location data is delivered only to the location manager delegate and not using this key.</li>
</ul>
</blockquote>

<p>Here&rsquo;s an example of how an app might go about monitoring for significant location change to determine launch behavior:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">// .h</span>
<span class="p">@</span><span class="n">import</span> <span class="n">CoreLocation</span><span class="p">;</span>

<span class="k">@interface</span> <span class="nc">AppDelegate</span> <span class="p">()</span> <span class="o">&lt;</span><span class="bp">CLLocationManagerDelegate</span><span class="o">&gt;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">readwrite</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="bp">CLLocationManager</span> <span class="o">*</span><span class="n">locationManager</span><span class="p">;</span>
<span class="k">@end</span>

<span class="c1">// .m</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nl">application</span><span class="p">:(</span><span class="bp">UIApplication</span> <span class="o">*</span><span class="p">)</span><span class="n">application</span>
<span class="nl">didFinishLaunchingWithOptions</span><span class="p">:(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="n">launchOptions</span>
<span class="p">{</span>
    <span class="c1">// ...</span>

    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">[</span><span class="bp">CLLocationManager</span> <span class="n">locationServicesEnabled</span><span class="p">])</span> <span class="p">{</span>
        <span class="p">[[[</span><span class="bp">UIAlertView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle</span><span class="p">:</span><span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;Location Services Disabled&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">)</span>
                                    <span class="nl">message</span><span class="p">:</span><span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;You currently have all location services for this device disabled. If you proceed, you will be asked to confirm whether location services should be reenabled.&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">)</span>
                                   <span class="nl">delegate</span><span class="p">:</span><span class="nb">nil</span>
                          <span class="nl">cancelButtonTitle</span><span class="p">:</span><span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;OK&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">)</span>
                          <span class="nl">otherButtonTitles</span><span class="p">:</span><span class="nb">nil</span><span class="p">]</span> <span class="n">show</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nb">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">CLLocationManager</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
        <span class="nb">self</span><span class="p">.</span><span class="n">locationManager</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">startMonitoringSignificantLocationChanges</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">launchOptions</span><span class="p">[</span><span class="n">UIApplicationLaunchOptionsLocationKey</span><span class="p">])</span> <span class="p">{</span>
        <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">locationManager</span> <span class="n">startUpdatingLocation</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="newsstand">Newsstand</h2>

<p><em>All of the Newsstand developers in the house: say &ldquo;Yeah!&rdquo;</em></p>

<p><em><code>crickets.aiff</code></em></p>

<p>Well alright, then.</p>

<p>Newsstand can launch when newly-downloaded assets are available.</p>

<p>This is how you register:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">[</span><span class="n">application</span> <span class="nl">registerForRemoteNotificationTypes</span><span class="p">:</span>
    <span class="n">UIRemoteNotificationTypeNewsstandContentAvailability</span><span class="p">];</span>
</code></pre></div>
<p>And this is the key to look out for in <code>launchOptions</code>:</p>

<blockquote>
<ul>
<li><code>UIApplicationLaunchOptionsNewsstandDownloadsKey</code>: Indicates that newly downloaded Newsstand assets are available for your app. The value of this key is an array of string identifiers that identify the <code>NKAssetDownload</code> objects corresponding to the assets. Although you can use the identifiers for cross-checking purposes, you should obtain the definitive array of <code>NKAssetDownload</code> objects (representing asset downloads in progress or in error) through the downloadingAssets property of the <code>NKLibrary</code> object representing the Newsstand app’s library.</li>
</ul>
</blockquote>

<p>Not too much more to say about that.</p>

<h2 id="bluetooth">Bluetooth</h2>

<p>iOS 7 introduced functionality that allows apps to be relaunched by Bluetooth peripherals.</p>

<p>If an app launches, instantiates a <code>CBCentralManager</code> or <code>CBPeripheralManager</code> with a particular identifier, and connects to other Bluetooth peripherals, the app can be re-launched by certain actions from the Bluetooth system. Depending on whether it was a central or peripheral manager that was notified, one of the following keys will be passed into <code>launchOptions</code>:</p>

<blockquote>
<ul>
<li><code>UIApplicationLaunchOptionsBluetoothCentralsKey</code>: Indicates that the app previously had one or more <code>CBCentralManager</code> objects and was relaunched by the Bluetooth system to continue actions associated with those objects. The value of this key is an <code>NSArray</code> object containing one or more <code>NSString</code> objects. Each string in the array represents the restoration identifier for a central manager object.</li>
<li><code>UIApplicationLaunchOptionsBluetoothPeripheralsKey</code>:  Indicates that the app previously had one or more <code>CBPeripheralManager</code> objects and was relaunched by the Bluetooth system to continue actions associated with those objects. The value of this key is an <code>NSArray</code> object containing one or more <code>NSString</code> objects. Each string in the array represents the restoration identifier for a peripheral manager object.</li>
</ul>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="c1">// .h</span>
<span class="p">@</span><span class="n">import</span> <span class="n">CoreBluetooth</span><span class="p">;</span>

<span class="k">@interface</span> <span class="nc">AppDelegate</span> <span class="p">()</span> <span class="o">&lt;</span><span class="bp">CBCentralManagerDelegate</span><span class="o">&gt;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">readwrite</span><span class="p">,</span> <span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="bp">CBCentralManager</span> <span class="o">*</span><span class="n">centralManager</span><span class="p">;</span>
<span class="k">@end</span>

<span class="c1">// .m</span>
<span class="nb">self</span><span class="p">.</span><span class="n">centralManager</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">CBCentralManager</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithDelegate</span><span class="p">:</span><span class="nb">self</span> <span class="nl">queue</span><span class="p">:</span><span class="nb">nil</span> <span class="nl">options</span><span class="p">:</span><span class="l">@{</span><span class="nl">CBCentralManagerOptionRestoreIdentifierKey</span><span class="p">:(</span><span class="n">launchOptions</span><span class="p">[</span><span class="n">UIApplicationLaunchOptionsBluetoothCentralsKey</span><span class="p">]</span> <span class="o">?:</span> <span class="p">[[</span><span class="bp">NSUUID</span> <span class="n">UUID</span><span class="p">]</span> <span class="n">UUIDString</span><span class="p">])</span><span class="l">}</span><span class="p">];</span>

<span class="k">if</span> <span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">centralManager</span><span class="p">.</span><span class="n">state</span> <span class="o">==</span> <span class="n">CBCentralManagerStatePoweredOn</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">static</span> <span class="bp">NSString</span> <span class="o">*</span> <span class="k">const</span> <span class="n">UID</span> <span class="o">=</span> <span class="s">@&quot;7C13BAA0-A5D4-4624-9397-15BF67161B1C&quot;</span><span class="p">;</span> <span class="c1">// generated with `$ uuidgen`</span>
    <span class="bp">NSArray</span> <span class="o">*</span><span class="n">services</span> <span class="o">=</span> <span class="l">@[</span><span class="p">[</span><span class="bp">CBUUID</span> <span class="nl">UUIDWithString</span><span class="p">:</span><span class="n">UID</span><span class="p">]</span><span class="l">]</span><span class="p">;</span>
    <span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">scanOptions</span> <span class="o">=</span> <span class="l">@{</span><span class="nl">CBCentralManagerScanOptionAllowDuplicatesKey</span><span class="p">:</span><span class="m">@YES</span><span class="l">}</span><span class="p">;</span>
    <span class="p">[</span><span class="nb">self</span><span class="p">.</span><span class="n">centralManager</span> <span class="nl">scanForPeripheralsWithServices</span><span class="p">:</span><span class="n">services</span> <span class="nl">options</span><span class="p">:</span><span class="n">scanOptions</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<hr>

<p>Keeping track of all of the various ways and means of application launching can be exhausting. So it&rsquo;s fortunate that any given app will probably only have to handle one or two of these possibilities.</p>

<p>Knowing what&rsquo;s possible is often what it takes to launch an app from concept to implementation, so bear in mind all of your options when the next great idea springs to mind.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2013-12-16-launch-options.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
            
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/new-years-2014/" title="Reader Submissions -<br/> New Year's 2014" rel="next">Reader Submissions -<br/> New Year's 2014</a>
            </h1>

            <p>As we prepare to increment our NSDateComponents -year by 1, it&rsquo;s time once again for NSHipster end-of-the-year Reader Submissions!</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/nssecurecoding/" title="NSSecureCoding">NSSecureCoding</a>
            </li>
            
          
          
            <li>
              <a href="/wkwebkit/" title="WKWebView">WKWebView</a>
            </li>
            
          
          
            <li>
              <a href="/nscache/" title="NSCache">NSCache</a>
            </li>
            
          
          
            <li>
              <a href="/uiprintinteractioncontroller/" title="UIPrintInteractionController">UIPrintInteractionController</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
