<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>NSValue - NSHipster</title>
    <meta name="description" content="Boxing is the process of encapsulating scalars and value types with an object container, and is primarily used to store those values in collection objects—namely arrays and dictionaries. In Foundation, the reigning featherweight champion of boxing is NSValue."/>
    <link rel="canonical" href="http://nshipster.com/nsvalue/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="NSValue"/>
    <meta name="twitter:description" content="Boxing is the process of encapsulating scalars and value types with an object container, and is primarily used to store those values in collection objects—namely arrays and dictionaries. In Foundation, the reigning featherweight champion of boxing is NSValue."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="NSValue"/>
    <meta property="og:url" content="http://nshipster.com/nsvalue/"/>
    <meta property="og:description" content="Boxing is the process of encapsulating scalars and value types with an object container, and is primarily used to store those values in collection objects—namely arrays and dictionaries. In Foundation, the reigning featherweight champion of boxing is NSValue."/>
    <meta property="article:published_time" content="2013-01-28T00:00:00-08:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:06:40-08:00"/>
    <meta property="article:tag" content="cocoa"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="NSValue"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/nsvalue/">NSValue</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2013-01-28T00:00:00-08:00" itemprop="datePublished">January 28<sup>th</sup>, 2013</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>As part of playing the role of Abraham Lincoln in the <a href="http://www.imdb.com/title/tt0443272/">eponymous 2012 biopic</a>, Daniel Day-Lewis would insist on walking through a refrigerator box marked &ldquo;TIME MACHINE&rdquo; anytime he entered or left the set. <del markdown="1"><a href="http://filmdrunk.uproxx.com/2012/10/daniel-day-lewis-method-acting-lincoln-ny-times-profile">True Story</a></del>.</p>

<p>While the ends certainly justify the means when it comes to Mr. Day-Lewis&#39; method acting, one can&rsquo;t help but marvel at the absurdity of a magical cardboard box used as a nexus between the modern and historical worlds.</p>

<p>Yet, this is <em>exactly</em> what we do as Objective-C programmers.</p>

<p>&hellip;well not <em>exactly</em>, but there is a box involved.</p>

<p>As mentioned <a href="http://nshipster.com/ns_enum-ns_options/">time</a> and <a href="http://nshipster.com/nil/">again</a> in NSHipster, what makes Objective-C such a curiosity is the way it merges the old, procedural world of C with the modern Object-Oriented influences of Smalltalk. When done correctly, this tension can be exploited to craft semantically rich software without sacrificing performance. But bridging that gap between old and new is a miasma of casts, bridges, and of course, boxes.</p>

<p>Boxing is the process of encapsulating scalars (<code>int</code>, <code>double</code>, <code>BOOL</code>, etc.) and value types (<code>struct</code>, <code>enum</code>) with an object container, and is primarily used to store those values in collection objects—namely arrays and dictionaries.</p>

<p><code>NSNumber</code> is often used to box scalars, but in Foundation, the reigning featherweight champion of boxing is <code>NSValue</code>.</p>

<hr>

<p><code>NSValue</code> is a simple container for a single C or Objective-C data value. It can hold scalars and value types, as well as pointers and object IDs.</p>

<p>While boxing is an admittedly dry subject matter, there are two methods in particular that are worth noting: <code>+valueWithBytes:objCType:</code>, which serves as a primer for working with <code>NSValue</code>, and
<code>+valueWithNonretainedObject:</code>, which is surprisingly useful for being relatively unknown.</p>

<h2 id="valuewithbytes:objctype:"><code>valueWithBytes:objCType:</code></h2>

<blockquote>
<p><code>+valueWithBytes:objCType:</code>
Creates and returns an NSValue object that contains a given value, which is interpreted as being of a given Objective-C type.</p>

<ul>
<li><code>value</code>: The value for the new <code>NSValue</code> object.</li>
<li><code>type</code>: The Objective-C type of value. <code>type</code> should be created with the Objective-C <code>@encode()</code> compiler directive; it should not be hard-coded as a C string.</li>
</ul>
</blockquote>

<p><code>@encode</code> was discussed in <a href="http://nshipster.com/at-compiler-directives/">our rundown of the myriad <code>@</code> Compiler Directives</a>:</p>

<blockquote>
<p><code>@encode()</code>: Returns the <a href="http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html">type encoding</a> of a type. This type value can be used as the first argument encode in <code>NSCoder -encodeValueOfObjCType:at</code>.</p>
</blockquote>

<p>The subject of type encodings would make for <a href="http://nshipster.com/type-encodings/">a great article of its own</a>, but the main takeaway is that it serves as a terse, human-readable representation of the structure of a type. For example,</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">typedef</span> <span class="k">struct</span> <span class="n">example</span> <span class="p">{</span>
  <span class="kt">id</span>   <span class="n">anObject</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">aString</span><span class="p">;</span>
  <span class="kt">int</span>  <span class="n">anInt</span><span class="p">;</span>
<span class="p">}</span> <span class="n">Example</span><span class="p">;</span>
</code></pre></div>
<p>&hellip;has the encoding:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">{</span><span class="n">example</span><span class="o">=</span><span class="p">@</span><span class="o">*</span><span class="n">i</span><span class="p">}</span>
</code></pre></div>
<p><code>NSValue</code> uses this type encoding to create the necessary data structures to represent these values internally. Neat!</p>

<h2 id="valuewithnonretainedobject:"><code>valueWithNonretainedObject:</code></h2>

<blockquote>
<p><code>+valueWithNonretainedObject:</code>
Creates and returns an NSValue object that contains a given object.</p>

<p><code>anObject</code>: The value for the new object.</p>
</blockquote>

<p>If you already knew about <code>valueWithNonretainedObject</code>, you should be nodding with a knowing grin. If you didn&rsquo;t, you&rsquo;re likely staring incredulously with mouth agape. Or if not, you will be soon.</p>

<p>In short, <code>valueWithNonretainedObject:</code> allows objects to be added to a collection, without the need for satisfying <code>&lt;NSCopying&gt;</code>.</p>

<p>It&rsquo;s something that comes up occasionally, working with objects that can&rsquo;t be directly added to an <code>NSArray</code> or <code>NSDictionary</code>. Without knowing about <code>valueWithNonretainedObject:</code>, this would be something that would throw off your entire game—especially if you&rsquo;re just starting out in Objective-C.</p>

<p>But now you&rsquo;re in the know. You won&rsquo;t be stifled by such pedestrian concerns. You need not grope around for answers with <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSPointerArray_Class/Introduction/Introduction.html"><code>NSPointerArray</code></a> or <a href="https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSMapTable_class/Reference/NSMapTable.html#//apple_ref/occ/cl/NSMapTable"><code>NSMapTable</code></a>. Today is a new day.</p>

<hr>

<p>Having unpacked all of this wisdom about <code>NSValue</code>, you can now face that cruel divide between procedural and object-oriented; C and Smalltalk. Because everything is easy with a magic box.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2013-01-28-nsvalue.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
            
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/type-encodings/" title="Type Encodings" rel="next">Type Encodings</a>
            </h1>

            <p>From number stations and numerology to hieroglyphics and hobo codes, there is something truly fascinating about finding meaning that hides in plain sight. Though hidden messages in and of themselves are rarely useful or particularly interesting, it&rsquo;s the thrill of the hunt that piques our deepest curiosities.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/uiaccessibility/" title="UIAccessibility">UIAccessibility</a>
            </li>
            
          
          
            <li>
              <a href="/nscoding/" title="NSCoding / NSKeyedArchiver">NSCoding / NSKeyedArchiver</a>
            </li>
            
          
          
            <li>
              <a href="/cloudkit/" title="CloudKit">CloudKit</a>
            </li>
            
          
          
            <li>
              <a href="/mklocalsearch/" title="MKLocalSearch">MKLocalSearch</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
