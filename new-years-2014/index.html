<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>Reader Submissions -  New Year's 2014 - NSHipster</title>
    <meta name="description" content="As we prepare to increment our NSDateComponents -year by 1, it's time once again for NSHipster end-of-the-year Reader Submissions!"/>
    <link rel="canonical" href="http://nshipster.com/new-years-2014/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="Reader Submissions -<br/> New Year's 2014"/>
    <meta name="twitter:description" content="As we prepare to increment our NSDateComponents -year by 1, it&#39;s time once again for NSHipster end-of-the-year Reader Submissions!"/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Reader Submissions -<br/> New Year's 2014"/>
    <meta property="og:url" content="http://nshipster.com/new-years-2014/"/>
    <meta property="og:description" content="As we prepare to increment our NSDateComponents -year by 1, it&#39;s time once again for NSHipster end-of-the-year Reader Submissions!"/>
    <meta property="article:published_time" content="2014-01-01T00:00:00-08:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:06:40-08:00"/>
    <meta property="article:tag" content="reader submissions"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="Reader Submissions -<br/> New Year's 2014"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/new-years-2014/">Reader Submissions -<br/> New Year's 2014</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2014-01-01T00:00:00-08:00" itemprop="datePublished">January 1<sup>st</sup>, 2014</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>As we prepare to increment our <code>NSDateComponents -year</code> by <code>1</code>, it&rsquo;s time once again for NSHipster end-of-the-year Reader Submissions! <a href="https://gist.github.com/mattt/4148342">Last year</a>, we got some <a href="http://nshipster.com/reader-submissions-new-years-2013/">mind-blowing tips and tricks</a>. With the release of iOS 7 &amp; Mavericks, and a year&rsquo;s worth of new developments in the Objective-C ecosystem, there was a ton of new stuff to write about.</p>

<p>Thanks to <a href="https://github.com/acoomans">Arnaud Coomans</a>, <a href="https://github.com/0xced">Cédric Luthi</a>, <a href="https://github.com/dbgrandi">David Grandinetti</a>, <a href="https://github.com/ellneal">Ell Neal</a>, <a href="https://github.com/rubymaverick">Eric Allam</a>, <a href="https://github.com/eskerber">Erik Kerber</a>, <a href="https://github.com/jkubicek">Jim Kubicek</a>, <a href="https://github.com/nevyn">Joachim Bengtsson</a>, <a href="https://github.com/Anviking">Johannes Lund</a>, <a href="https://github.com/joshavant">Josh Avant</a>, <a href="https://github.com/jpm">João Prado Maia</a>, <a href="https://github.com/incanus">Justin R. Miller</a>, <a href="https://github.com/PycKamil">Kamil Pyć</a>, <a href="https://github.com/mteece">Matthew Teece</a>, <a href="https://github.com/MaxGabriel">Maximilian Tagher</a>, <a href="https://github.com/mindbrix">Nigel Timothy Barber</a>, <a href="https://github.com/NSProgrammer">Nolan O&#39;Brien</a>, <a href="https://github.com/pitiphong-p">Pitiphong Phongpattranont</a>, <a href="https://gist.github.com/stevemoser">Steve Moser</a>, <a href="https://github.com/Thomvis">Thomas Visser</a>, <a href="https://github.com/shpakovski">Vadim Shpakovski</a>, &amp; <a href="https://github.com/jurre">@jurre</a> for <a href="https://gist.github.com/7414618">contributing their great tips</a>.</p>

<hr>

<h2 id="gcc-code-block-evaluation-c-extension">GCC Code Block Evaluation C Extension</h2>

<p>Let&rsquo;s make this official: <strong>NSHipster&rsquo;s Objective-C trend of 2013 is code block evaluation assignment</strong>. Recommended by both <a href="https://github.com/jkubicek">Jim Kubicek</a> and <a href="https://github.com/MaxGabriel">Maximilian Tagher</a> (citing <a href="http://cocoa-dom.tumblr.com/post/56517731293/new-thing-i-do-in-code">this blog post</a> by <a href="https://github.com/monkeydom">Dominik Wagner</a>), this trick does wonders to make code cleaner, safer, and more concise.</p>

<p>Behind the magic is a GCC C extension, which causes a code block to return a value if  enclosed within brackets and parentheses.</p>

<p>Watch, as it cuts through this view controller code like butter!</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="nb">self</span><span class="p">.</span><span class="n">searchBar</span> <span class="o">=</span> <span class="p">({</span>
    <span class="bp">UISearchBar</span> <span class="o">*</span><span class="n">searchBar</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">UISearchBar</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame</span><span class="p">:({</span>
        <span class="bp">CGRect</span> <span class="n">frame</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">tableView</span><span class="p">.</span><span class="n">frame</span><span class="p">;</span>
        <span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="mf">50.0f</span><span class="p">;</span>
        <span class="n">frame</span><span class="p">;</span>
    <span class="p">})];</span>
    <span class="n">searchBar</span><span class="p">.</span><span class="n">delegate</span> <span class="o">=</span> <span class="nb">self</span><span class="p">;</span>
    <span class="n">searchBar</span><span class="p">;</span>
<span class="p">});</span>
</code></pre></div>
<p>This not only segregates configuration details into initialization, but the additional scope allows generic variable names like <code>frame</code>, <code>button</code>, and <code>view</code> to be reused in subsequent initializations. No more <code>loginButtonFrame = ... / signupButtonFrame = ...</code>!</p>

<p>If code craftsmanship is important to you, strongly consider making this standard practice in your work. It may look a bit weird at first, but this will very likely become common convention by the end of 2014.</p>

<h2 id="default-values-with-gnu-style-ternary-?:">Default Values with GNU-style Ternary <code>?:</code></h2>

<p>The ternary operator, <code>?</code>, is shorthand for <code>if () {...} else {...}</code>. However, because of how difficult it can be to understand statements with ternary operators at a glance, they are generally dispreferred by veteran coders.</p>

<p>Nonetheless, <a href="https://github.com/MaxGabriel">Maximilian Tagher</a> offers a lesser-known (yet much-loved by those in-the-know) use of the ternary operator: <code>?:</code>, which acts as a convenient way to specify a fallback value to return if the left-hand side is <code>nil</code>.</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;%@&quot;</span><span class="p">,</span> <span class="s">@&quot;a&quot;</span> <span class="o">?:</span> <span class="s">@&quot;b&quot;</span><span class="p">);</span> <span class="c1">// @&quot;a&quot;</span>
<span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;%@&quot;</span><span class="p">,</span> <span class="nb">nil</span> <span class="o">?:</span> <span class="s">@&quot;b&quot;</span><span class="p">);</span> <span class="c1">// @&quot;b&quot;</span>
</code></pre></div>
<p>This is especially convenient for providing default behavior when a property may not be set:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">dispatch_async</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">completionQueue</span> <span class="o">?:</span> <span class="n">dispatch_get_main_queue</span><span class="p">(),</span> <span class="o">^</span><span class="p">{</span>
    <span class="c1">// ...</span>
<span class="p">});</span>
</code></pre></div>
<p>The main downside of this approach is that default Xcode project warning settings will raise a warning. You can get around this by wrapping the relevant code block in <code>#pragma</code> declarations, but the added LOC nullifies much of the brevity that this approach provides:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="cp">#pragma clang diagnostic push</span>
<span class="cp">#pragma clang diagnostic ignored &quot;-Wgnu&quot;</span>
<span class="nb">self</span><span class="p">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span> <span class="o">?:</span> <span class="s">@&quot;Unknown&quot;</span><span class="p">;</span>
<span class="cp">#pragma clang diagnostic pop</span>
</code></pre></div>
<h2 id="@import"><code>@import</code></h2>

<p><a href="https://github.com/shpakovski">Vadim Shpakovski</a> reminds us of one of the more obscure additions to LLVM 5.0, the <code>@import</code> keyword. No more are the days of <code>Xcode ▹ Project ▹ TARGETS ▹ General ▹ Linked Frameworks and Libraries ▹ +</code>. With <code>@import</code>, the Xcode will automatically link <code>MapKit</code>, <code>CoreData</code>, or any other referenced framework as necessary. Even <code>Prefix.pch</code> benefits, sporting a svelte new physique:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">@</span><span class="n">import</span> <span class="n">UIKit</span><span class="p">;</span>
<span class="p">@</span><span class="n">import</span> <span class="n">Foundation</span><span class="p">;</span>
<span class="p">@</span><span class="n">import</span> <span class="n">CoreGraphics</span><span class="p">;</span>
</code></pre></div>
<h2 id="customizing-mkmapview-tiles">Customizing MKMapView Tiles</h2>

<p><a href="https://github.com/incanus">Justin R. Miller</a>, of <a href="https://www.mapbox.com">MapBox</a> fame, brings to our attention what is perhaps the most important feature in iOS 7 mapping: custom tile overlays:</p>

<blockquote>
<p>Relatively little-known feature of iOS 7: you can turn off Apple&rsquo;s own maps now with <code>MKTileOverlay</code>, <code>MKTileOverlayRenderer</code>, and <code>canReplaceMapContent</code>, unlike you could before with Apple or (pre-iOS 6) Google. And check out <a href="http://github.com/mapbox/mbxmapkit">MBXMapKit</a> if you&rsquo;d like to do it in one line of code.</p>
</blockquote>

<h2 id="thoughtbot&#39;s-blog-post-on-mapkit-performance">Thoughtbot&rsquo;s Blog Post on MapKit Performance</h2>

<p>Speaking of iOS maps, <a href="https://github.com/jpm">João Prado Maia</a> cites an amazing blog post by <a href="http://thoughtbot.com">thoughtbot</a>, <a href="http://robots.thoughtbot.com/how-to-handle-large-amounts-of-data-on-maps">&ldquo;How To Efficiently Display Large Amounts of Data on iOS Maps&rdquo;</a> by <a href="https://twitter.com/theocalmes">Theodore Calmes</a>. Consider it a must-read if you plan to do any significant iCartography in 2014.</p>

<h2 id="nsattributedstring-+-html-in-ios-7">NSAttributedString + HTML in iOS 7</h2>

<p>Shifting gears a little bit, <a href="https://github.com/rubymaverick">Eric Allam</a> remarks that <code>NSAttributedString</code> can do HTML now in iOS 7 with the new <a href="https://developer.apple.com/library/ios/documentation/UIKit/Reference/NSAttributedString_UIKit_Additions/Reference/Reference.html#//apple_ref/doc/uid/TP40011688"><code>NSHTMLTextDocumentType</code></a> document type attribute. Combine with <a href="https://github.com/mdiep/MMMarkdown">MMMarkdown</a> for ridiculously easy <a href="http://initwithfunk.com/blog/2013/09/29/easy-markdown-rendering-with-nsattributedstring-on-ios-7/">Markdown rendering in a <code>UITextView</code></a>.</p>

<hr>

<h2 id="launch-arguments-&amp;-user-defaults">Launch Arguments &amp; User Defaults</h2>

<p>Offering another tip, <a href="https://github.com/shpakovski">Vadim Shpakovski</a> calls our attention to the relationship between launch arguments and <code>NSUserDefaults</code>:</p>

<p>The command line argument <code>-TestFeatureEnabled YES</code> can be checked in code with <code>[[NSUserDefaults standardUserDefaults] boolForKey:@&quot;TestFeatureEnabled&quot;]</code>. This is useful for debugging development builds.</p>

<hr>

<h2 id="woes-of-a-missing-uiviewanimationcurve-value">Woes of a Missing <code>UIViewAnimationCurve</code> Value</h2>

<p><a href="https://github.com/Thomvis">Thomas Visser</a> bemoans his pick for least awesome Objective-C development in 2013:</p>

<blockquote>
<p>In iOS7, the animation of the keyboard show/hide changed. Its duration and, most notably, its curve is different from previous iOS versions. As before, if you want to animate something with the keyboard, you can listen to <code>UIKeyboardWillShowNotification</code>/<code>UIKeyboardWillHideNotification</code> and use the values from the <code>userInfo</code> dictionary to coordinate your animations with the keyboard. The <code>userInfo</code> dictionary contains the keyboard&rsquo;s begin frame, end frame, animation curve and animation duration.</p>

<p>However, in iOS 7, the animation curve is an undefined value, meaning that it is not one of the 4 defined values of <code>UIViewAnimationCurve</code>. Instead, its value is <code>7</code>. This is a problem if you want to use the same curve in your own animation, because such a curve is not defined. The work-around, <a href="https://devforums.apple.com/message/878410#878410">as discussed on the Apple forums</a>, is to manually translate the <code>UIViewAnimationCurve</code> to a <code>UIViewAnimationOptions</code> value. From the definition of <code>UIViewAnimationOptions</code>, we learn that this translation is done by shifting the curve value 16 times to the left: <code>option = curve &lt;&lt; 16</code>. This works great, but shouldn&rsquo;t be necessary. I hope Apple will add this mysterious 5th curve to the definitions in a future iOS update.</p>
</blockquote>

<h2 id="injecting-analytics-on-outgoing-links">Injecting Analytics on Outgoing Links</h2>

<p><a href="https://github.com/dbgrandi">David Grandinetti</a> has a tip for apps that want to track outgoing links from within an app: override <code>AppDelegate -openURL:</code>:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">-(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">openURL:</span><span class="p">(</span><span class="bp">NSURL</span> <span class="o">*</span><span class="p">)</span><span class="nv">url</span><span class="p">{</span>
    <span class="k">if</span> <span class="p">([[</span><span class="n">url</span> <span class="n">scheme</span><span class="p">]</span> <span class="nl">hasPrefix</span><span class="p">:</span><span class="s">@&quot;http&quot;</span><span class="p">])</span> <span class="p">{</span>
        <span class="p">[[</span><span class="n">GAI</span> <span class="n">sharedInstance</span><span class="p">].</span><span class="n">defaultTracker</span> <span class="nl">sendView</span><span class="p">:[</span><span class="n">url</span> <span class="n">absoluteString</span><span class="p">]];</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="p">[</span><span class="nb">super</span> <span class="nl">openURL</span><span class="p">:</span><span class="n">url</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div>
<p>In this example, this information is being sent to Google Analytics, but one could easily adapt this approach for any analytics provider.</p>

<h2 id="reviving-the-look-and-feel-of-ios-6-in-your-app-with-one-weird-trick-(ui-designers-hate-it!)">Reviving the Look-and-Feel of iOS 6 in Your App with One Weird Trick (UI Designers <em>hate</em> it!)</h2>

<p>Still resisting the aesthetics of this year&rsquo;s iOS makeover? <a href="https://github.com/PycKamil">Kamil Pyć</a> shows us how to act as if iOS 7 never happened:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">[[</span><span class="bp">NSUserDefaults</span> <span class="n">standardUserDefaults</span><span class="p">]</span> <span class="nl">setObject</span><span class="p">:</span><span class="m">@YES</span> <span class="nl">forKey</span><span class="p">:</span><span class="s">@&quot;UIUseLegacyUI&quot;</span><span class="p">]</span>
</code></pre></div>
<blockquote>
<p>And, of course, following up from a previous tip, since <code>NSUserDefaults</code> is tied to launch arguments, this can also be specified on launch. Keep this tucked in the back of your mind—this could make for a simple yet effective April Fool&rsquo;s joke.</p>
</blockquote>

<hr>

<h2 id="detecting-category-method-collisions">Detecting Category Method Collisions</h2>

<p>Categories are great, but suffer from that same original sin of Objective-C: lack of name-spacing. Duplicate method declarations in categories interact in undefined ways, and may lead to difficult-to-debug behavior.</p>

<p>Fortunately, <a href="https://github.com/0xced">Cédric Luthi</a> shows us how to tell if any category methods are getting up in one another&rsquo;s business:</p>

<blockquote>
<p>Set the <code>OBJC_PRINT_REPLACED_METHODS</code> environment variable to <code>YES</code> in order to automatically log all methods that are smashed by categories.</p>
</blockquote>

<hr>

<h2 id="a-.plist-of-emoji,-grouped-by-category">A .plist of Emoji, Grouped by Category</h2>

<p>In an encore submission, Cédric brings us a  <a href="https://gist.github.com/mattt/8185075">.plist file of Emoji grouped by category</a> (mirrored from CloudApp to Gist in order to be more searchable). 😄👍</p>

<hr>

<h2 id="quickly-determining-the-type-of-image-data">Quickly Determining the Type of Image Data</h2>

<p>Here&rsquo;s a simple function from <a href="https://github.com/NSProgrammer">Nolan O&#39;Brien</a> that can be used to determine the type of image data based on the first couple bytes of the header:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">static</span> <span class="kr">inline</span> <span class="n">NSPUIImageType</span> <span class="nf">NSPUIImageTypeFromData</span><span class="p">(</span><span class="bp">NSData</span> <span class="o">*</span><span class="n">imageData</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">imageData</span><span class="p">.</span><span class="n">length</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">bytes</span> <span class="o">=</span> <span class="p">[</span><span class="n">imageData</span> <span class="n">bytes</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xff</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xd8</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0xff</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">NSPUIImageType_JPEG</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x89</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x50</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x4e</span> <span class="o">&amp;&amp;</span>
            <span class="n">bytes</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">==</span> <span class="mh">0x47</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">NSPUIImageType_PNG</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">NSPUIImageType_Unknown</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<hr>

<h2 id="print-kvo-context">Print KVO Context</h2>

<p>Once again, showing off his unmatched knowledge of Objective-C internals, Cédric shares this extremely useful tip for debugging <a href="http://nshipster.com/key-value-observing/">Key-Value Observing</a>.</p>

<blockquote>
<p>Print which <a href="https://gist.github.com/ddribin/5158614#comment-798104">context</a> is passed to <code>observeValueForKeyPath:ofObject:change:context:</code> in lldb.</p>

<p>Say you have declared a context like this:</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">static</span> <span class="k">const</span> <span class="kt">void</span> <span class="o">*</span><span class="n">MyFooContext</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">MyFooContext</span><span class="p">;</span>
</code></pre></div>
<blockquote>
<p>&hellip;and you want to to know what context it is when you are inside</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">observeValueForKeyPath:</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">keyPath</span>
                      <span class="nf">ofObject:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nv">object</span>
                        <span class="nf">change:</span><span class="p">(</span><span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span><span class="nv">change</span>
                       <span class="nf">context:</span><span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="nv">context</span>
</code></pre></div>
<blockquote>
<p>You can do this:</p>
</blockquote>
<div class="highlight"><pre><code class="language-text" data-lang="text">(lldb) image lookup -a `context`
      Address: MyApp[0x00026258] (MyApp.__DATA.__data + 4)
      Summary: MyFooContext
</code></pre></div>
<hr>

<h2 id="creating-a-keypath-from-selectors">Creating a KeyPath from Selectors</h2>

<p>On the subject of Key-Value Coding, <a href="https://github.com/pitiphong-p">Pitiphong Phongpattranont</a> offers this useful function that builds a keypath from a variable list of selectors:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="kr">inline</span> <span class="bp">NSString</span> <span class="o">*</span> <span class="nf">PTPKeyPathForSelectors</span><span class="p">(</span><span class="kt">SEL</span> <span class="n">selector</span><span class="p">,</span> <span class="p">...)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">selector</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nb">nil</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="bp">NSMutableArray</span> <span class="o">*</span><span class="n">selectors</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSMutableArray</span> <span class="n">array</span><span class="p">];</span>
  <span class="kt">va_list</span> <span class="n">args</span><span class="p">;</span>
  <span class="n">va_start</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">selector</span><span class="p">);</span>
  <span class="kt">SEL</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">selector</span><span class="p">;</span>
  <span class="k">do</span> <span class="p">{</span>
    <span class="p">[</span><span class="n">selectors</span> <span class="nl">addObject</span><span class="p">:</span><span class="n">NSStringFromSelector</span><span class="p">(</span><span class="n">arg</span><span class="p">)];</span>
  <span class="p">}</span> <span class="k">while</span><span class="p">((</span><span class="n">arg</span> <span class="o">=</span> <span class="n">va_arg</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="kt">SEL</span><span class="p">)));</span>
  <span class="n">va_end</span><span class="p">(</span><span class="n">args</span><span class="p">);</span>

  <span class="k">return</span> <span class="p">[</span><span class="n">selectors</span> <span class="nl">componentsJoinedByString</span><span class="p">:</span><span class="s">@&quot;.&quot;</span><span class="p">];</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="bp">NSString</span> <span class="o">*</span><span class="n">keyPath</span> <span class="o">=</span> <span class="n">PTPKeyPathForSelectors</span><span class="p">(</span><span class="k">@selector</span><span class="p">(</span><span class="n">data</span><span class="p">),</span> <span class="k">@selector</span><span class="p">(</span><span class="n">name</span><span class="p">),</span> <span class="nb">nil</span><span class="p">);</span>
<span class="c1">// =&gt; @&quot;data.name&quot;</span>
</code></pre></div>
<h2 id="nomad-cli-utilities">Nomad CLI Utilities</h2>

<p>And finally, <a href="https://github.com/mteece">Matthew Teece</a> gives a shout-out to <a href="http://nomad-cli.com">Nomad</a>, a world-class collection of command-line utilities—specifically, <a href="https://github.com/nomad/houston">Houston</a>, which can send and manage push notifications from the command line, or within your Ruby application.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>apn push <span class="s2">&quot;&lt;token&gt;&quot;</span> -c /path/to/cert.pem -m <span class="s2">&quot;Hello!&quot;</span>
</code></pre></div>
<hr>

<p>Thus concludes this year&rsquo;s reader submissions. Thanks again to everyone for your submissions!</p>

<p>And thanks to you, dear reader, for sticking with NSHipster for another 52 weeks. Between the <a href="http://asciiwwdc.com/2013/sessions/228?q=NSHipster">WWDC session</a> and <a href="https://gumroad.com/l/nshipster">the book</a>, 2013 has been a bellwether year for NSHipster. Thank you for your support and enthusiasm for the site—it really does mean the world to me.</p>

<p>We have a ton of great stuff planned for 2014, so keep your fixies primed and your artisanal espresso hot for another season of great iOS and OS X knowledge.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2014-01-01-new-years-2014.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
            
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/nsrange/" title="NSRange" rel="next">NSRange</a>
            </h1>

            <p>NSRange is one of the essential types of Foundation. Passed around and returned in methods throughout the framework, being well-versed in this struct has a range of benefits.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/new-years-2013/" title="Reader Submissions -<br/> New Year's 2013">Reader Submissions -<br/> New Year's 2013</a>
            </li>
            
          
          
          
          
            <li>
              <a href="/new-years-2015/" title="Reader Submissions -<br/> New Year's 2015">Reader Submissions -<br/> New Year's 2015</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
