<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>Clang Diagnostics - NSHipster</title>
    <meta name="description" content="Diagnostics combine logic with analytics to arrive at a conclusion. It's science and engineering at their purest. It's human reasoning at its most potent. For us developers, our medium of code informs the production of subsequent code, creating a positive feedback loop that has catapulted the development of technology exponentially over the last half century. For us Objective-C developers specifically, the most effective diagnostics come from Clang."/>
    <link rel="canonical" href="http://nshipster.com/clang-diagnostics/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="Clang Diagnostics"/>
    <meta name="twitter:description" content="Diagnostics combine logic with analytics to arrive at a conclusion. It&#39;s science and engineering at their purest. It&#39;s human reasoning at its most potent. For us developers, our medium of code informs the production of subsequent code, creating a positive feedback loop that has catapulted the development of technology exponentially over the last half century. For us Objective-C developers specifically, the most effective diagnostics come from Clang."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Clang Diagnostics"/>
    <meta property="og:url" content="http://nshipster.com/clang-diagnostics/"/>
    <meta property="og:description" content="Diagnostics combine logic with analytics to arrive at a conclusion. It&#39;s science and engineering at their purest. It&#39;s human reasoning at its most potent. For us developers, our medium of code informs the production of subsequent code, creating a positive feedback loop that has catapulted the development of technology exponentially over the last half century. For us Objective-C developers specifically, the most effective diagnostics come from Clang."/>
    <meta property="article:published_time" content="2014-06-16T00:00:00-07:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:06:40-08:00"/>
    <meta property="article:tag" content="objective-c"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="Clang Diagnostics"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/clang-diagnostics/">Clang Diagnostics</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2014-06-16T00:00:00-07:00" itemprop="datePublished">June 16<sup>th</sup>, 2014</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>Diagnostics combine logic with analytics to arrive at a conclusion. It&rsquo;s science and engineering at their purest. It&rsquo;s human reasoning at its most potent.</p>

<p>Within the medical profession, a diagnosis is made through instinct backed by lab samples. For industrial manufacturing, one diagnoses a product fault through an equal application of statistics and gumption.</p>

<p>For us developers, our medium of code informs the production of subsequent code, creating a positive feedback loop that has catapulted the development of technology exponentially over the last half century. For us Objective-C developers specifically, the most effective diagnostics come from Clang.</p>

<p>Clang is the C / Objective-C front-end to the LLVM compiler. It has a deep understanding of the syntax and semantics of Objective-C, and is much of the reason that Objective-C is such a capable language today.</p>

<p>That amazing readout you get when you &ldquo;Build &amp; Analyze&rdquo; (<code>⌘⇧B</code>) is a function of the softer, more contemplative side of Clang: its code diagnostics.</p>

<p>In our article about <a href="http://nshipster.com/pragma/"><code>#pragma</code></a>, we quipped:</p>

<blockquote>
<p>Pro tip: Try setting the <code>-Weverything</code> flag and checking the &ldquo;Treat Warnings as Errors&rdquo; box your build settings. This turns on Hard Mode in Xcode.</p>
</blockquote>

<p>Now, we stand by this advice, and encourage other developers to step up their game and treat build warnings more seriously. However, there are some situations in which you and Clang reach an impasse. For example, consider the following <code>switch</code> statement:</p>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">switch</span> <span class="p">(</span><span class="n">style</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nl">UITableViewCellStyleDefault</span><span class="p">:</span>
    <span class="k">case</span> <span class="nl">UITableViewCellStyleValue1</span><span class="p">:</span>
    <span class="k">case</span> <span class="nl">UITableViewCellStyleValue2</span><span class="p">:</span>
    <span class="k">case</span> <span class="nl">UITableViewCellStyleSubtitle</span><span class="p">:</span>
        <span class="c1">// ...</span>
    <span class="k">default</span><span class="o">:</span>
        <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>When certain flags are enabled, Clang will complain that the &ldquo;default label in switch which covers all enumeration values&rdquo;. However, if we <em>know</em> that, zooming out into a larger context, <code>style</code> is (for better or worse) derived from an external representation (e.g. JSON resource) that allows for unconstrained <code>NSInteger</code> values, the <code>default</code> case is a necessary safeguard. The only way to insist on this inevitability is to use <code>#pragma</code> to ignore a warning flag temporarily:</p>

<blockquote>
<p><code>push</code> &amp; <code>pop</code> are used to save and restore the compiler state, similar to Core Graphics or OpenGL contexts.</p>
</blockquote>
<div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="cp">#pragma clang diagnostic push</span>
<span class="cp">#pragma clang diagnostic ignored &quot;-Wcovered-switch-default&quot;</span>
<span class="k">switch</span> <span class="p">(</span><span class="n">style</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">case</span> <span class="nl">UITableViewCellStyleDefault</span><span class="p">:</span>
    <span class="k">case</span> <span class="nl">UITableViewCellStyleValue1</span><span class="p">:</span>
    <span class="k">case</span> <span class="nl">UITableViewCellStyleValue2</span><span class="p">:</span>
    <span class="k">case</span> <span class="nl">UITableViewCellStyleSubtitle</span><span class="p">:</span>
        <span class="c1">// ...</span>
    <span class="k">default</span><span class="o">:</span>
        <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
<span class="cp">#pragma clang diagnostic pop</span>
</code></pre></div>
<blockquote>
<p>Again, and this cannot be stressed enough, Clang is right at least 99% of the time. Actually fixing an analyzer warning is <em>strongly</em> preferred to ignoring it. Use <code>#pragma clang diagnostic ignored</code> as a method of last resort.</p>
</blockquote>

<p>This week, as a public service, we&rsquo;ve compiled a (mostly) comprehensive list of Clang warning strings and their associated flags, which can be found here:</p>

<p><strong><a href="http://fuckingclangwarnings.com">F***ingClangWarnings.com</a></strong></p>

<p>You can also find the compiler and analyzer flags for any warning you might encounter by <code>^</code>-Clicking the corresponding entry in the Xcode Issue Navigator and selecting &ldquo;Reveal in Log&rdquo;. (If this option is disabled, try building the project again).</p>

<hr>

<p>Corrections? Additions? Open a <a href="https://github.com/mattt/fuckingclangwarnings.com/pulls">Pull Request</a> to submit your change. Any help would be greatly appreciated.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2014-06-16-clang-diagnostics.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
            
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/nscalendarunityear/" title="NSCalendarUnitYear" rel="next">NSCalendar​Unit​Year</a>
            </h1>

            <p>NSHipster.com was launched 2 years ago to the day. Each week since has featured a new article on some obscure topic in Objective-C or Cocoa (with only a couple gaps). Let&rsquo;s celebrate with some cake.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
          
          
            <li>
              <a href="/unit-testing/" title="Unit Testing">Unit Testing</a>
            </li>
            
          
          
            <li>
              <a href="/__attribute__/" title="__attribute__">__attribute__</a>
            </li>
            
          
          
            <li>
              <a href="/method-swizzling/" title="Method Swizzling">Method Swizzling</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
