<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>Unmanaged - NSHipster</title>
    <meta name="description" content="A reading of Swift's standard library shows a clear demarcation between the safety and reliability that Swift advertises on one side and the tools necessary for Objective-C interoperability on the other. Types with names like `Int`, `String`, and `Array` let you expect straightforward usage and unsurprising behavior, while it's impossible to create an `UnsafeMutablePointer` or `Unmanaged` instance without thinking "here be dragons.""/>
    <link rel="canonical" href="http://nshipster.com/unmanaged/"/>
  
  
  
  
  <meta name="author" content="Nate Cook"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@nnnnnnnn"/>
  
  
    <meta name="twitter:title" content="Unmanaged"/>
    <meta name="twitter:description" content="A reading of Swift&#39;s standard library shows a clear demarcation between the safety and reliability that Swift advertises on one side and the tools necessary for Objective-C interoperability on the other. Types with names like `Int`, `String`, and `Array` let you expect straightforward usage and unsurprising behavior, while it&#39;s impossible to create an `UnsafeMutablePointer` or `Unmanaged` instance without thinking &quot;here be dragons.&quot;"/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Unmanaged"/>
    <meta property="og:url" content="http://nshipster.com/unmanaged/"/>
    <meta property="og:description" content="A reading of Swift&#39;s standard library shows a clear demarcation between the safety and reliability that Swift advertises on one side and the tools necessary for Objective-C interoperability on the other. Types with names like `Int`, `String`, and `Array` let you expect straightforward usage and unsurprising behavior, while it&#39;s impossible to create an `UnsafeMutablePointer` or `Unmanaged` instance without thinking &quot;here be dragons.&quot;"/>
    <meta property="article:published_time" content="2015-04-13T00:00:00-07:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:06:40-08:00"/>
    <meta property="article:tag" content="swift"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="Unmanaged"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content=""/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/unmanaged/">Unmanaged</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/nate-cook/">Nate Cook</a> —
    
    <time datetime="2015-04-13T00:00:00-07:00" itemprop="datePublished">April 13<sup>th</sup>, 2015</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p>APIs do more than just exposing functionality to developers. They also communicate values about how the API should be used and why. This communication is what makes naming things one of the Hard Parts of computer science; it&rsquo;s what separates the good APIs from the great.</p>

<p>A reading of Swift&rsquo;s standard library shows a clear demarcation between the safety and reliability that Swift advertises on one side and    the tools necessary for Objective-C interoperability on the other. Types with names like <code>Int</code>, <code>String</code>, and <code>Array</code> let you expect straightforward usage and unsurprising behavior, while it&rsquo;s impossible to create an <code>UnsafeMutablePointer</code> or <code>Unmanaged</code> instance without thinking &ldquo;here be dragons.&rdquo;</p>

<p>Here we take a look at <code>Unmanaged</code>, a wrapper for unclearly-memory-managed objects and the hot-potatoesque way of properly handling them. But to start, let&rsquo;s rewind the clock a bit.</p>

<h2 id="automatic-reference-counting">Automatic Reference Counting</h2>

<p>Back in the Stone Age (aka 2011), reference counting in Objective-C was still a manual affair. Each reference-retaining operation needed to be balanced with a corresponding release, lest an application&rsquo;s memory take on an air of phantasmagoria, with zombies dangling and memory leaking&hellip; Gross. Carefully tending the reference count of one&rsquo;s objects was a constant chore for developers and a major hurdle for newcomers to the platform.</p>

<p>The advent of automatic reference counting (ARC) made all of that manual memory management unnecessary. Under ARC, the compiler inserts the <code>retain</code>/<code>release</code>/<code>autorelease</code> calls for you, reducing the cognitive load of applying the rules at every turn. If <a href="https://developer.apple.com/library/mac/releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html">this graphic</a> doesn&rsquo;t convince you of the boon of dropping manual memory management, nothing will:</p>

<p><img src="http://nshipster.s3.amazonaws.com/unmanaged-arc.png" alt="Memory management before and after ARC"></p>

<p>Now, in this post-ARC world, all Objective-C and Core Foundation types returned from Objective-C methods are automatically memory managed, leaving Core Foundation types returned from C functions as the lone holdout. For this last category, management of an object&rsquo;s ownership is still done with calls to <code>CFRetain()</code> and <code>CFRelease()</code> or by bridging to Objective-C objects with one of the <code>__bridge</code> functions. </p>

<p>To help understand whether or not a C function returns objects that are owned by the caller, Apple uses naming conventions defined by the <em>Create Rule</em> and the <em>Get Rule</em>:</p>

<ul>
<li><p>The <strong>Create Rule</strong> states that a function with <code>Create</code> or <code>Copy</code> in its name returns ownerships to the call of the function. That is to say, the caller of a <code>Create</code> or <code>Copy</code> function will eventually need to call <code>CFRelease</code> on the returned object.</p></li>
<li><p>The <strong>Get Rule</strong> isn&rsquo;t so much a rule of its own as it is a catch-all for everything that doesn&rsquo;t follow the Create Rule. A function doesn&rsquo;t have <code>Create</code> or <code>Copy</code> in its name? It follows the Get rule instead, returning <em>without</em> transferring ownership. If you want the returned object to persist, in most cases it&rsquo;s up to you to retain it.</p></li>
</ul>

<blockquote>
<p>If you&rsquo;re a belt-and-suspenders-and-elastic-waistband programmer like I am, check the documentation as well. Even when they follow the proper name convention, most APIs also explicitly state which rule they follow, and any exceptions to the common cases.</p>
</blockquote>

<p>Wait—this article is about <em>Swift</em>. Let&rsquo;s get back on track.</p>

<p>Swift uses ARC exclusively, so there&rsquo;s no room for a call to <code>CFRelease</code> or <code>__bridge_retained</code>. How does Swift reconcile this &ldquo;management-by-convention&rdquo; philosophy with its guarantees of memory safety? </p>

<p>This occurs in two different ways. For <em>annotated</em> APIs, Swift is able to make the conventions explicit—annotated CoreFoundation APIs are completely memory-managed and provide the same promise of memory safety as do bridged Objective-C or native Swift types. For <em>unannotated</em> APIs, however, Swift passes the job to you, the programmer, through the <code>Unmanaged</code> type.</p>

<h2 id="managing-unmanaged">Managing <code>Unmanaged</code></h2>

<p>While most CoreFoundation APIs have been annotated, some significant chunks have yet to receive attention. As of this writing, the Address Book framework seems the highest profile of the unannotated APIs, with several functions taking or returning <code>Unmanaged</code>-wrapped types.</p>

<p>An <code>Unmanaged&lt;T&gt;</code> instance wraps a CoreFoundation type <code>T</code>, preserving a reference to the underlying object as long as the <code>Unmanaged</code> instance itself is in scope. There are two ways to get a Swift-managed value out of an <code>Unmanaged</code> instance:</p>

<blockquote>
<ul>
<li><p><code>takeRetainedValue()</code>: returns a Swift-managed reference to the wrapped instance, decrementing the reference count while doing so—use with the return value of a Create Rule function.</p></li>
<li><p><code>takeUnretainedValue()</code>: returns a Swift-managed reference to the wrapped instance <em>without</em> decrementing the reference count—use with the return value of a Get Rule function.</p></li>
</ul>
</blockquote>

<p>In practice, you&rsquo;re better off not even working with <code>Unmanaged</code> instances directly. Instead, <code>take...</code> the underlying instance immediately from the function&rsquo;s return value and bind <em>that</em>.</p>

<p>Let&rsquo;s take a look at this in practice. Suppose we wish to create an <code>ABAddressBook</code> and fetch the name of the user&rsquo;s best friend:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="n">bestFriendID</span> <span class="o">=</span> <span class="n">ABRecordID</span><span class="p">(...)</span>

<span class="c1">// Create Rule - retained</span>
<span class="k">let</span> <span class="nl">addressBook</span><span class="p">:</span> <span class="n">ABAddressBook</span> <span class="o">=</span> <span class="n">ABAddressBookCreateWithOptions</span><span class="p">(</span><span class="nb">nil</span><span class="p">,</span> <span class="nb">nil</span><span class="p">).</span><span class="n">takeRetainedValue</span><span class="p">()</span>

<span class="k">if</span> <span class="k">let</span>
    <span class="c1">// Get Rule - unretained</span>
    <span class="nl">bestFriendRecord</span><span class="p">:</span> <span class="n">ABRecord</span> <span class="o">=</span> <span class="n">ABAddressBookGetPersonWithRecordID</span><span class="p">(</span><span class="n">addressBook</span><span class="p">,</span> <span class="n">bestFriendID</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="n">takeUnretainedValue</span><span class="p">(),</span>
    <span class="c1">// Create Rule (Copy) - retained</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">ABRecordCopyCompositeName</span><span class="p">(</span><span class="n">bestFriendRecord</span><span class="p">)</span><span class="o">?</span><span class="p">.</span><span class="n">takeRetainedValue</span><span class="p">()</span> <span class="kt">as</span><span class="o">?</span> <span class="n">String</span>
<span class="p">{</span>
    <span class="n">println</span><span class="p">(</span><span class="s">&quot;\(name): BFF!&quot;</span><span class="p">)</span>
    <span class="c1">// Rhonda Shorsheimer: BFF!</span>
<span class="p">}</span>
</code></pre></div>
<p>With Swift 1.2&rsquo;s improved optional bindings, it&rsquo;s a piece of cake to unwrap, take the underlying value, and cast to a Swift type.</p>

<h2 id="better-off-without">Better Off Without</h2>

<p>Now that we&rsquo;ve looked at how to work with <code>Unmanaged</code>, let&rsquo;s look at how to get rid of it altogether. If <code>Unmanaged</code> references are returned from calls to your own C functions, you&rsquo;re better off using annotations. Annotations let the compiler know how to automatically memory-manage your return value: instead of an <code>Unmanaged&lt;CFString&gt;</code>, you receive a <code>CFString</code>, which is type-safe and fully memory-managed by Swift.</p>

<p>For example, let&rsquo;s take a function that combines two <code>CFString</code> instances and annotate that function to tell Swift how to memory-manage the resulting string. Following the naming conventions described above, our function will be called <code>CreateJoinedString</code>—that name communicates that the caller will own the returned string.</p>
<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">CFStringRef</span> <span class="nf">CreateJoinedString</span><span class="p">(</span><span class="n">CFStringRef</span> <span class="n">string1</span><span class="p">,</span> <span class="n">CFStringRef</span> <span class="n">string2</span><span class="p">);</span>
</code></pre></div>
<p>Sure enough, in the implementation you can see that this creates <code>resultString</code> with <code>CFStringCreateMutableCopy</code> and returns it without a balancing <code>CFRelease</code>: </p>
<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">CFStringRef</span> <span class="nf">CreateJoinedString</span><span class="p">(</span><span class="n">CFStringRef</span> <span class="n">string1</span><span class="p">,</span> <span class="n">CFStringRef</span> <span class="n">string2</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">CFMutableStringRef</span> <span class="n">resultString</span> <span class="o">=</span> <span class="n">CFStringCreateMutableCopy</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">string1</span><span class="p">);</span>
    <span class="n">CFStringAppend</span><span class="p">(</span><span class="n">resultString</span><span class="p">,</span> <span class="n">string2</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">resultString</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>In our Swift code, just as above, we still need to manage the memory manually. Our function is imported as returning an <code>Unmanaged&lt;CFString&gt;!</code>:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// imported declaration:</span>
<span class="k">func</span> <span class="n">CreateJoinedString</span><span class="p">(</span><span class="nl">string1</span><span class="p">:</span> <span class="n">CFString</span><span class="o">!</span><span class="p">,</span> <span class="nl">string2</span><span class="p">:</span> <span class="n">CFString</span><span class="o">!</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Unmanaged</span><span class="o">&lt;</span><span class="n">CFString</span><span class="o">&gt;!</span>

<span class="c1">// to call:</span>
<span class="k">let</span> <span class="n">joinedString</span> <span class="o">=</span> <span class="n">CreateJoinedString</span><span class="p">(</span><span class="s">&quot;First&quot;</span><span class="p">,</span> <span class="s">&quot;Second&quot;</span><span class="p">).</span><span class="n">takeRetainedValue</span><span class="p">()</span> <span class="kt">as</span> <span class="n">String</span>
</code></pre></div>
<p>Since our function follows the naming conventions described in the Create Rule, we can turn on the compiler&rsquo;s implicit bridging to eliminate the <code>Unmanaged</code> wrapper. Core Foundation provides two macros—namely, <code>CF_IMPLICIT_BRIDGING_ENABLED</code> and <code>CF_IMPLICIT_BRIDGING_DISABLED</code>—that turn on and off the Clang <code>arc_cf_code_audited</code> attribute:</p>
<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">CF_IMPLICIT_BRIDGING_ENABLED</span>            <span class="c1">// get rid of Unmanaged</span>
<span class="cp">#pragma clang assume_nonnull begin      </span><span class="c1">// also get rid of !s</span>

<span class="n">CFStringRef</span> <span class="n">CreateJoinedString</span><span class="p">(</span><span class="n">CFStringRef</span> <span class="n">string1</span><span class="p">,</span> <span class="n">CFStringRef</span> <span class="n">string2</span><span class="p">);</span>

<span class="cp">#pragma clang assume_nonnull end</span>
<span class="n">CF_IMPLICIT_BRIDGING_DISABLED</span>
</code></pre></div>
<p>Because Swift now handles the memory management for this return value, our code is simpler and skips use of <code>Unmanaged</code> altogether:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="c1">// imported declaration:</span>
<span class="k">func</span> <span class="n">CreateJoinedString</span><span class="p">(</span><span class="nl">string1</span><span class="p">:</span> <span class="n">CFString</span><span class="p">,</span> <span class="nl">string2</span><span class="p">:</span> <span class="n">CFString</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CFString</span>

<span class="c1">// to call:</span>
<span class="k">let</span> <span class="n">joinedString</span> <span class="o">=</span> <span class="n">CreateJoinedString</span><span class="p">(</span><span class="s">&quot;First&quot;</span><span class="p">,</span> <span class="s">&quot;Second&quot;</span><span class="p">)</span> <span class="kt">as</span> <span class="n">String</span>
</code></pre></div>
<p>Finally, when your function naming <em>doesn&rsquo;t</em> comply with the Create/Get Rules, there&rsquo;s an obvious fix: rename your function to comply with the Create/Get Rules. Of course, in practice, that&rsquo;s not always an easy fix, but having an API that communicates clearly and consistently pays dividends beyond just avoiding <code>Unmanaged</code>. If renaming isn&rsquo;t an option, there are two other annotations to use: functions that pass ownership to the caller should use <code>CF_RETURNS_RETAINED</code>, while those that don&rsquo;t should use <code>CF_RETURNS_NOT_RETAINED</code>. For instance, the poorly-named <code>MakeJoinedString</code> is shown here with manual annotations:</p>
<div class="highlight"><pre><code class="language-c" data-lang="c"><span class="n">CF_RETURNS_RETAINED</span>
<span class="n">__nonnull</span> <span class="n">CFStringRef</span> <span class="nf">MakeJoinedString</span><span class="p">(</span><span class="n">__nonnull</span> <span class="n">CFStringRef</span> <span class="n">string1</span><span class="p">,</span>
                                       <span class="n">__nonnull</span> <span class="n">CFStringRef</span> <span class="n">string2</span><span class="p">);</span>
</code></pre></div>
<hr>

<p>One gets that feeling that <code>Unmanaged</code> is a stopgap measure—that is, a way to use CoreFoundation while the work of annotating the mammoth API is still in progress. As functions are revised to interoperate more cleanly, each successive Xcode release may allow you to strip <code>takeRetainedValue()</code> calls from your codebase. Yet until the sun sets on the last <code>CFUnannotatedFunctionRef</code>, <code>Unmanaged</code> will be there to help you bridge the gap.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2015-04-13-unmanaged.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
        
            <em>This article uses Swift version 1.2.</em>
        
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Nate Cook" itemprop="image" src="http://nshipster.s3.amazonaws.com/nate-cook.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/nate-cook/">Nate Cook</a></span>

      <p><a href="http://natecook.com">Nate Cook</a> (<a href="https://twitter.com/nnnnnnnn">@nnnnnnnn</a>) is an independent web and application developer who <a href="http://natecook.com/blog/">writes frequently about topics in Swift</a>, and the creator of <a href="http://swiftdoc.org">SwiftDoc.org</a>.</p>


      
        <a href="https://plus.google.com/?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    
        

  <section id="promotion">
    
    <small>Recommended Reading</small>
    
    
    

<div id="" class="book" itemscope itemtype="http://schema.org/Product">
  <div itemscope itemtype="http://schema.org/Book">
    <link itemprop="bookFormat" href="http://schema.org/EBook"/>
    <a href="https://gum.co/nshipster-swift/" title="NSHipster: Obscure Topics in Cocoa & Swift" target="_blank">
      <img src="//cdn.nshipster.com/images/nshipster-swift-cover@2x.png" class="cover" alt="NSHipster: Obscure Topics in Cocoa & Swift" itemprop="image"/>
    </a>
    <span itemprop="name" style="display:none;" hidden>NSHipster: Obscure Topics in Cocoa & Swift</span>
    <span itemprop="author" style="display:none;" hidden>Mattt Thompson & Nate Cook</span>
    <div itemprop="offers" itemscope itemtype="http://schema.org/Offer" style="display:none;">
      <link itemprop="availability" href="http://schema.org/InStock"/>
      <meta itemprop="priceCurrency" content="USD"/>
      <span itemprop="price">29</span>
    </div>
  </div>
</div>

    <h3>NSHipster, Second Edition</h3>
    <h4>Obscure Topics in Cocoa & Swift</h4>
    <p>Revised and extended to focus on using Swift in iOS and OS X development, NSHipster: Obscure Topics in Cocoa &amp; Swift is an essential updated guide.</p>

    
    <a class="buy" href="https://gum.co/nshipster-swift/" target="_blank">Buy Now on Gumroad</a>
    
  </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/swift-documentation/" title="Swift Documentation" rel="next">Swift Documentation</a>
            </h1>

            <p>Code structure and organization is a matter of pride for developers. Clear and consistent code signifies clear and consistent thought. Read on to learn about the recent changes to documentation with Xcode 7 &amp; Swift 2.0.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/swift-documentation/" title="Swift Documentation">Swift Documentation</a>
            </li>
            
          
          
            <li>
              <a href="/swift-default-protocol-implementations/" title="Swift Default Protocol Implementations">Swift Default Protocol Implementations</a>
            </li>
            
          
          
            <li>
              <a href="/guard-and-defer/" title="guard & defer">guard & defer</a>
            </li>
            
          
          
            <li>
              <a href="/swift-collection-protocols/" title="Swift Collection Protocols">Swift Collection Protocols</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
