<!doctype html>
<html lang="en-US">
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
  
    <title>PHImageManager - NSHipster</title>
    <meta name="description" content="Yesterday's article described various techniques for resizing images using APIs from the UIKit, Core Graphics, Core Image, and Image I/O frameworks. However, that article failed to mention some rather extraordinary functionality baked into the new Photos framework which takes care of all of this for you."/>
    <link rel="canonical" href="http://nshipster.com/phimagemanager/"/>
  
  
  
  
  <meta name="author" content="Mattt Thompson"/>
  
  <meta name="revisit-after" content="7 days"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"/>
  <link rel="alternate" type="application/rss+xml" title="RSS" href="http://nshipster.com/feed.xml"/>
  <link rel="stylesheet" type="text/css" href="http://nshipster.com/css/screen.css"/>
  <link rel="apple-touch-icon" href="/touch-icon-iphone.png"/>
  <link rel="apple-touch-icon" sizes="76x76" href="/touch-icon-ipad.png"/>
  <link rel="apple-touch-icon" sizes="120x120" href="/touch-icon-iphone-retina.png"/>
  <link rel="apple-touch-icon" sizes="152x152" href="/touch-icon-ipad-retina.png"/>
  <link rel="icon" sizes="16x16 24x24 32x32 48x48 64x64" type="image/vnd.microsoft.icon" href="/favicon.ico"/>
  <link rel="mask-icon" sizes="any" href="/website_icon.svg" color="black"/>
  <link rel="author" type="text/plain" href="http://nshipster.com/humans.txt"/>

  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@NSHipster"/>
  
  <meta name="twitter:creator" content="@mattt"/>
  
  
    <meta name="twitter:title" content="PHImageManager"/>
    <meta name="twitter:description" content="Yesterday&#39;s article described various techniques for resizing images using APIs from the UIKit, Core Graphics, Core Image, and Image I/O frameworks. However, that article failed to mention some rather extraordinary functionality baked into the new Photos framework which takes care of all of this for you."/>
  
  <meta property="twitter:account_id" content="629523445"/>

  <meta property="og:site_name" content="NSHipster"/>
  <meta property="og:image" content="http://nshipster.com/touch-icon-ipad-retina.png"/>
  
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="PHImageManager"/>
    <meta property="og:url" content="http://nshipster.com/phimagemanager/"/>
    <meta property="og:description" content="Yesterday&#39;s article described various techniques for resizing images using APIs from the UIKit, Core Graphics, Core Image, and Image I/O frameworks. However, that article failed to mention some rather extraordinary functionality baked into the new Photos framework which takes care of all of this for you."/>
    <meta property="article:published_time" content="2014-09-16T00:00:00-07:00"/>
    <meta property="article:modified_time" content="2015-12-09T21:34:50-08:00"/>
    <meta property="article:tag" content="cocoa"/>
    <meta property="article:publisher" content="https://www.facebook.com/NSHipster">
  

  
    <meta property="st:title" content="PHImageManager"/>
    <meta property="st:type" content="article"/>
  
  
  <meta property="nshipster:hide-single-lang" content="swift,objective-c"/>
</head>

<body itemscope itemtype="http://schema.org/WebPage">

  <script src="http://nshipster.com/js/zepto.min.js"></script>
  <script src="http://nshipster.com/js/application.js"></script>

  <div role="container">
    <header role="banner">
      <h1 id="logo">
        <a href="/">
          <svg id="ns" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
<g>
  <path fill="#F58020" d="M0.6,1h13.7L27,24.4h0.1V1h12.7v43.6H26.8L13.4,20.8h-0.1v23.8H0.6V1z"/>
  <path fill="#F58020" d="M51.4,30c0,1.1,0.2,2.1,0.5,2.9c1,2.6,3.9,3.2,6.4,3.2c2.2,0,5.6-0.7,5.6-4c0-2.3-1.9-2.9-9.4-5
    c-6.9-2-14.8-3.8-14.8-12.6C39.7,4.3,48.3,0,57.3,0c9.5,0,17.8,3.6,18.2,14.2H62.8c0.2-1.6-0.5-2.7-1.6-3.5
    c-1.1-0.8-2.6-1.1-4-1.1c-1.8,0-4.8,0.5-4.8,2.9c0.2,3.1,6.5,3.8,12.6,5.5c6.2,1.7,12.3,4.6,12.3,12.6c0,11.4-10.4,15-20.1,15
    c-4.9,0-19-1.8-19.2-15.7H51.4z"/>
</g>
</svg>

          <svg id="mustache" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 79.5 45.7" enable-background="new 0 0 79.5 45.7" xml:space="preserve">
  <g transform="translate(0,-952.36217)" opacity="0.95">
    <path id="path2987" fill="#010101" d="M28.2,971.4c-10,0.5-19.1,13.3-28.2,2.1c0,15.1,23.7,30.5,39.8,16.3
      c16,14.1,39.8-1.3,39.8-16.3c-12.5,15.4-25-14.4-39.8,4.5C35.8,972.7,31.9,971.2,28.2,971.4z"/>
  </g>
</svg>

        </a>

        <span hidden style="display:none;">NSHipster</span>
      </h1>

      <form role="search">
        <input type="text" id="st-search-input" class="st-search-input" />
      </form>

      
    </header>

    <div id="main" role="main" itemprop="mainContentOfPage">
      

<article role="article" itemscope itemtype="http://schema.org/Article">
  <header role="heading">
    <h1 class="title" itemprop="name">
      <a href="/phimagemanager/">PHImage​Manager</a>
    </h1>

    <h2>
    
      Written by <a class="author" href="/authors/mattt-thompson/">Mattt Thompson</a> —
    
    <time datetime="2014-09-16T00:00:00-07:00" itemprop="datePublished">September 16<sup>th</sup>, 2014</time>
    
    </h2>

  </header>

  <div class="content" itemprop="articleBody" data-swiftype-index="true">
    <p><a href="http://nshipster.com/image-resizing/">Yesterday&rsquo;s article</a> described various techniques for resizing images using APIs from the UIKit, Core Graphics, Core Image, and Image I/O frameworks. However, that article failed to mention some rather extraordinary functionality baked into the new Photos framework which takes care of all of this for you.</p>

<p>For anyone developing apps that manage photos or videos, meet your new best friend: <code>PHImageManager</code>.</p>

<hr>

<p>New in iOS 8, the Photos framework is something of a triumph for the platform. Photography is one of the key verticals for the iPhone: in addition to being the <a href="https://www.flickr.com/cameras">most popular cameras in the world</a>, photo &amp; video apps are regularly featured on the App Store. This framework goes a long way to empower apps to do even more, with a shared set of tools and primitives.</p>

<p>A great example of this is <code>PHImageManager</code>, which acts as a centralized coordinator for image assets. Previously, each app was responsible for creating and caching their own image thumbnails. In addition to requiring extra work on the part of developers, redundant image caches could potentially add up to <em>gigabytes</em> of data across the system. But with <code>PHImageManager</code>, apps don&rsquo;t have to worry about resizing or caching logistics, and can instead focus on building out features.</p>

<h2 id="requesting-asset-images">Requesting Asset Images</h2>

<p><code>PHImageManager</code> provides several APIs for asynchronously fetching image and video data for assets. For a given asset, a <code>PHImageManager</code> can request an image at a particular size and content mode, with a high degree of configurability in terms of quality and delivery options.</p>

<p>But first, here&rsquo;s a simple example of how a table view might asynchronously load cell images with asset thumbnails:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">import</span> <span class="n">Photos</span>

<span class="k">var</span> <span class="nl">assets</span><span class="p">:</span> <span class="p">[</span><span class="n">PHAsset</span><span class="p">]</span>

<span class="k">func</span> <span class="n">tableView</span><span class="p">(</span><span class="nl">tableView</span><span class="p">:</span> <span class="bp">UITableView</span><span class="p">,</span> <span class="n">cellForRowAtIndexPath</span> <span class="nl">indexPath</span><span class="p">:</span> <span class="bp">NSIndexPath</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="bp">UITableViewCell</span> <span class="p">{</span>
    <span class="k">let</span> <span class="n">cell</span> <span class="o">=</span> <span class="n">tableView</span><span class="p">.</span><span class="n">dequeueReusableCellWithIdentifier</span><span class="p">(</span><span class="s">&quot;Cell&quot;</span><span class="p">,</span> <span class="nl">forIndexPath</span><span class="p">:</span> <span class="n">indexPath</span><span class="p">)</span>

    <span class="k">let</span> <span class="n">manager</span> <span class="o">=</span> <span class="n">PHImageManager</span><span class="p">.</span><span class="n">defaultManager</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">cell</span><span class="p">.</span><span class="n">tag</span> <span class="o">!=</span> <span class="mi">0</span> <span class="p">{</span>
        <span class="n">manager</span><span class="p">.</span><span class="n">cancelImageRequest</span><span class="p">(</span><span class="n">PHImageRequestID</span><span class="p">(</span><span class="n">cell</span><span class="p">.</span><span class="n">tag</span><span class="p">))</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="n">asset</span> <span class="o">=</span> <span class="n">assets</span><span class="p">[</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">]</span>

    <span class="k">if</span> <span class="k">let</span> <span class="n">creationDate</span> <span class="o">=</span> <span class="n">asset</span><span class="p">.</span><span class="n">creationDate</span> <span class="p">{</span>
        <span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="o">?</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="bp">NSDateFormatter</span><span class="p">.</span><span class="n">localizedStringFromDate</span><span class="p">(</span><span class="n">creationDate</span><span class="p">,</span>
            <span class="nl">dateStyle</span><span class="p">:</span> <span class="p">.</span><span class="n">MediumStyle</span><span class="p">,</span>
            <span class="nl">timeStyle</span><span class="p">:</span> <span class="p">.</span><span class="n">MediumStyle</span>
        <span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="o">?</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">nil</span>
    <span class="p">}</span>

    <span class="n">cell</span><span class="p">.</span><span class="n">tag</span> <span class="o">=</span> <span class="n">Int</span><span class="p">(</span><span class="n">manager</span><span class="p">.</span><span class="n">requestImageForAsset</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span>
        <span class="nl">targetSize</span><span class="p">:</span> <span class="bp">CGSize</span><span class="p">(</span><span class="nl">width</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">,</span> <span class="nl">height</span><span class="p">:</span> <span class="mf">100.0</span><span class="p">),</span>
        <span class="nl">contentMode</span><span class="p">:</span> <span class="p">.</span><span class="n">AspectFill</span><span class="p">,</span>
        <span class="nl">options</span><span class="p">:</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="k">in</span>
            <span class="n">cell</span><span class="p">.</span><span class="n">imageView</span><span class="o">?</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">result</span>
    <span class="p">})</span>

    <span class="k">return</span> <span class="n">cell</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="p">@</span><span class="n">import</span> <span class="n">Photos</span><span class="p">;</span>

<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="bp">NSArray</span><span class="o">&lt;</span><span class="n">PHAsset</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">assets</span><span class="p">;</span>

<span class="p">-</span> <span class="p">(</span><span class="bp">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="bp">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">cellForRowAtIndexPath:</span><span class="p">(</span><span class="bp">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span> <span class="p">{</span>
    <span class="bp">UITableViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">dequeueReusableCellWithIdentifier</span><span class="p">:</span><span class="s">@&quot;Cell&quot;</span>
                                                            <span class="nl">forIndexPath</span><span class="p">:</span><span class="n">indexPath</span><span class="p">];</span>

    <span class="n">PHImageManager</span> <span class="o">*</span><span class="n">manager</span> <span class="o">=</span> <span class="p">[</span><span class="n">PHImageManager</span> <span class="n">defaultManager</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">cell</span><span class="p">.</span><span class="n">tag</span><span class="p">)</span> <span class="p">{</span>
        <span class="p">[</span><span class="n">manager</span> <span class="nl">cancelImageRequest</span><span class="p">:(</span><span class="n">PHImageRequestID</span><span class="p">)</span><span class="n">cell</span><span class="p">.</span><span class="n">tag</span><span class="p">];</span>
    <span class="p">}</span>

    <span class="n">PHAsset</span> <span class="o">*</span><span class="n">asset</span> <span class="o">=</span> <span class="nb">self</span><span class="p">.</span><span class="n">assets</span><span class="p">[</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">asset</span><span class="p">.</span><span class="n">creationDate</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSDateFormatter</span> <span class="nl">localizedStringFromDate</span><span class="p">:</span><span class="n">asset</span><span class="p">.</span><span class="n">creationDate</span>
                                                             <span class="nl">dateStyle</span><span class="p">:</span><span class="n">NSDateFormatterMediumStyle</span>
                                                             <span class="nl">timeStyle</span><span class="p">:</span><span class="n">NSDateFormatterMediumStyle</span><span class="p">];</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">cell</span><span class="p">.</span><span class="n">tag</span> <span class="o">=</span> <span class="p">[</span><span class="n">manager</span> <span class="nl">requestImageForAsset</span><span class="p">:</span><span class="n">asset</span>
                                  <span class="nl">targetSize</span><span class="p">:</span><span class="n">CGSizeMake</span><span class="p">(</span><span class="mf">100.0</span><span class="p">,</span> <span class="mf">100.0</span><span class="p">)</span>
                                 <span class="nl">contentMode</span><span class="p">:</span><span class="n">PHImageContentModeAspectFill</span>
                                     <span class="nl">options</span><span class="p">:</span><span class="nb">nil</span>
                               <span class="nl">resultHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">UIImage</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">result</span><span class="p">,</span> <span class="bp">NSDictionary</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">info</span><span class="p">)</span> <span class="p">{</span>
                                   <span class="n">cell</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">result</span><span class="p">;</span>
                               <span class="p">}];</span>

    <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>API usage is pretty straightforward: the <code>defaultManager</code> asynchronously requests an image for the asset corresponding to the cell at a particular index path, and the cell image view is set whenever the result comes back. The only tricky part is handling cell reuse—(1) before assigning the resulting image to the cell&rsquo;s image view, we call <code>cellForRowAtIndexPath</code> to be sure we&rsquo;re working with the right cell, and (2) we use the cell&rsquo;s <code>tag</code> to keep track of image requests, in order to cancel any pending requests when a cell is reused.</p>

<h2 id="batch-pre-caching-asset-images">Batch Pre-Caching Asset Images</h2>

<p>If there&rsquo;s reasonable assurance that most of a set of assets will be viewed at some point, it may make sense to pre-cache those images. <code>PHCachingImageManager</code> is a subclass of <code>PHImageManager</code> designed to do just that.</p>

<p>For example, here&rsquo;s how the results of a <code>PHAsset</code> fetch operation can be pre-cached in order to optimize image availability:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="n">cachingImageManager</span> <span class="o">=</span> <span class="n">PHCachingImageManager</span><span class="p">()</span>

<span class="k">let</span> <span class="n">options</span> <span class="o">=</span> <span class="n">PHFetchOptions</span><span class="p">()</span>
<span class="n">options</span><span class="p">.</span><span class="n">predicate</span> <span class="o">=</span> <span class="bp">NSPredicate</span><span class="p">(</span><span class="nl">format</span><span class="p">:</span> <span class="s">&quot;favorite == YES&quot;</span><span class="p">)</span>
<span class="n">options</span><span class="p">.</span><span class="n">sortDescriptors</span> <span class="o">=</span> <span class="p">[</span>
    <span class="bp">NSSortDescriptor</span><span class="p">(</span><span class="nl">key</span><span class="p">:</span> <span class="s">&quot;creationDate&quot;</span><span class="p">,</span> <span class="nl">ascending</span><span class="p">:</span> <span class="nb">true</span><span class="p">)</span>
<span class="p">]</span>

<span class="k">let</span> <span class="n">results</span> <span class="o">=</span> <span class="n">PHAsset</span><span class="p">.</span><span class="n">fetchAssetsWithMediaType</span><span class="p">(.</span><span class="n">Image</span><span class="p">,</span> <span class="nl">options</span><span class="p">:</span> <span class="n">options</span><span class="p">)</span>
<span class="k">var</span> <span class="nl">assets</span><span class="p">:</span> <span class="p">[</span><span class="n">PHAsset</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">results</span><span class="p">.</span><span class="n">enumerateObjectsUsingBlock</span> <span class="p">{</span> <span class="p">(</span><span class="n">object</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="k">in</span>
    <span class="k">if</span> <span class="k">let</span> <span class="n">asset</span> <span class="o">=</span> <span class="n">object</span> <span class="kt">as</span><span class="o">?</span> <span class="n">PHAsset</span> <span class="p">{</span>
        <span class="n">assets</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">asset</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">cachingImageManager</span><span class="p">.</span><span class="n">startCachingImagesForAssets</span><span class="p">(</span><span class="n">assets</span><span class="p">,</span>
    <span class="nl">targetSize</span><span class="p">:</span> <span class="n">PHImageManagerMaximumSize</span><span class="p">,</span>
    <span class="nl">contentMode</span><span class="p">:</span> <span class="p">.</span><span class="n">AspectFit</span><span class="p">,</span>
    <span class="nl">options</span><span class="p">:</span> <span class="nb">nil</span>
<span class="p">)</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="n">PHCachingImageManager</span> <span class="o">*</span><span class="n">cachingImageManager</span> <span class="o">=</span> <span class="p">[[</span><span class="n">PHCachingImageManager</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>

<span class="n">PHFetchOptions</span> <span class="o">*</span><span class="n">options</span> <span class="o">=</span> <span class="p">[[</span><span class="n">PHFetchOptions</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="n">options</span><span class="p">.</span><span class="n">predicate</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSPredicate</span> <span class="nl">predicateWithFormat</span><span class="p">:</span><span class="s">@&quot;favorite == YES&quot;</span><span class="p">];</span>
<span class="n">options</span><span class="p">.</span><span class="n">sortDescriptors</span> <span class="o">=</span> <span class="l">@[</span><span class="p">[</span><span class="bp">NSSortDescriptor</span> <span class="nl">sortDescriptorWithKey</span><span class="p">:</span><span class="s">@&quot;&quot;</span> <span class="nl">ascending</span><span class="p">:</span><span class="nb">YES</span><span class="p">]</span><span class="l">]</span><span class="p">;</span>

<span class="n">PHFetchResult</span> <span class="o">*</span><span class="n">results</span> <span class="o">=</span> <span class="p">[</span><span class="n">PHAsset</span> <span class="nl">fetchAssetsWithMediaType</span><span class="p">:</span><span class="n">PHAssetMediaTypeImage</span>
                                                  <span class="nl">options</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>

<span class="bp">NSMutableArray</span><span class="o">&lt;</span><span class="n">PHAsset</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">assets</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSMutableArray</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
<span class="p">[</span><span class="n">results</span> <span class="nl">enumerateObjectsUsingBlock</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="kt">id</span>  <span class="n">_Nonnull</span> <span class="n">object</span><span class="p">,</span> <span class="bp">NSUInteger</span> <span class="n">idx</span><span class="p">,</span> <span class="kt">BOOL</span> <span class="o">*</span> <span class="n">_Nonnull</span> <span class="n">stop</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">([</span><span class="n">object</span> <span class="nl">isKindOfClass</span><span class="p">:[</span><span class="n">PHAsset</span> <span class="k">class</span><span class="p">]])</span> <span class="p">{</span>
        <span class="p">[</span><span class="n">assets</span> <span class="nl">addObject</span><span class="p">:</span><span class="n">object</span><span class="p">];</span>
    <span class="p">}</span>
<span class="p">}];</span>

<span class="p">[</span><span class="n">cachingImageManager</span> <span class="nl">startCachingImagesForAssets</span><span class="p">:</span><span class="n">assets</span>
                                      <span class="nl">targetSize</span><span class="p">:</span><span class="n">PHImageManagerMaximumSize</span>
                                     <span class="nl">contentMode</span><span class="p">:</span><span class="n">PHImageContentModeAspectFit</span>
                                         <span class="nl">options</span><span class="p">:</span><span class="nb">nil</span><span class="p">];</span>
</code></pre></div>
<p>Alternatively, Swift <code>willSet</code> / <code>didSet</code> hooks offer a convenient way to automatically start pre-caching assets as they are loaded:</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="n">cachingImageManager</span> <span class="o">=</span> <span class="n">PHCachingImageManager</span><span class="p">()</span>
<span class="k">var</span> <span class="nl">assets</span><span class="p">:</span> <span class="p">[</span><span class="n">PHAsset</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span> <span class="p">{</span>
    <span class="kr">willSet</span> <span class="p">{</span>
        <span class="n">cachingImageManager</span><span class="p">.</span><span class="n">stopCachingImagesForAllAssets</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="kr">didSet</span> <span class="p">{</span>
        <span class="n">cachingImageManager</span><span class="p">.</span><span class="n">startCachingImagesForAssets</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">assets</span><span class="p">,</span>
            <span class="nl">targetSize</span><span class="p">:</span> <span class="n">PHImageManagerMaximumSize</span><span class="p">,</span>
            <span class="nl">contentMode</span><span class="p">:</span> <span class="p">.</span><span class="n">AspectFit</span><span class="p">,</span>
            <span class="nl">options</span><span class="p">:</span> <span class="nb">nil</span>
        <span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="phimagerequestoptions">PHImageRequestOptions</h2>

<p>In the previous examples, the <code>options</code> parameter of <code>requestImageForAsset()</code> &amp; <code>startCachingImagesForAssets()</code> have been set to <code>nil</code>. Passing an instance of <code>PHImageRequestOptions</code> allows for fine-grained control over what gets loaded and how.</p>

<p><code>PHImageRequestOptions</code> has the following properties:</p>

<blockquote>
<ul>
<li><code>deliveryMode</code> <em><code>PHImageRequestOptionsDeliveryMode</code></em>: (<em>Described Below</em>)</li>
<li><code>networkAccessAllowed</code> <em><code>Bool</code></em>: Will download the image from iCloud, if necessary.</li>
<li><code>normalizedCropRect</code> <em><code>CGRect</code></em>: Specify a crop rectangle in unit coordinates of the original image.</li>
<li><code>progressHandler</code>: Provide caller a way to be told how much progress has been made prior to delivering the data when it comes from iCloud. Defaults to nil, shall be set by caller</li>
<li><code>resizeMode</code> <em><code>PHImageRequestOptionsResizeMode</code></em>: <code>.None</code>, <code>.Fast</code>, or <code>.Exact</code>. Does not apply when size is <code>PHImageManagerMaximumSize</code>.</li>
<li><code>synchronous</code> <em><code>Bool</code></em>: Return only a single result, blocking until available (or failure). Defaults to NO</li>
<li><code>version</code> <em><code>PHImageRequestOptionsVersion</code></em>: <code>.Current</code>, <code>.Unadjusted</code>, or <code>.Original</code></li>
</ul>
</blockquote>

<p>Several of these properties take a specific <code>enum</code> type, which are all pretty self explanatory, save for <code>PHImageRequestOptionsDeliveryMode</code>, which encapsulates some pretty complex behavior:</p>

<h3 id="phimagerequestoptionsdeliverymode">PHImageRequestOptionsDeliveryMode</h3>

<blockquote>
<ul>
<li><code>.Opportunistic</code>: Photos automatically provides one or more results in order to balance image quality and responsiveness. Photos may call the resultHandler block method more than once, such as to provide a low-quality image suitable for displaying temporarily while it prepares a high-quality image. If the image manager has already cached the requested image, Photos calls your result handler only once. This option is not available if the synchronous property is <code>false</code>.</li>
<li><code>.HighQualityFormat</code>: Photos provides only the highest-quality image available, regardless of how much time it takes to load. If the synchronous property is <code>true</code> or if using the <code>requestImageDataForAsset:options:resultHandler:</code> method, this behavior is the default and only option.</li>
<li><code>.FastFormat</code>: Photos provides only a fast-loading image, possibly sacrificing image quality. If a high-quality image cannot be loaded quickly, the result handler provides a low-quality image. Check the <code>PHImageResultIsDegradedKey</code> key in the <code>info</code> dictionary to determine the quality of image provided to the result handler.</li>
</ul>
</blockquote>

<h2 id="cropping-asset-to-detected-faces-using-2-phase-image-request">Cropping Asset To Detected Faces Using 2-Phase Image Request</h2>

<p>Using <code>PHImageManager</code> and <code>PHImageRequestOptions</code> to their full capacity allows for rather sophisticated functionality. One could, for example, use successive image requests to crop full-quality assets to any faces detected in the image.</p>
<div class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">let</span> <span class="nl">asset</span><span class="p">:</span> <span class="n">PHAsset</span>

<span class="p">@</span><span class="kt">IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nl">imageView</span><span class="p">:</span> <span class="bp">UIImageView</span><span class="o">!</span>
<span class="p">@</span><span class="kt">IBOutlet</span> <span class="k">weak</span> <span class="k">var</span> <span class="nl">progressView</span><span class="p">:</span> <span class="bp">UIProgressView</span><span class="o">!</span>

<span class="kr">override</span> <span class="k">func</span> <span class="n">viewDidLoad</span><span class="p">()</span> <span class="p">{</span>
    <span class="nb">super</span><span class="p">.</span><span class="n">viewDidLoad</span><span class="p">()</span>

    <span class="k">let</span> <span class="n">manager</span> <span class="o">=</span> <span class="n">PHImageManager</span><span class="p">.</span><span class="n">defaultManager</span><span class="p">()</span>

    <span class="k">let</span> <span class="n">initialRequestOptions</span> <span class="o">=</span> <span class="n">PHImageRequestOptions</span><span class="p">()</span>
    <span class="n">initialRequestOptions</span><span class="p">.</span><span class="n">synchronous</span> <span class="o">=</span> <span class="nb">true</span>
    <span class="n">initialRequestOptions</span><span class="p">.</span><span class="n">resizeMode</span> <span class="o">=</span> <span class="p">.</span><span class="n">Fast</span>
    <span class="n">initialRequestOptions</span><span class="p">.</span><span class="n">deliveryMode</span> <span class="o">=</span> <span class="p">.</span><span class="n">FastFormat</span>

    <span class="n">manager</span><span class="p">.</span><span class="n">requestImageForAsset</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span>
        <span class="nl">targetSize</span><span class="p">:</span> <span class="bp">CGSize</span><span class="p">(</span><span class="nl">width</span><span class="p">:</span> <span class="mf">250.0</span><span class="p">,</span> <span class="nl">height</span><span class="p">:</span> <span class="mf">250.0</span><span class="p">),</span>
        <span class="nl">contentMode</span><span class="p">:</span> <span class="p">.</span><span class="n">AspectFit</span><span class="p">,</span>
        <span class="nl">options</span><span class="p">:</span> <span class="n">initialRequestOptions</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">initialResult</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="k">in</span>
            <span class="kr">guard</span> <span class="k">let</span> <span class="n">ciImage</span> <span class="o">=</span> <span class="n">initialResult</span><span class="o">?</span><span class="p">.</span><span class="bp">CIImage</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">return</span>
            <span class="p">}</span>

            <span class="k">let</span> <span class="n">finalRequestOptions</span> <span class="o">=</span> <span class="n">PHImageRequestOptions</span><span class="p">()</span>
            <span class="n">finalRequestOptions</span><span class="p">.</span><span class="n">progressHandler</span> <span class="o">=</span> <span class="p">{</span> <span class="p">(</span><span class="n">progress</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="k">in</span>
                <span class="nb">self</span><span class="p">.</span><span class="n">progressView</span><span class="p">.</span><span class="n">progress</span> <span class="o">=</span> <span class="n">Float</span><span class="p">(</span><span class="n">progress</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="k">let</span> <span class="n">detector</span> <span class="o">=</span> <span class="bp">CIDetector</span><span class="p">(</span>
                <span class="nl">ofType</span><span class="p">:</span> <span class="n">CIDetectorTypeFace</span><span class="p">,</span>
                <span class="nl">context</span><span class="p">:</span> <span class="nb">nil</span><span class="p">,</span>
                <span class="nl">options</span><span class="p">:</span> <span class="p">[</span><span class="nl">CIDetectorAccuracy</span><span class="p">:</span> <span class="n">CIDetectorAccuracyLow</span><span class="p">]</span>
            <span class="p">)</span>

            <span class="k">let</span> <span class="n">features</span> <span class="o">=</span> <span class="n">detector</span><span class="p">.</span><span class="n">featuresInImage</span><span class="p">(</span><span class="n">ciImage</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">features</span><span class="p">.</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
                <span class="k">var</span> <span class="n">rect</span> <span class="o">=</span> <span class="n">CGRectZero</span>
                <span class="n">features</span><span class="p">.</span><span class="n">forEach</span> <span class="p">{</span>
                    <span class="n">rect</span><span class="p">.</span><span class="n">unionInPlace</span><span class="p">(</span><span class="err">$</span><span class="mf">0.</span><span class="n">bounds</span><span class="p">)</span>
                <span class="p">}</span>

                <span class="k">let</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">CGAffineTransformMakeScale</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">initialResult</span><span class="o">!</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">initialResult</span><span class="o">!</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">)</span>
                <span class="n">finalRequestOptions</span><span class="p">.</span><span class="n">normalizedCropRect</span> <span class="o">=</span> <span class="n">CGRectApplyAffineTransform</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">transform</span><span class="p">)</span>
            <span class="p">}</span>

            <span class="n">manager</span><span class="p">.</span><span class="n">requestImageForAsset</span><span class="p">(</span><span class="nb">self</span><span class="p">.</span><span class="n">asset</span><span class="p">,</span>
                <span class="nl">targetSize</span><span class="p">:</span> <span class="n">PHImageManagerMaximumSize</span><span class="p">,</span>
                <span class="nl">contentMode</span><span class="p">:</span> <span class="p">.</span><span class="n">AspectFit</span><span class="p">,</span>
                <span class="nl">options</span><span class="p">:</span> <span class="n">finalRequestOptions</span><span class="p">)</span> <span class="p">{</span> <span class="p">(</span><span class="n">finalResult</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="k">in</span>
                    <span class="nb">self</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">finalResult</span>
            <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div><div class="highlight"><pre><code class="language-objective-c" data-lang="objective-c"><span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">strong</span><span class="p">)</span> <span class="n">PHAsset</span> <span class="o">*</span><span class="n">asset</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="bp">UIImageView</span> <span class="o">*</span><span class="n">imageView</span><span class="p">;</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">nonatomic</span><span class="p">,</span> <span class="k">weak</span><span class="p">)</span> <span class="kt">IBOutlet</span> <span class="bp">UIProgressView</span> <span class="o">*</span><span class="n">progressView</span><span class="p">;</span>

<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{</span>
    <span class="p">[</span><span class="nb">super</span> <span class="n">viewDidLoad</span><span class="p">];</span>

    <span class="n">PHImageManager</span> <span class="o">*</span><span class="n">manager</span> <span class="o">=</span> <span class="p">[</span><span class="n">PHImageManager</span> <span class="n">defaultManager</span><span class="p">];</span>

    <span class="n">PHImageRequestOptions</span> <span class="o">*</span><span class="n">initialRequestOptions</span> <span class="o">=</span> <span class="p">[[</span><span class="n">PHImageRequestOptions</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
    <span class="n">initialRequestOptions</span><span class="p">.</span><span class="n">synchronous</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
    <span class="n">initialRequestOptions</span><span class="p">.</span><span class="n">resizeMode</span> <span class="o">=</span> <span class="n">PHImageRequestOptionsResizeModeFast</span><span class="p">;</span>
    <span class="n">initialRequestOptions</span><span class="p">.</span><span class="n">deliveryMode</span> <span class="o">=</span> <span class="n">PHImageRequestOptionsDeliveryModeFastFormat</span><span class="p">;</span>

    <span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="n">resultHandler</span><span class="p">)(</span><span class="bp">UIImage</span> <span class="o">*</span><span class="p">,</span> <span class="bp">NSDictionary</span> <span class="o">*</span><span class="p">)</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="bp">UIImage</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">initialResult</span><span class="p">,</span> <span class="bp">NSDictionary</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">info</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">initialResult</span><span class="p">.</span><span class="bp">CIImage</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="n">PHImageRequestOptions</span> <span class="o">*</span><span class="n">finalRequestOptions</span> <span class="o">=</span> <span class="p">[[</span><span class="n">PHImageRequestOptions</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
        <span class="n">finalRequestOptions</span><span class="p">.</span><span class="n">progressHandler</span> <span class="o">=</span> <span class="o">^</span><span class="p">(</span><span class="kt">double</span> <span class="n">progress</span><span class="p">,</span> <span class="bp">NSError</span> <span class="o">*</span><span class="n">error</span><span class="p">,</span> <span class="kt">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">,</span> <span class="bp">NSDictionary</span> <span class="o">*</span><span class="n">info</span><span class="p">)</span> <span class="p">{</span>
            <span class="nb">self</span><span class="p">.</span><span class="n">progressView</span><span class="p">.</span><span class="n">progress</span> <span class="o">=</span> <span class="n">progress</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="bp">CIDetector</span> <span class="o">*</span><span class="n">detector</span> <span class="o">=</span> <span class="p">[</span><span class="bp">CIDetector</span> <span class="nl">detectorOfType</span><span class="p">:</span><span class="n">CIDetectorTypeFace</span>
                                                  <span class="nl">context</span><span class="p">:</span><span class="nb">nil</span>
                                                  <span class="nl">options</span><span class="p">:</span><span class="l">@{</span><span class="nl">CIDetectorAccuracy</span> <span class="p">:</span> <span class="n">CIDetectorAccuracyLow</span><span class="l">}</span><span class="p">];</span>
        <span class="bp">NSArray</span><span class="o">&lt;</span><span class="bp">CIFeature</span> <span class="o">*&gt;</span> <span class="o">*</span><span class="n">features</span> <span class="o">=</span> <span class="p">[</span><span class="n">detector</span> <span class="nl">featuresInImage</span><span class="p">:</span><span class="n">initialResult</span><span class="p">.</span><span class="bp">CIImage</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">features</span><span class="p">.</span><span class="n">count</span><span class="p">)</span> <span class="p">{</span>
            <span class="bp">CGRect</span> <span class="n">rect</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="bp">CIFeature</span> <span class="o">*</span><span class="n">feature</span> <span class="k">in</span> <span class="n">features</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">CGRectUnion</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">feature</span><span class="p">.</span><span class="n">bounds</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="bp">CGAffineTransform</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">CGAffineTransformMakeScale</span><span class="p">(</span><span class="mf">1.0</span> <span class="o">/</span> <span class="n">initialResult</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">initialResult</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>
            <span class="n">finalRequestOptions</span><span class="p">.</span><span class="n">normalizedCropRect</span> <span class="o">=</span> <span class="n">CGRectApplyAffineTransform</span><span class="p">(</span><span class="n">rect</span><span class="p">,</span> <span class="n">transform</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="p">[</span><span class="n">manager</span> <span class="nl">requestImageForAsset</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">asset</span>
                           <span class="nl">targetSize</span><span class="p">:</span><span class="n">PHImageManagerMaximumSize</span>
                          <span class="nl">contentMode</span><span class="p">:</span><span class="n">PHImageContentModeAspectFit</span>
                              <span class="nl">options</span><span class="p">:</span><span class="n">finalRequestOptions</span>
                        <span class="nl">resultHandler</span><span class="p">:</span><span class="o">^</span><span class="p">(</span><span class="bp">UIImage</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">finalResult</span><span class="p">,</span> <span class="bp">NSDictionary</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="n">info</span><span class="p">)</span> <span class="p">{</span>
                            <span class="nb">self</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">finalResult</span><span class="p">;</span>
                        <span class="p">}];</span>
    <span class="p">};</span>
    <span class="c1">// typedef void (^ PHAssetImageProgressHandler)(double progress, NSError *__nullable error, BOOL *stop, NSDictionary *__nullable info) NS_AVAILABLE_IOS(8_0);</span>

    <span class="p">[</span><span class="n">manager</span> <span class="nl">requestImageForAsset</span><span class="p">:</span><span class="nb">self</span><span class="p">.</span><span class="n">asset</span>
                       <span class="nl">targetSize</span><span class="p">:</span><span class="n">PHImageManagerMaximumSize</span>
                      <span class="nl">contentMode</span><span class="p">:</span><span class="n">PHImageContentModeAspectFit</span>
                          <span class="nl">options</span><span class="p">:</span><span class="n">initialRequestOptions</span>
                    <span class="nl">resultHandler</span><span class="p">:</span><span class="n">resultHandler</span><span class="p">];</span>

<span class="p">}</span>
</code></pre></div>
<p>The initial request attempts to get the most readily available representation of an asset to pass into a <code>CIDetector</code> for facial recognition. If any features were detected, the final request would be cropped to them, by specifying the <code>normalizedCropRect</code> on the final <code>PHImageRequestOptions</code>.</p>

<blockquote>
<p><code>normalizedCropRect</code> is normalized for <code>origin</code> and <code>size</code> components within the inclusive range <code>0.0</code> to <code>1.0</code>. An affine transformation scaling on the inverse of the original frame makes for an easy calculation.</p>
</blockquote>

<hr>

<p>From its very inception, iOS has been a balancing act between functionality and integrity. And with every release, a combination of thoughtful affordances and powerful APIs have managed to expand the role third-party applications without compromising security or performance.</p>

<p>By unifying functionality for fetching, managing, and manipulating photos, the Photos framework will dramatically raise the standards for existing apps, while simultaneously lowering the bar for developing apps, and is a stunning example of why developers tend to prefer iOS as a platform.</p>

  </div>

  <footer role="complementary">
    
    <section id="revisions">
      <small>NSMutableHipster</small>

      <p>
      Questions? Corrections?  <a href="https://github.com/NSHipster/articles/issues">Issues</a> and <a href="https://github.com/NSHipster/articles/blob/master/2014-09-16-phimagemanager.md">pull requests</a> are always welcome — NSHipster is made better by readers like you.
      </p>
      
      <p>
      
        
            <em>This article uses Swift version 2.0 and was last reviewed on September 15, 2015.</em>
        
      
      Find status information for all articles on the <a href="/status/">status page</a>.
      </p>
      
      <dl>
      
      </dl>
    </section>
    

    <section id="follow">
      <small>Follow NSHipster</small>

      <ul>
        <li class="twitter">
          <a href="https://twitter.com/intent/user?screen_name=NSHipster" title="Follow NSHipster on Twitter"><i class="icon-twitter" aria-hidden="true"></i></a>
        </li>
        <li class="facebook">
          <a href="https://www.facebook.com/NSHipster" title="Like NSHipster on Facebook"><i class="icon-facebook" aria-hidden="true"></i></a>
        </li>
        <li class="google-plus">
          <a href="https://plus.google.com/+NSHipster" title="Follow NSHipster on G+"><i class="icon-googleplus" aria-hidden="true"></i></a>
        </li>
        <li class="rss">
          <a href="/feed.xml" title="Subscribe to the NSHipster RSS Feed"><i class="icon-feed" aria-hidden="true"></i></a>
        </li>
      </ul>

      <form action="https://tinyletter.com/NSHipster" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/NSHipster', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true">
        <label for="tlemail" hidden style="display:none;">Enter Your Email Address</label>
        <input type="email" name="email" id="tlemail" placeholder="Your Email Address"/>
        <input type="hidden" name="embed" value="1"/>
        <input type="submit" value="Join the Newsletter"/>
      </form>
    </section>

    <section id="attribution">
      
  <div class="contributor" itemprop="author" itemscope itemtype="http://data-vocabulary.org/Person">
    <small>Written by</small>

    <img class="avatar" alt="Mattt Thompson" itemprop="image" src="http://nshipster.s3.amazonaws.com/mattt-thompson.jpg" draggable="false"/>
    <div class="details">
      <span itemprop="name"><a href="/authors/mattt-thompson/">Mattt Thompson</a></span>

      <p><a href="https://github.com/mattt">Mattt Thompson</a> (<a href="https://twitter.com/mattt">@mattt</a>) is a writer and developer from the Rustbelt.</p>


      
        <a href="https://plus.google.com/106751358503565042647?rel=author" rel="author"></a>
      
    </div>
  </div>


    </section>

    

    

    <section>
      <div id="continue">
        <small>Next Article</small>
        
        

          <article>
            <h1 class="title">
              <a href="/swift-comparison-protocols/" title="Swift Comparison Protocols" rel="next">Swift Comparison Protocols</a>
            </h1>

            <p>Objective-C required us to wax philosophic about the nature of equality and identity. To the relief of any developer less inclined towards handwavy treatises, this is not as much the case for Swift.</p>

          </article>
      </div>

      
      
        
        
      

      <div id="related">
        <small>Related Articles</small>

        <ul>
          
          
          
            <li>
              <a href="/nsurlprotocol/" title="NSURLProtocol">NSURLProtocol</a>
            </li>
            
          
          
            <li>
              <a href="/ns_enum-ns_options/" title="NS_ENUM & NS_OPTIONS">NS_ENUM & NS_OPTIONS</a>
            </li>
            
          
          
            <li>
              <a href="/wkwebkit/" title="WKWebView">WKWebView</a>
            </li>
            
          
          
            <li>
              <a href="/cmdevicemotion/" title="CMDeviceMotion">CMDeviceMotion</a>
            </li>
            
          
        </ul>
      </div>
    </section>
  </footer>
</article>

    </div>

    <footer role="contentinfo">
      <section class="credits colophon">
        <p>
          Questions? Corrections? <a href="https://twitter.com/NSHipster">@NSHipster</a> or <a href="https://github.com/NSHipster/articles">on GitHub</a>.
        </p>
        <p>
          <i aria-hidden="true" class="icon-cc"></i>
          <i aria-hidden="true" class="icon-cc-by"></i>
          <i aria-hidden="true" class="icon-cc-nc"></i>
          NSHipster.com is released under a <a href="http://creativecommons.org/licenses/by-nc/4.0/" rel="license">Creative Commons BY-NC License</a>.
        </p>
        <p><abbr title="International Standard Serial Number">ISSN</abbr> 2373-9800</p>
        <p lang="zh-Hans"><a href="http://nshipster.cn" hreflang="zh-Hans" title="Articles also available in Chinese">文章也可在中文版阅读</a>。</p>
        <a href="https://plus.google.com/105091289906267717942" rel="publisher"></a>
      </section>
    </footer>
  </div>

  <script>
    if (window.navigator && window.navigator.loadPurpose === "preview") {
      window.location.href = "http://nshipster.com/topsites_preview.html";
    }
  </script>

  <script async>
    var Swiftype = window.Swiftype || {};
    (function() {
      Swiftype.key = 'Q5jNBiR8qVs5xE5dNect';
      var script = document.createElement('script');
      script.type = 'text/javascript';
      script.async = true;
      script.src = "//swiftype.com/embed.js";
      var entry = document.getElementsByTagName('script')[0];
      document.getElementsByTagName('script')[0].parentNode.insertBefore(script, entry);
    }());
  </script>

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-49868484-1', 'nshipster.com');
    ga('send', 'pageview');
  </script>

</body>
</html>
